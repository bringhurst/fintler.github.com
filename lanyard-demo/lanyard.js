function i(a){throw a;}var j=true,l=null,m=false;function n(a){return function(b){this[a]=b}}function o(a){return function(){return this[a]}}var p,r=this;function s(a,b,c){a=a.split(".");c=c||r;!(a[0]in c)&&c.execScript&&c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)if(!a.length&&b!==undefined)c[d]=b;else c=c[d]?c[d]:c[d]={}}function aa(a,b){for(var c=a.split("."),d=b||r,e;e=c.shift();)if(d[e])d=d[e];else return l;return d}function ba(){}
function ca(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array||!(a instanceof Object)&&Object.prototype.toString.call(a)=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(!(a instanceof Object)&&(Object.prototype.toString.call(a)=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call")))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function da(a){var b=ca(a);return b=="array"||b=="object"&&typeof a.length=="number"}function t(a){return typeof a=="string"}function ea(a){return ca(a)=="function"}function fa(a){a=ca(a);return a=="object"||a=="array"||a=="function"}function ga(a){return a[ha]||(a[ha]=++ja)}var ha="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ja=0;
function ka(a,b){var c=b||r;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(c,e)}}else return function(){return a.apply(c,arguments)}}var la=Date.now||function(){return+new Date};function x(a,b){function c(){}c.prototype=b.prototype;a.cb=b.prototype;a.prototype=new c};function ma(){this.Xd=la()}var na=new ma;ma.prototype.set=n("Xd");ma.prototype.reset=function(){this.set(la())};ma.prototype.get=o("Xd");function oa(a){for(var b=1;b<arguments.length;b++){var c=String(arguments[b]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,c)}return a}function pa(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}
function qa(a,b){if(b)return a.replace(ta,"&amp;").replace(ua,"&lt;").replace(va,"&gt;").replace(wa,"&quot;");else{if(!xa.test(a))return a;if(a.indexOf("&")!=-1)a=a.replace(ta,"&amp;");if(a.indexOf("<")!=-1)a=a.replace(ua,"&lt;");if(a.indexOf(">")!=-1)a=a.replace(va,"&gt;");if(a.indexOf('"')!=-1)a=a.replace(wa,"&quot;");return a}}var ta=/&/g,ua=/</g,va=/>/g,wa=/\"/g,xa=/[&<>\"]/;function ya(a,b){return pa(a.replace(/  /g," &#160;"),b)}
function za(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var h=d[g]||"",k=e[g]||"",q=RegExp("(\\d*)(\\D*)","g"),u=RegExp("(\\d*)(\\D*)","g");do{var v=q.exec(h)||["","",""],w=u.exec(k)||["","",""];if(v[0].length==0&&w[0].length==0)break;c=Aa(v[1].length==0?0:parseInt(v[1],10),w[1].length==0?0:parseInt(w[1],10))||Aa(v[2].length==0,w[2].length==0)||Aa(v[2],w[2])}while(c==
0)}return c}function Aa(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function Ba(a){this.ng=a||"";this.Mg=na}Ba.prototype.de=j;Ba.prototype.Kg=j;Ba.prototype.Jg=j;Ba.prototype.ee=m;function Ca(a){if(a<10)return"0"+a;return String(a)}function Da(a,b){var c=(a.me-b)/1E3,d=c.toFixed(3),e=0;if(c<1)e=2;else for(;c<100;){e++;c*=10}for(;e-- >0;)d=" "+d;return d}function Ea(a){Ba.call(this,a)}x(Ea,Ba);Ea.prototype.ee=j;function Fa(a){this.stack=Error().stack||"";if(a)this.message=String(a)}x(Fa,Error);Fa.prototype.name="CustomError";function Ga(a,b){b.unshift(a);Fa.call(this,oa.apply(l,b));b.shift();this.th=a}x(Ga,Fa);Ga.prototype.name="AssertionError";function Ha(a,b){if(!a){var c=Array.prototype.slice.call(arguments,2),d="Assertion failed";if(b){d+=": "+b;var e=c}i(new Ga(""+d,e||[]))}return a}function Ia(a){i(new Ga("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var y=Array.prototype,Ja=y.indexOf?function(a,b,c){Ha(a.length!=l);return y.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:c<0?Math.max(0,a.length+c):c;if(t(a)){if(!t(b)||b.length!=1)return-1;return a.indexOf(b,c)}for(c=c;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},La=y.forEach?function(a,b,c){Ha(a.length!=l);y.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=t(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function Ma(){return y.concat.apply(y,arguments)}
function Na(a){if(ca(a)=="array")return Ma(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}function Oa(a,b,c){Ha(a.length!=l);return arguments.length<=2?y.slice.call(a,b):y.slice.call(a,b,c)};function Pa(a,b,c){for(var d in a)b.call(c,a[d],d,a)}var Qa=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function Ra(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<Qa.length;e++){b=Qa[e];if(Object.prototype.hasOwnProperty.call(c,b))a[b]=c[b]}}};var Sa="StopIteration"in r?r.StopIteration:Error("StopIteration");function Ta(){}Ta.prototype.next=function(){i(Sa)};Ta.prototype.fc=function(){return this};function Ua(a){if(a instanceof Ta)return a;if(typeof a.fc=="function")return a.fc(m);if(da(a)){var b=0,c=new Ta;c.next=function(){for(;;){if(b>=a.length)i(Sa);if(b in a)return a[b++];else b++}};return c}i(Error("Not implemented"))}
function Va(a,b,c){if(da(a))try{La(a,b,c)}catch(d){if(d!==Sa)i(d)}else{a=Ua(a);try{for(;;)b.call(c,a.next(),undefined,a)}catch(e){if(e!==Sa)i(e)}}};function Wa(a){this.Ba={};this.U=[];var b=arguments.length;if(b>1){if(b%2)i(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.set(arguments[c],arguments[c+1])}else if(a){var d;if(a instanceof Wa){c=Xa(a);Ya(a);d=[];for(b=0;b<a.U.length;b++)d.push(a.Ba[a.U[b]]);d=d}else{b=[];var e=0;for(c in a)b[e++]=c;c=b;b=[];e=0;for(d in a)b[e++]=a[d];d=b}for(b=0;b<c.length;b++)this.set(c[b],d[b])}}p=Wa.prototype;p.R=0;p.$b=0;function Xa(a){Ya(a);return a.U.concat()}
p.clear=function(){this.Ba={};this.$b=this.R=this.U.length=0};function Ya(a){if(a.R!=a.U.length){for(var b=0,c=0;b<a.U.length;){var d=a.U[b];if(Object.prototype.hasOwnProperty.call(a.Ba,d))a.U[c++]=d;b++}a.U.length=c}if(a.R!=a.U.length){var e={};for(c=b=0;b<a.U.length;){d=a.U[b];if(!Object.prototype.hasOwnProperty.call(e,d)){a.U[c++]=d;e[d]=1}b++}a.U.length=c}}p.get=function(a,b){if(Object.prototype.hasOwnProperty.call(this.Ba,a))return this.Ba[a];return b};
p.set=function(a,b){if(!Object.prototype.hasOwnProperty.call(this.Ba,a)){this.R++;this.U.push(a);this.$b++}this.Ba[a]=b};p.fc=function(a){Ya(this);var b=0,c=this.U,d=this.Ba,e=this.$b,f=this,g=new Ta;g.next=function(){for(;;){if(e!=f.$b)i(Error("The map has changed since the iterator was created"));if(b>=c.length)i(Sa);var h=c[b++];return a?h:d[h]}};return g};function Za(a){return $a(a||arguments.callee.caller,[])}
function $a(a,b){var c=[];if(Ja(b,a)>=0)c.push("[...circular reference...]");else if(a&&b.length<50){c.push(ab(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":f=f;break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=ab(f))?f:"[fn]";break;default:f=typeof f}if(f.length>40)f=f.substr(0,40)+"...";c.push(f)}b.push(a);c.push(")\n");try{c.push($a(a.caller,
b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?c.push("[...long stack...]"):c.push("[end]");return c.join("")}function ab(a){a=String(a);if(!bb[a]){var b=/function ([^\(]+)/.exec(a);bb[a]=b?b[1]:"[Anonymous]"}return bb[a]}var bb={};function cb(a,b,c,d,e){this.reset(a,b,c,d,e)}cb.prototype.rg=0;cb.prototype.uc=l;cb.prototype.tc=l;var db=0;cb.prototype.reset=function(a,b,c,d,e){this.rg=typeof e=="number"?e:db++;this.me=d||la();this.$a=a;this.jg=b;this.ag=c;delete this.uc;delete this.tc};cb.prototype.Qc=n("$a");function A(a){this.Rd=a}A.prototype.Vb=l;A.prototype.$a=l;A.prototype.nc=l;A.prototype.xb=l;function B(a,b){this.name=a;this.value=b}B.prototype.toString=o("name");var eb=new B("SHOUT",1200),fb=new B("SEVERE",1E3),gb=new B("WARNING",900),hb=new B("INFO",800),ib=new B("CONFIG",700),C=new B("FINE",500),jb=new B("ALL",0);A.prototype.getName=o("Rd");A.prototype.Qc=n("$a");function kb(a){if(a.$a)return a.$a;if(a.Vb)return kb(a.Vb);Ia("Root logger has no level set.");return l}
A.prototype.log=function(a,b,c){if(a.value>=kb(this).value){a=this.Pf(a,b,c);for(b=this;b;){c=b;var d=a;if(c.xb)for(var e=0,f=void 0;f=c.xb[e];e++)f(d);b=b.Vb}}};
A.prototype.Pf=function(a,b,c){var d=new cb(a,String(b),this.Rd);if(c){d.uc=c;var e;var f=arguments.callee.caller;try{var g,h=aa("window.location.href");g=typeof c=="string"?{message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"}:!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:c.lineNumber||c.rh||"Not available",fileName:c.fileName||c.filename||c.sourceURL||h,stack:c.stack||"Not available"}:c;e="Message: "+qa(g.message)+'\nUrl: <a href="view-source:'+
g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+qa(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+qa(Za(f)+"-> ")}catch(k){e="Exception trying to expose exception! You win, we lose. "+k}d.tc=e}return d};function D(a,b,c){a.log(fb,b,c)}var lb={},ob=l;function pb(){if(!ob){ob=new A("");lb[""]=ob;ob.Qc(ib)}}function qb(){pb();return ob}
function E(a){pb();var b;if(!(b=lb[a])){b=new A(a);var c=a.lastIndexOf("."),d=a.substr(c+1);c=E(a.substr(0,c));if(!c.nc)c.nc={};c.nc[d]=b;b.Vb=c;b=lb[a]=b}return b};var rb,sb,tb,ub,vb;function wb(){return r.navigator?r.navigator.userAgent:l}ub=tb=sb=rb=m;var xb;if(xb=wb()){var yb=r.navigator;rb=xb.indexOf("Opera")==0;sb=!rb&&xb.indexOf("MSIE")!=-1;tb=!rb&&xb.indexOf("WebKit")!=-1;ub=!rb&&!tb&&yb.product=="Gecko"}var zb=rb,F=sb,Ab=ub,G=tb,Bb,Cb=r.navigator;Bb=Cb&&Cb.platform||"";vb=Bb.indexOf("Mac")!=-1;var Db=Bb.indexOf("Win")!=-1,Eb;
a:{var Fb="",Gb;if(zb&&r.opera){var Hb=r.opera.version;Fb=typeof Hb=="function"?Hb():Hb}else{if(Ab)Gb=/rv\:([^\);]+)(\)|;)/;else if(F)Gb=/MSIE\s+([^\);]+)(\)|;)/;else if(G)Gb=/WebKit\/(\S+)/;if(Gb){var Ib=Gb.exec(wb());Fb=Ib?Ib[1]:""}}if(F){var Jb,Kb=r.document;Jb=Kb?Kb.documentMode:undefined;if(Jb>parseFloat(Fb)){Eb=String(Jb);break a}}Eb=Fb}var Lb={};function Mb(a){return Lb[a]||(Lb[a]=za(Eb,a)>=0)};var Nb,Ob=!F||Mb("9");F&&Mb("9");function Pb(a){var b;b=(b=a.className)&&typeof b.split=="function"?b.split(/\s+/):[];var c;c=Oa(arguments,1);for(var d=0,e=0;e<c.length;e++)if(!(Ja(b,c[e])>=0)){b.push(c[e]);d++}c=d==c.length;a.className=b.join(" ");return c};function Qb(a,b,c,d){a=d||a;var e=b&&b!="*"?b.toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(!G||document.compatMode=="CSS1Compat"||Mb("528"))&&(e||c))return a.querySelectorAll(e+(c?"."+c:""));if(c&&a.getElementsByClassName){b=a.getElementsByClassName(c);if(e){a={};for(var f=d=0,g;g=b[f];f++)if(e==g.nodeName)a[d++]=g;a.length=d;return a}else return b}b=a.getElementsByTagName(e||"*");if(c){a={};for(f=d=0;g=b[f];f++){e=g.className;var h;if(h=typeof e.split=="function"){e=e.split(/\s+/);h=
Ja(e,c)>=0}if(h)a[d++]=g}a.length=d;return a}else return b}function Rb(a,b){Pa(b,function(c,d){if(d=="style")a.style.cssText=c;else if(d=="class")a.className=c;else if(d=="for")a.htmlFor=c;else if(d in Sb)a.setAttribute(Sb[d],c);else a[d]=c})}var Sb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",type:"type"};function Ub(){return Vb(document,arguments)}
function Vb(a,b){var c=b[0],d=b[1];if(!Ob&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',qa(d.name),'"');if(d.type){c.push(' type="',qa(d.type),'"');var e={};Ra(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)if(t(d))c.className=d;else ca(d)=="array"?Pb.apply(l,[c].concat(d)):Rb(c,d);b.length>2&&Wb(a,c,b,2);return c}
function Wb(a,b,c,d){function e(g){if(g)b.appendChild(t(g)?a.createTextNode(g):g)}for(d=d;d<c.length;d++){var f=c[d];da(f)&&!(fa(f)&&f.nodeType>0)?La(Xb(f)?Na(f):f,e):e(f)}}function Xb(a){if(a&&typeof a.length=="number")if(fa(a))return typeof a.item=="function"||typeof a.item=="string";else if(ea(a))return typeof a.item=="function";return m}function Yb(a){this.Sa=a||r.document||document}p=Yb.prototype;p.qd=function(){return Vb(this.Sa,arguments)};p.createElement=function(a){return this.Sa.createElement(a)};
p.createTextNode=function(a){return this.Sa.createTextNode(a)};p.appendChild=function(a,b){a.appendChild(b)};p.contains=function(a,b){if(a.contains&&b.nodeType==1)return a==b||a.contains(b);if(typeof a.compareDocumentPosition!="undefined")return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a};function Zb(a,b){if(F)a.cssText=b;else a[G?"innerText":"innerHTML"]=b};function $b(a){this.og=ka(this.Ze,this);this.zd=new Ea;this.Fd=this.zd.de=m;this.N=a;this.of=this.N.ownerDocument||this.N.document;a=(a=this.N)?new Yb(a.nodeType==9?a:a.ownerDocument||a.document):Nb||(Nb=new Yb);var b=l;if(F){b=a.Sa.createStyleSheet();Zb(b,".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}")}else{var c=
Qb(a.Sa,"head",void 0,void 0)[0];if(!c){b=Qb(a.Sa,"body",void 0,void 0)[0];c=a.qd("head");b.parentNode.insertBefore(c,b)}b=a.qd("style");Zb(b,".dbg-sev{color:#F00}.dbg-w{color:#C40}.dbg-sh{font-weight:bold;color:#000}.dbg-i{color:#444}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}.logmsg{border-bottom:1px solid #CCC;padding:2px}.logsep{background-color: #8C8;}.logdiv{border:1px solid #CCC;background-color:#FCFCFC;font:medium monospace}");a.appendChild(c,b)}this.N.className+=" logdiv"}
$b.prototype.Ze=function(a){var b=this.N.scrollHeight-this.N.scrollTop-this.N.clientHeight<=100,c=this.of.createElement("div");c.className="logmsg";var d=this.zd,e;switch(a.$a.value){case eb.value:e="dbg-sh";break;case fb.value:e="dbg-sev";break;case gb.value:e="dbg-w";break;case hb.value:e="dbg-i";break;default:e="dbg-f"}var f=[];f.push(d.ng," ");if(d.de){var g=new Date(a.me);f.push("[",Ca(g.getFullYear()-2E3)+Ca(g.getMonth()+1)+Ca(g.getDate())+" "+Ca(g.getHours())+":"+Ca(g.getMinutes())+":"+Ca(g.getSeconds())+
"."+Ca(Math.floor(g.getMilliseconds()/10)),"] ")}d.Kg&&f.push("[",ya(Da(a,d.Mg.get())),"s] ");d.Jg&&f.push("[",qa(a.ag),"] ");f.push('<span class="',e,'">',pa(ya(qa(a.jg))));if(d.ee&&a.uc)f.push("<br>",pa(ya(a.tc||"")));f.push("</span><br>");c.innerHTML=f.join("");this.N.appendChild(c);if(b)this.N.scrollTop=this.N.scrollHeight};$b.prototype.clear=function(){this.N.innerHTML=""};function ac(){}ac.prototype.ud=m;ac.prototype.Ra=function(){if(!this.ud){this.ud=j;this.fa()}};ac.prototype.fa=function(){};function H(a,b){this.Ld=b;this.Ga=[];if(a>this.Ld)i(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Ga.push(this.nb())}x(H,ac);p=H.prototype;p.Fa=l;p.td=l;function bc(a){if(a.Ga.length)return a.Ga.pop();return a.nb()}function cc(a,b){a.Ga.length<a.Ld?a.Ga.push(b):a.qc(b)}p.nb=function(){return this.Fa?this.Fa():{}};p.qc=function(a){if(this.td)this.td(a);else if(fa(a))if(ea(a.Ra))a.Ra();else for(var b in a)delete a[b]};
p.fa=function(){H.cb.fa.call(this);for(var a=this.Ga;a.length;)this.qc(a.pop());delete this.Ga};function dc(){this.sb=[];this.Lc=new Wa;this.pe=this.qe=this.re=this.he=0;this.Hb=new Wa;this.pd=this.oe=0;this.kg=1;this.rc=new H(0,4E3);this.rc.nb=function(){return new ec};this.ie=new H(0,50);this.ie.nb=function(){return new fc};var a=this;this.Cc=new H(0,2E3);this.Cc.nb=function(){return String(a.kg++)};this.Cc.qc=function(){};this.hf=3}function fc(){this.Zc=this.le=this.oc=0}
fc.prototype.toString=function(){var a=[];a.push(this.type," ",this.oc," (",Math.round(this.le*10)/10," ms)");this.Zc&&a.push(" [VarAlloc = ",this.Zc,"]");return a.join("")};function ec(){}function gc(a,b,c,d){var e=[];c==-1?e.push("    "):e.push(hc(a.wd-c));e.push(" ",ic(a.wd-b));if(a.sc==0)e.push(" Start        ");else if(a.sc==1){e.push(" Done ");e.push(hc(a.zh-a.startTime)," ms ")}else e.push(" Comment      ");e.push(d,a);a.Qg>0&&e.push("[VarAlloc ",a.Qg,"] ");return e.join("")}
ec.prototype.toString=function(){return this.type==l?this.bf:"["+this.type+"] "+this.bf};dc.prototype.reset=function(a){this.hf=a;for(a=0;a<this.sb.length;a++){var b=this.rc.id;b&&cc(this.Cc,b);cc(this.rc,this.sb[a])}this.sb.length=0;this.Lc.clear();this.he=la();this.pd=this.oe=this.pe=this.qe=this.re=0;b=Xa(this.Hb);for(a=0;a<b.length;a++){var c=this.Hb.get(b[a]);c.oc=0;c.le=0;c.Zc=0;cc(this.ie,c)}this.Hb.clear()};
dc.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.sb.length;d++){var e=this.sb[d];e.sc==1&&c.pop();a.push(" ",gc(e,this.he,b,c.join("")));b=e.wd;a.push("\n");e.sc==0&&c.push("|  ")}if(this.Lc.R!=0){var f=la();a.push(" Unstopped timers:\n");Va(this.Lc,function(g){a.push("  ",g," (",f-g.startTime," ms, started at ",ic(g.startTime),")\n")})}b=Xa(this.Hb);for(d=0;d<b.length;d++){c=this.Hb.get(b[d]);c.oc>1&&a.push(" TOTAL ",c,"\n")}a.push("Total tracers created ",this.oe,"\n","Total comments created ",
this.pd,"\n","Overhead start: ",this.re," ms\n","Overhead end: ",this.qe," ms\n","Overhead comment: ",this.pe," ms\n");return a.join("")};function hc(a){a=Math.round(a);var b="";if(a<1E3)b=" ";if(a<100)b="  ";if(a<10)b="   ";return b+a}function ic(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new dc;function I(a,b){this.a=E("lanyard.geom.Angle");isNaN(a)&&D(this.a,"Attempted to create an angle with invalid degrees.");isNaN(b)&&D(this.a,"Attempted to create an angle with invalid radians.");this.e=a;this.G=b}s("lanyard.geom.Angle",I,void 0);I.prototype.Jb=Math.PI/180;s("lanyard.geom.Angle.prototype.DEGREES_TO_RADIANS",I.prototype.Jb,void 0);I.prototype.fb=180/Math.PI;s("lanyard.geom.Angle.prototype.RADIANS_TO_DEGREES",I.prototype.fb,void 0);I.prototype.eb=Math.PI/2;
s("lanyard.geom.Angle.prototype.PIOver2",I.prototype.eb,void 0);I.prototype.j=function(a){return new I(a,I.prototype.Jb*a)};s("lanyard.geom.Angle.prototype.fromDegrees",I.prototype.j,void 0);I.prototype.M=function(a){return new I(I.prototype.fb*a,a)};s("lanyard.geom.Angle.prototype.fromRadians",I.prototype.M,void 0);I.prototype.Nf=o("e");s("lanyard.geom.Angle.prototype.getDegrees",I.prototype.Nf,void 0);I.prototype.Qf=o("G");s("lanyard.geom.Angle.prototype.getRadians",I.prototype.Qf,void 0);
I.prototype.ZERO=I.prototype.j(0);s("lanyard.geom.Angle.prototype.ZERO",I.prototype.ZERO,void 0);I.prototype.ec=I.prototype.j(90);s("lanyard.geom.Angle.prototype.POS90",I.prototype.ec,void 0);I.prototype.cc=I.prototype.j(-90);s("lanyard.geom.Angle.prototype.NEG90",I.prototype.cc,void 0);I.prototype.dc=I.prototype.j(180);s("lanyard.geom.Angle.prototype.POS180",I.prototype.dc,void 0);I.prototype.bc=I.prototype.j(-180);s("lanyard.geom.Angle.prototype.NEG180",I.prototype.bc,void 0);I.prototype.He=I.prototype.j(360);
s("lanyard.geom.Angle.prototype.POS360",I.prototype.He,void 0);I.prototype.qf=function(a){a=a<-90?-90:a>90?90:a;return new I(a,I.prototype.Jb*a)};s("lanyard.geom.Angle.prototype.fromDegreesLatitude",I.prototype.qf,void 0);I.prototype.uf=function(a){a=a<I.prototype.eb?-I.prototype.eb:a>I.prototype.eb?I.prototype.eb:a;var b=I.prototype.fb*a;b=b<-90?-90:b>90?90:b;return new I(b,a)};s("lanyard.geom.Angle.prototype.fromRadiansLatitude",I.prototype.uf,void 0);
I.prototype.rf=function(a){a=a<-180?-180:a>180?180:a;var b=I.prototype.Jb*a;b=b<-Math.PI?-Math.PI:b>Math.PI?Math.PI:b;return new I(a,b)};s("lanyard.geom.Angle.prototype.fromDegreesLongitude",I.prototype.rf,void 0);I.prototype.vf=function(a){a=a<-Math.PI?-Math.PI:a>Math.PI?Math.PI:a;var b=I.prototype.fb*a;b=b<-180?-180:b>180?180:b;return new I(b,a)};s("lanyard.geom.Angle.prototype.fromRadiansLongitude",I.prototype.vf,void 0);
I.prototype.wf=function(a,b){var c=Math.atan2(b,a);return new I(I.prototype.fb*c,c)};s("lanyard.geom.Angle.prototype.fromXY",I.prototype.wf,void 0);I.prototype.add=function(a){return I.prototype.j(this.e+a.e)};s("lanyard.geom.Angle.prototype.add",I.prototype.add,void 0);I.prototype.K=function(a){return I.prototype.j(this.e-a.e)};s("lanyard.geom.Angle.prototype.subtract",I.prototype.K,void 0);I.prototype.multiply=function(a){return I.prototype.j(this.e*a)};
s("lanyard.geom.Angle.prototype.multiply",I.prototype.multiply,void 0);I.prototype.lf=function(a){return this.e/a.e};s("lanyard.geom.Angle.prototype.divideByAngle",I.prototype.lf,void 0);I.prototype.mf=function(a){return I.prototype.j(this.e/a)};s("lanyard.geom.Angle.prototype.divideByDegrees",I.prototype.mf,void 0);I.prototype.$e=function(a){return I.prototype.M(this.G+a)};s("lanyard.geom.Angle.prototype.addRadians",I.prototype.$e,void 0);I.prototype.kc=function(a){return I.prototype.j(this.e+a)};
s("lanyard.geom.Angle.prototype.addDegrees",I.prototype.kc,void 0);I.prototype.Ng=function(a){return I.prototype.M(this.G-a)};s("lanyard.geom.Angle.prototype.subtractRadians",I.prototype.Ng,void 0);I.prototype.sin=function(){return Math.sin(this.G)};s("lanyard.geom.Angle.prototype.sin",I.prototype.sin,void 0);I.prototype.Lg=function(){return Math.sin(0.5*this.G)};s("lanyard.geom.Angle.prototype.sinHalfAngle",I.prototype.Lg,void 0);I.prototype.asin=function(a){return I.prototype.M(Math.asin(a))};
s("lanyard.geom.Angle.prototype.asin",I.prototype.asin,void 0);I.prototype.cos=function(){return Math.cos(this.G)};s("lanyard.geom.Angle.prototype.cos",I.prototype.cos,void 0);I.prototype.df=function(){return Math.cos(0.5*this.G)};s("lanyard.geom.Angle.prototype.cosHalfAngle",I.prototype.df,void 0);I.prototype.acos=function(a){return I.prototype.M(Math.acos(a))};s("lanyard.geom.Angle.prototype.acos",I.prototype.acos,void 0);I.prototype.Vc=function(){return Math.tan(0.5*this.G)};
s("lanyard.geom.Angle.prototype.tanHalfAngle",I.prototype.Vc,void 0);I.prototype.atan=function(a){return I.prototype.M(Math.atan(a))};s("lanyard.geom.Angle.prototype.atan",I.prototype.atan,void 0);I.prototype.eg=function(a,b){return I.prototype.j(0.5*(a.e+b.e))};s("lanyard.geom.Angle.prototype.midAngle",I.prototype.eg,void 0);I.prototype.lc=function(a,b,c){return c?I.prototype.j((a.e+b.e+c.e)/3):I.prototype.j(0.5*(a.e+b.e))};s("lanyard.geom.Angle.prototype.average",I.prototype.lc,void 0);
I.prototype.ea=function(a){if(this.e<a.e)return-1;if(this.e>a.e)return 1;return 0};s("lanyard.geom.Angle.prototype.compareTo",I.prototype.ea,void 0);function jc(a,b){var c=b%180;return c>90?180-c:c<-90?-180-c:c}function kc(a,b){var c=b%360;return c>180?c-360:c<-180?360+c:c}I.prototype.toString=function(){return"This Angle equals "+this.e+" ("+this.G+" radians)."};s("lanyard.geom.Angle.prototype.toString",I.prototype.toString,void 0);function J(a,b,c,d){this.b=a;this.c=b;this.d=c;this.z=d?d:1}s("lanyard.geom.Point",J,void 0);J.prototype.ZERO=new J(0,0,0,1);s("lanyard.geom.Point.prototype.ZERO",J.prototype.ZERO,void 0);J.prototype.Je=new J(1,0,0,1);s("lanyard.geom.Point.prototype.UNIT_X",J.prototype.Je,void 0);J.prototype.Ke=new J(0,1,0,1);s("lanyard.geom.Point.prototype.UNIT_Y",J.prototype.Ke,void 0);J.prototype.Le=new J(0,0,1,1);s("lanyard.geom.Point.prototype.UNIT_Z",J.prototype.Le,void 0);J.prototype.Rf=o("z");
s("lanyard.geom.Point.prototype.getW",J.prototype.Rf,void 0);J.prototype.zc=o("b");s("lanyard.geom.Point.prototype.getX",J.prototype.zc,void 0);J.prototype.Ac=o("c");s("lanyard.geom.Point.prototype.getY",J.prototype.Ac,void 0);J.prototype.Sf=o("d");s("lanyard.geom.Point.prototype.getZ",J.prototype.Sf,void 0);J.prototype.translate=function(a){return new J(a.q*this.b+a.g*this.c+a.k*this.d+a.o,a.r*this.b+a.h*this.c+a.l*this.d+a.p,a.s*this.b+a.i*this.c+a.m*this.d+a.t,1)};
s("lanyard.geom.Point.prototype.translate",J.prototype.translate,void 0);J.prototype.add=function(a){return new J(this.b+a.b,this.c+a.c,this.d+a.d,1)};s("lanyard.geom.Point.prototype.add",J.prototype.add,void 0);J.prototype.K=function(a){return new J(this.b-a.b,this.c-a.c,this.d-a.d,1)};s("lanyard.geom.Point.prototype.subtract",J.prototype.K,void 0);J.prototype.multiply=function(a){return new J(this.b*a,this.c*a,this.d*a,1)};s("lanyard.geom.Point.prototype.multiply",J.prototype.multiply,void 0);
J.prototype.scale=function(a,b,c){return this.z?new J(this.b*a,this.c*b,this.d*c,this.z):new J(this.b*a,this.c*b,this.d*c,1)};s("lanyard.geom.Point.prototype.scale",J.prototype.scale,void 0);J.prototype.length=function(){return Math.sqrt(this.oa())};s("lanyard.geom.Point.prototype.length",J.prototype.length,void 0);J.prototype.normalize=function(){var a=1/this.length();return this.scale(a,a,a)};s("lanyard.geom.Point.prototype.normalize",J.prototype.normalize,void 0);
J.prototype.H=function(a){return this.b*a.b+this.c*a.c+this.d*a.d};s("lanyard.geom.Point.prototype.dot",J.prototype.H,void 0);J.prototype.oa=function(){return this.b*this.b+this.c*this.c+this.d*this.d};s("lanyard.geom.Point.prototype.selfDot",J.prototype.oa,void 0);J.prototype.nf=function(a){return this.b*a.b+this.c*a.c+this.d*a.d+this.z*this.z};s("lanyard.geom.Point.prototype.dot4",J.prototype.nf,void 0);
J.prototype.da=function(a){var b=this.b-a.b,c=this.c-a.c;a=this.d-a.d;return Math.sqrt(b*b+c*c+a*a)};s("lanyard.geom.Point.prototype.distanceTo",J.prototype.da,void 0);J.prototype.kf=function(a){var b=this.b-a.b,c=this.c-a.c;a=this.d-a.d;return b*b+c*c+a*a};s("lanyard.geom.Point.prototype.distanceToSquared",J.prototype.kf,void 0);J.prototype.fg=function(a,b){return new J(0.5*(a.b+b.b),0.5*(a.c+b.c),0.5*(a.d+b.d),1)};s("lanyard.geom.Point.prototype.midPoint",J.prototype.fg,void 0);
J.prototype.Ob=function(a,b,c){return new J(a*b.b+c.b,a*b.c+c.c,a*b.d+c.d,1)};s("lanyard.geom.Point.prototype.fromOriginAndDirection",J.prototype.Ob,void 0);J.prototype.cf=function(a){if(a.length===0)return[J.prototype.ZERO,J.prototype.ZERO];for(var b=a[0].b,c=a[0].c,d=a[0].d,e=b,f=c,g=d,h=0;h<a.length;h+=1){var k=a[h].b;if(k>e)e=k;else if(k<b)b=k;k=a[h].c;if(k>f)f=k;else if(k<c)c=k;k=a[h].d;if(k>g)g=k;else if(k<d)d=k}return[new J(b,c,d,1),new J(e,f,g,1)]};
s("lanyard.geom.Point.prototype.composeExtrema",J.prototype.cf,void 0);J.prototype.ef=function(a){return new J(this.c*a.d-this.d*a.c,this.d*a.b-this.b*a.d,this.b*a.c-this.c*a.b,1)};s("lanyard.geom.Point.prototype.cross",J.prototype.ef,void 0);J.prototype.toString=function(){return"A point with values of x="+this.b+"; y="+this.c+"; z="+this.d+"; w="+this.z+"."};s("lanyard.geom.Point.prototype.toString",J.prototype.toString,void 0);function lc(a,b,c,d,e,f){this.Ea=a;this.gb=b;this.Ma=c;this.Na=d;this.Ka=e;this.Oa=f}s("lanyard.geom.Frustum",lc,void 0);function mc(a){return a.Ea}lc.prototype.zb=function(a){var b=a.xc();a=-a.Ha();if(this.gb.H(b)<=a)return m;if(this.Ma.H(b)<=a)return m;if(this.Na.H(b)<=a)return m;if(this.Oa.H(b)<=a)return m;if(this.Ka.H(b)<=a)return m;if(this.Ea.H(b)<=a)return m;return j};
lc.prototype.contains=function(a){if(this.gb.H(a)<0)return m;if(this.Ma.H(a)<0)return m;if(this.Na.H(a)<0)return m;if(this.Oa.H(a)<0)return m;if(this.Ka.H(a)<0)return m;if(this.Ea.H(a)<0)return m;return j};lc.prototype.toString=function(){return"near: "+this.Ea.toString()+"... far: "+this.gb.toString()+"... left: "+this.Ma.toString()+"... right: "+this.Na.toString()+"... bottom: "+this.Ka.toString()+"... top: "+this.Oa.toString()};function L(a,b){this.kd=a;this.Ue=b}s("lanyard.geom.Intersection",L,void 0);L.prototype.toString=function(){var a=this.Ue?" is a tangent.":" not a tangent";return"Intersection Point: "+this.kd.toString()+a};function nc(a,b){this.qa=a;this.ia=b}s("lanyard.geom.Line",nc,void 0);function M(a,b){return J.prototype.Ob(b,a.ia,a.qa)}nc.prototype.oa=function(){return this.qa.H(this.ia)};nc.prototype.da=function(a){a=this.qa.K(a);var b=this.ia.multiply(a.H(this.ia)/this.ia.oa()).oa();return Math.sqrt(a.oa()-b)};nc.prototype.toString=function(){return"Origin: "+this.qa.toString()+", Direction: "+this.ia.toString()};function N(a,b,c,d){this.O=new J(a,b,c,d)}function oc(a,b){if(b.oa()===0)i("geom.Plane.VectorIsZero");return new N(b.b,b.c,b.d,b.z)}function pc(a){return a.O.z}N.prototype.H=function(a){return this.O.b*a.b+this.O.c*a.c+this.O.d*a.d+this.O.z*a.z};N.prototype.toString=function(){return this.O.toString()};function O(a,b,c){this.B=a;this.C=b;this.hd=c}p=O.prototype;p.ZERO=new O(I.prototype.ZERO,I.prototype.ZERO,0);p.M=function(a,b,c){return new O(I.prototype.M(a),I.prototype.M(b),c)};p.j=function(a,b,c){return new O(I.prototype.j(a),I.prototype.j(b),c)};p.tf=function(a,b){return new O(a.B,a.C,b)};p.Y=o("hd");p.add=function(a){var b=I.prototype.j(jc(I.prototype,this.B.add(a.B).e)),c=I.prototype.j(kc(I.prototype,this.C.add(a.C).e));return new O(b,c,this.Y()+a.Y())};
p.K=function(a){var b=I.prototype.j(jc(I.prototype,this.B.K(a.B).e)),c=I.prototype.j(kc(I.prototype,this.C.K(a.C).e));return new O(b,c,this.Y()-a.Y())};p.toString=function(){return"A position with a longitude of "+this.C+", a latitude of "+this.B+" and an elevation of "+this.hd};function qc(a,b,c,d){this.a=E("lanyard.globes.EllipsoidalGlobe");this.P=a;this.Db=b;this.Ta=c;this.mc=J.prototype.ZERO;this.wa=d}s("lanyard.globes.EllipsoidalGlobe",qc,void 0);p=qc.prototype;p.Ha=o("P");p.xc=o("mc");p.xa=function(){return this};p.Ec=function(a){return a.zb(this)};
p.Dc=function(a){var b=this.P/this.Db,c=b*b,d=a.ia.b,e=a.ia.c,f=a.ia.d,g=a.qa.b,h=a.qa.c,k=a.qa.d;b=d*d+c*e*e+1*f*f;d=2*(g*d+c*h*e+1*k*f);c=this.pb(b,d,g*g+c*h*h+1*k*k-this.P*this.P);if(c<0)return l;g=Math.sqrt(c);return c===0?[new L(M(a,(-d-g)/(2*b)),j)]:[new L(M(a,(-d-g)/(2*b)),m),new L(M(a,(-d+g)/(2*b)),m)]};p.pb=function(a,b,c){return b*b-4*a*c};p.Y=function(a,b){return this.wa?this.wa.Y(a,b):0};function rc(a,b){return P(a,b.B,b.C,b.Y())}
function P(a,b,c,d){var e=b.cos();b=b.sin();b=a.P/Math.sqrt(1-a.Ta*b*b);return new J((b+d)*e*c.sin(),(b*(1-a.Ta)+d)*c.cos(),(b+d)*e*c.cos(),1)}
function sc(a,b){var c=1/(a.P*a.P),d=b.d,e=b.b,f=b.c,g=a.Ta,h=g*g,k=d*d+e*e,q=Math.sqrt(k),u=k*c;c=f*f*(1-g)*c;k=1/6*(u+c-h);u=h*u*c/(4*k*k*k);u=Math.pow(1+u+Math.sqrt(u*(2+u)),1/3);k=k*(1+u+1/u);h=Math.sqrt(k*k+h*c);c=g*(k+h-c)/(2*h);h=Math.sqrt(k+h+c*c)-c;c=h*q/(h+g);k=Math.sqrt(c*c+f*f);return O.prototype.M(2*Math.atan2(f,c+k),2*Math.atan2(e,d+q),(h+g-1)*k/h)}p.Wc=function(a){return tc(a.Z()).Wc(a)};function uc(){this.Db=this.P=6378137;this.Ta=0;this.mc=J.prototype.ZERO;this.wa=l;qc.call(this,this.P,this.Db,this.Ta,this.wa);this.a=E("lanyard.globes.Earth")}s("lanyard.globes.Earth",uc,void 0);x(uc,qc);uc.prototype.Ha=o("P");function vc(){this.X=[]}vc.prototype.add=function(a){this.X.push(a)};vc.prototype.length=function(){return this.X?this.X.length:0};vc.prototype.clear=function(){this.X=[]};vc.prototype.yc=function(a,b,c){var d;for(d=0;d<this.X.length;d+=1)if(this.X[d].ga().contains(a,b)){var e=this.X[d].yc(a,b,c);if(e)return e}return l};function Q(a){this.v=this.m=this.h=this.q=1;this.s=this.r=0;this.w=1;this.i=this.g=0;this.n=1;this.l=this.k=0;this.u=1;this.t=this.p=this.o=0;this.ja=j;if(a){this.q=a[0];this.g=a[1];this.k=a[2];this.o=a[3];this.r=a[4];this.h=a[5];this.l=a[6];this.p=a[7];this.s=a[8];this.i=a[9];this.m=a[10];this.t=a[11];this.w=a[12];this.n=a[13];this.u=a[14];this.v=a[15];this.ja=m}}s("lanyard.geom.MatrixFour",Q,void 0);
Q.prototype.toString=function(){var a=this.Va(),b="MatrixFour : \n[ ",c;for(c=0;c<a.length;c++){b+=a[c]+", ";if(c==3||c==7||c==11||c==14)b+="\n"}b+=" ]";return b};s("lanyard.geom.MatrixFour.prototype.toString",Q.prototype.toString,void 0);Q.prototype.Va=function(){var a=[];a[0]=this.q;a[1]=this.g;a[2]=this.k;a[3]=this.o;a[4]=this.r;a[5]=this.h;a[6]=this.l;a[7]=this.p;a[8]=this.s;a[9]=this.i;a[10]=this.m;a[11]=this.t;a[12]=this.w;a[13]=this.n;a[14]=this.u;a[15]=this.v;return a};
s("lanyard.geom.MatrixFour.prototype.getEntries",Q.prototype.Va,void 0);Q.prototype.Ig=function(){this.q=1;this.g=this.w=this.s=this.r=0;this.h=1;this.l=this.k=this.n=this.i=0;this.m=1;this.t=this.p=this.o=this.u=0;this.v=1;this.ja=j};s("lanyard.geom.MatrixFour.prototype.setToIdentity",Q.prototype.Ig,void 0);Q.prototype.Yf=o("ja");s("lanyard.geom.MatrixFour.prototype.isOrthonormal",Q.prototype.Yf,void 0);Q.prototype.Rc=n("ja");s("lanyard.geom.MatrixFour.prototype.setOrthonormal",Q.prototype.Rc,void 0);
function wc(a,b){var c=b.cos(),d=b.sin(),e=a.r*-d+a.s*c,f=a.h*c+a.i*d,g=a.h*-d+a.i*c,h=a.l*c+a.m*d,k=a.l*-d+a.m*c,q=a.p*c+a.t*d,u=a.p*-d+a.t*c;a.r=a.r*c+a.s*d;a.s=e;a.h=f;a.i=g;a.l=h;a.m=k;a.p=q;a.t=u;return a}Q.prototype.translate=function(a,b,c){this.w=this.q*a+this.r*b+this.s*c+this.w;this.n=this.g*a+this.h*b+this.i*c+this.n;this.u=this.k*a+this.l*b+this.m*c+this.u;this.v=this.o*a+this.p*b+this.t*c+this.v;return this};Q.prototype.se=function(a){return this.translate(a.b,a.c,a.d)};
s("lanyard.geom.MatrixFour.prototype.translatePoint",Q.prototype.se,void 0);Q.prototype.add=function(a){this.q+=a.q;this.r+=a.r;this.s+=a.s;this.w+=a.w;this.g+=a.g;this.h+=a.h;this.i+=a.i;this.n+=a.n;this.k+=a.k;this.l+=a.l;this.m+=a.m;this.u+=a.u;this.o+=a.o;this.p+=a.p;this.t+=a.t;this.v+=a.v;this.ja=this.ja||a.ja;return this};
Q.prototype.multiply=function(a){var b=this.q*a.r+this.r*a.h+this.s*a.l+this.w*a.p,c=this.q*a.s+this.r*a.i+this.s*a.m+this.w*a.t,d=this.q*a.w+this.r*a.n+this.s*a.u+this.w*a.v,e=this.g*a.q+this.h*a.g+this.i*a.k+this.n*a.o,f=this.g*a.r+this.h*a.h+this.i*a.l+this.n*a.p,g=this.g*a.s+this.h*a.i+this.i*a.m+this.n*a.t,h=this.g*a.w+this.h*a.n+this.i*a.u+this.n*a.v,k=this.k*a.q+this.l*a.g+this.m*a.k+this.u*a.o,q=this.k*a.r+this.l*a.h+this.m*a.l+this.u*a.p,u=this.k*a.s+this.l*a.i+this.m*a.m+this.u*a.t,v=this.k*
a.w+this.l*a.n+this.m*a.u+this.u*a.v,w=this.o*a.q+this.p*a.g+this.t*a.k+this.v*a.o,z=this.o*a.r+this.p*a.h+this.t*a.l+this.v*a.p,ra=this.o*a.s+this.p*a.i+this.t*a.m+this.v*a.t,U=this.o*a.w+this.p*a.n+this.t*a.u+this.v*a.v;this.q=this.q*a.q+this.r*a.g+this.s*a.k+this.w*a.o;this.r=b;this.s=c;this.w=d;this.g=e;this.h=f;this.i=g;this.n=h;this.k=k;this.l=q;this.m=u;this.u=v;this.o=w;this.p=z;this.t=ra;this.v=U;this.Xf=this.Xf||a.ja;return this};
function xc(a){var b;if(a.ja){b=new Q(l);b.q=a.q;b.r=a.g;b.s=a.k;b.g=a.r;b.h=a.h;b.i=a.l;b.k=a.s;b.l=a.i;b.m=a.m;b.w=-(b.q*a.w+b.r*a.n+b.s*a.u);b.n=-(b.g*a.w+b.h*a.n+b.i*a.u);b.u=-(b.k*a.w+b.l*a.n+b.m*a.u);b=b}else{b=a.q*(a.h*a.m*a.v+a.i*a.u*a.p+a.n*a.l*a.t-a.n*a.m*a.p-a.h*a.u*a.t-a.i*a.l*a.v)-a.r*(a.g*a.m*a.v+a.i*a.u*a.o+a.n*a.k*a.t-a.n*a.m*a.o-a.g*a.u*a.t-a.i*a.k*a.v)+a.s*(a.g*a.l*a.v+a.h*a.u*a.o+a.n*a.k*a.p-a.n*a.l*a.o-a.g*a.u*a.p-a.h*a.k*a.v)-a.w*(a.g*a.l*a.t+a.h*a.m*a.o+a.i*a.k*a.p-a.i*a.l*a.o-
a.g*a.m*a.p-a.h*a.k*a.t);if(b===0)b=l;else{b=1/b;var c=new Q(l),d=a.m*a.v-a.u*a.t,e=a.u*a.p-a.l*a.v,f=a.l*a.t-a.m*a.p,g=a.i*a.v-a.n*a.t,h=a.n*a.p-a.h*a.v,k=a.i*a.u-a.n*a.m,q=a.h*a.m-a.i*a.l,u=a.u*a.o-a.k*a.v,v=a.k*a.t-a.m*a.o,w=a.n*a.o-a.g*a.v,z=a.n*a.k-a.g*a.u,ra=a.l*a.v-a.u*a.p,U=a.k*a.p-a.l*a.o,K=a.g*a.p-a.h*a.o,Ka=a.g*a.l-a.h*a.k,sa=a.m*a.o-a.k*a.t;c.q=b*a.h*d+a.i*e+a.n*f;c.r=-b*a.r*d+a.s*e+a.w*f;c.s=b*a.r*g+a.s*(a.n*a.p-a.h*a.v)+a.w*h;c.w=-b*a.r*k+a.s*(a.n*a.l-a.h*a.u)+a.w*q;c.g=-b*a.g*d+a.i*
u+a.n*v;c.h=b*a.q*d+a.s*u+a.w*v;c.i=-b*a.q*g+a.s*w+a.w*(a.g*a.t-a.i*a.o);c.n=-b*a.q*k+a.s*z+a.w*(a.g*a.m-a.i*a.k);c.k=b*a.g*ra+a.h*u+a.n*U;c.l=-b*a.q*ra+a.r*u+a.w*U;c.m=-b*a.q*(a.h*a.v-a.n*a.p)+a.r*w+a.w*K;c.u=b*a.q*(a.h*a.u-a.n*a.l)+a.r*z+a.w*Ka;c.o=-b*a.g*f+a.h*sa+a.i*U;c.p=-b*a.q*f+a.r*sa+a.s*U;c.t=b*a.q*h+a.r*(a.i*a.o-a.g*a.t)+a.s*K;c.v=-b*a.q*q+a.r*(a.i*a.k-a.g*a.m)+a.s*Ka;b=c}}b=b;b.Rc(a.ja);return b}
Q.prototype.transform=function(a){return new J(this.q*a.b+this.r*a.c+this.s*a.d+this.w*a.z,this.g*a.b+this.h*a.c+this.i*a.d+this.n*a.z,this.k*a.b+this.l*a.c+this.m*a.d+this.u*a.z,this.o*a.b+this.p*a.c+this.t*a.d+this.v*a.z)};Q.prototype.xf=o("q");s("lanyard.geom.MatrixFour.prototype.get11",Q.prototype.xf,void 0);Q.prototype.sg=n("q");s("lanyard.geom.MatrixFour.prototype.set11",Q.prototype.sg,void 0);Q.prototype.Cf=o("h");s("lanyard.geom.MatrixFour.prototype.get22",Q.prototype.Cf,void 0);
Q.prototype.xg=n("h");s("lanyard.geom.MatrixFour.prototype.set22",Q.prototype.xg,void 0);Q.prototype.Hf=o("m");s("lanyard.geom.MatrixFour.prototype.get33",Q.prototype.Hf,void 0);Q.prototype.Cg=n("m");s("lanyard.geom.MatrixFour.prototype.set33",Q.prototype.Cg,void 0);Q.prototype.Mf=o("v");s("lanyard.geom.MatrixFour.prototype.get44",Q.prototype.Mf,void 0);Q.prototype.Hg=n("v");s("lanyard.geom.MatrixFour.prototype.set44",Q.prototype.Hg,void 0);Q.prototype.yf=o("r");
s("lanyard.geom.MatrixFour.prototype.get12",Q.prototype.yf,void 0);Q.prototype.tg=n("r");s("lanyard.geom.MatrixFour.prototype.set12",Q.prototype.tg,void 0);Q.prototype.zf=o("s");s("lanyard.geom.MatrixFour.prototype.get13",Q.prototype.zf,void 0);Q.prototype.ug=n("s");s("lanyard.geom.MatrixFour.prototype.set13",Q.prototype.ug,void 0);Q.prototype.Af=o("w");s("lanyard.geom.MatrixFour.prototype.get14",Q.prototype.Af,void 0);Q.prototype.vg=n("w");
s("lanyard.geom.MatrixFour.prototype.set14",Q.prototype.vg,void 0);Q.prototype.Bf=o("g");s("lanyard.geom.MatrixFour.prototype.get21",Q.prototype.Bf,void 0);Q.prototype.wg=n("g");s("lanyard.geom.MatrixFour.prototype.set21",Q.prototype.wg,void 0);Q.prototype.Df=o("i");s("lanyard.geom.MatrixFour.prototype.get23",Q.prototype.Df,void 0);Q.prototype.yg=n("i");s("lanyard.geom.MatrixFour.prototype.set23",Q.prototype.yg,void 0);Q.prototype.Ef=o("n");
s("lanyard.geom.MatrixFour.prototype.get24",Q.prototype.Ef,void 0);Q.prototype.zg=n("n");s("lanyard.geom.MatrixFour.prototype.set24",Q.prototype.zg,void 0);Q.prototype.Ff=o("k");s("lanyard.geom.MatrixFour.prototype.get31",Q.prototype.Ff,void 0);Q.prototype.Ag=n("k");s("lanyard.geom.MatrixFour.prototype.set31",Q.prototype.Ag,void 0);Q.prototype.Gf=o("l");s("lanyard.geom.MatrixFour.prototype.get32",Q.prototype.Gf,void 0);Q.prototype.Bg=n("l");
s("lanyard.geom.MatrixFour.prototype.set32",Q.prototype.Bg,void 0);Q.prototype.If=o("u");s("lanyard.geom.MatrixFour.prototype.get34",Q.prototype.If,void 0);Q.prototype.Dg=n("u");s("lanyard.geom.MatrixFour.prototype.set34",Q.prototype.Dg,void 0);Q.prototype.Jf=o("o");s("lanyard.geom.MatrixFour.prototype.get41",Q.prototype.Jf,void 0);Q.prototype.Eg=n("o");s("lanyard.geom.MatrixFour.prototype.set41",Q.prototype.Eg,void 0);Q.prototype.Kf=o("p");
s("lanyard.geom.MatrixFour.prototype.get42",Q.prototype.Kf,void 0);Q.prototype.Fg=n("p");s("lanyard.geom.MatrixFour.prototype.set42",Q.prototype.Fg,void 0);Q.prototype.Lf=o("t");s("lanyard.geom.MatrixFour.prototype.get43",Q.prototype.Lf,void 0);Q.prototype.Gg=n("t");s("lanyard.geom.MatrixFour.prototype.set43",Q.prototype.Gg,void 0);function yc(a,b,c,d){this.c=this.b=b;this.md=c;this.Te=d}yc.prototype.zc=o("b");yc.prototype.Ac=o("c");yc.prototype.Xa=o("Te");function zc(a,b,c){this.ma=a;this.Ja=b;this.ff=this.ma.da(this.Ja);this.Qa=c;this.nd=this.Ja.K(this.ma).normalize()}s("lanyard.geom.Cylinder",zc,void 0);p=zc.prototype;p.toString=function(){return this.Qa+", "+this.ma.toString()+", "+this.Ja.toString()+", "+this.nd.toString()};
p.Dc=function(a){var b=a.ia,c=a.qa,d=b.b*b.b+b.c*b.c;b=2*(c.b*b.b+c.c*b.c);c=zc.prototype.pb(d,b,c.b*c.b+c.c*c.c-this.Qa*this.Qa);if(c<0)return l;var e=Math.sqrt(c);if(c===0)return[new L(M(a,(-b-e)/(2*d)),j)];else{c=M(a,(-b-e)/(2*d));a=M(a,(-b+e)/(2*d));var f=e=b=d=m;if(c.d>=0&&c.d<=this.Xa()){d=j;e=c.d===0}if(a.d>=0&&a.d<=this.Xa()){b=j;f=a.d===0}var g=l;if(d&&b)g=[new L(c,e),new L(a,f)];else if(d)g=[new L(c,e)];else if(b)g=[new L(a,f)];return g}};p.pb=function(a,b,c){return b*b-4*a*c};
function Ac(a,b,c,d){var e=b.H(a.ma)<=-c,f;f=d<1?a.ma.add(a.Ja.K(a.ma).multiply(d)):a.Ja;var g=b.H(f)<=-c;if(e&&g)return-1;if(e===g)return d;return(c+b.H(a.ma))/(new J(b.O.b,b.O.c,b.O.d,1)).H(a.ma.K(f))}function Bc(a,b){var c=(new J(b.O.b,b.O.c,b.O.d,1)).H(a.nd);c=1-c*c;return c<=0?0:a.Qa*Math.sqrt(c)}
p.Ec=function(a){var b,c=Bc(this,a.Ea);b=Ac(this,a.Ea,c,1);if(b<0)return m;b=Ac(this,a.gb,c,b);if(b<0)return m;c=Bc(this,a.Ma);b=Ac(this,a.Ma,c,b);if(b<0)return m;c=Bc(this,a.Na);b=Ac(this,a.Na,c,b);if(b<0)return m;c=Bc(this,a.Oa);b=Ac(this,a.Oa,c,b);if(b<0)return m;c=Bc(this,a.Ka);b=Ac(this,a.Ka,c,b);return b>=0};p.xc=function(){var a=this.ma,b=this.Ja;return new J(0.5*(a.b+b.b),0.5*(a.c+b.c),0.5*(a.d+b.d),1)};p.Ha=function(){var a=0.5*this.ma.da(this.Ja);return Math.sqrt(a*a+this.Qa*this.Qa)};
p.Xa=o("ff");p.ta=function(){};function R(a,b,c,d){this.b=a;this.c=b;this.d=c;this.z=d;this.jd=1.0E-4}p=R.prototype;p.toString=function(){return"("+this.b+", "+this.c+", "+this.d+", "+this.z+")"};function Cc(a,b,c,d){a=Math.cos(b*0.5);var e=Math.cos(c*0.5),f=Math.cos(d*0.5);b=Math.sin(b*0.5);c=Math.sin(c*0.5);d=Math.sin(d*0.5);return new R(b*e*f-a*c*d,a*c*f+b*e*d,a*e*d-b*c*f,a*e*f+b*c*d)}p.add=function(a,b){return new R(a.b+b.b,a.c+b.c,a.d+b.d,a.z+b.z)};p.K=function(a,b){return new R(a.b-b.b,a.c-b.c,a.d-b.d,a.z-b.z)};
p.multiply=function(a,b){return new R(a.b*b.z+a.c*b.d-a.d*b.c,a.c*b.z+a.d*b.b-a.b*b.d,a.d*b.z+a.b*b.c-a.c*b.b,-a.b*b.b-a.c*b.c-a.d*b.d)};p.abs=function(a){return Math.sqrt(a.b*a.b+a.c*a.c+a.d*a.d+a.z*a.z)};p.H=function(a,b){return a.b*b.b+a.c*b.c+a.d*b.d+a.z*b.z};p.normalize=function(){var a=this.length();return new R(this.b/a,this.c/a,this.d/a,this.z/a)};p.length=function(){return Math.sqrt(this.b*this.b+this.c*this.c+this.d*this.d+this.z*this.z)};
p.exp=function(a){var b,c=Math.sqrt(a.b*a.b+a.c*a.c+a.d*a.d);b=Math.abs(c)<this.jd?1:Math.sin(c)/c;return new R(a.b*b,a.c*b,a.d*b,Math.cos(c))};function S(a,b){this.a=E("lanyard.geom.LatLon");a||D(this.a,"Attempted to create a LatLon with invalid latitude.");b||D(this.a,"Attempted to create a LatLon with invalid longitude.");this.B=a;this.C=b}s("lanyard.geom.LatLon",S,void 0);S.prototype.M=function(a,b){return new S(I.prototype.M(a),I.prototype.M(b))};S.prototype.j=function(a,b){return new S(I.prototype.j(a),I.prototype.j(b))};
S.prototype.Ed=function(a,b,c){if(a<0)return b;else if(a>1)return c;var d;b=Cc(R.prototype,b.C.G,b.B.G,0);var e=Cc(R.prototype,c.C.G,c.B.G,0),f=b.b*e.b+b.c*e.c+b.d*e.d+b.z*e.z,g;if(f<0){f=-f;c=-e.b;d=-e.c;g=-e.d;e=-e.z}else{c=e.b;d=e.c;g=e.d;e=e.z}if(1-f>R.prototype.jd){var h=Math.acos(f),k=Math.sin(h);f=Math.sin((1-a)*h)/k;a=Math.sin(a*h)/k}else{f=1-a;a=a}d=new R(f*b.b+a*c,f*b.c+a*d,f*b.d+a*g,f*b.z+a*e);a=d.z;b=d.b;c=d.c;d=d.d;a=new J(Math.atan2(2*(c*d+a*b),a*a-b*b-c*c+d*d),Math.asin(-2*(b*d-a*c)),
Math.atan2(2*(b*c+a*d),a*a+b*b-c*c-d*d),1);if(isNaN(a.b)||isNaN(a.c))return l;return S.prototype.M(a.c,a.b)};S.prototype.toString=function(){return"("+this.B.toString()+", "+this.C.toString()+")"};function Dc(a,b){this.fd=a;this.Kb=b}s("lanyard.geom.Sphere",Dc,void 0);Dc.prototype.Ie=new Dc(J.prototype.ZERO,1);s("lanyard.geom.Sphere.prototype.UNIT_SPHERE",Dc.prototype.Ie,void 0);p=Dc.prototype;p.Ha=o("Kb");p.xc=o("fd");p.pb=function(a,b,c){return b*b-4*a*c};p.Dc=function(a){var b=a.ia.oa(),c=2*a.oa(),d=Dc.prototype.pb(b,c,a.qa.oa()-this.Kb*this.Kb);if(d<0)return l;var e=Math.sqrt(d);return d===0?[new L(M(a,(-c-e)/(2*b)),j)]:[new L(M(a,(-c-e)/(2*b)),m),new L(M(a,(-c+e)/(2*b)),m)]};p.Ec=function(a){return a.zb(this)};
p.ta=function(){};p.toString=function(){return"Sphere: center = "+this.fd.toString()+" radius = "+this.Kb};function T(a,b,c,d){this.D=a;this.I=b;this.F=c;this.J=d;this.gc=I.prototype.j(this.I.e-this.D.e);this.gd=I.prototype.j(this.J.e-this.F.e)}s("lanyard.geom.Sector",T,void 0);p=T.prototype;p.Ge=new T(I.prototype.cc,I.prototype.ec,I.prototype.bc,I.prototype.dc);p.j=function(a,b,c,d){return new T(I.prototype.j(a),I.prototype.j(b),I.prototype.j(c),I.prototype.j(d))};p.M=function(a,b,c,d){return new T(I.prototype.M(a),I.prototype.M(b),I.prototype.M(c),I.prototype.M(d))};
function Ec(a){var b=I.prototype.j(0.5*(a.I.e+a.D.e));a=I.prototype.j(0.5*(a.J.e+a.F.e));return new S(b,a)}function Fc(a,b,c,d){a=Ec(d);var e=(b.wa?b.wa.oh():0)*c;c=P(b,a.B,a.C,e);var f=P(b,d.D,d.F,0);a=c.normalize();f=a.H(f);a=a.scale(f,f,f);f=P(b,d.I,d.F,e);var g=P(b,d.D,d.J,e),h=P(b,d.D,d.F,e);e=P(b,d.I,d.J,e);b=h.da(g);d=g.da(e);e=e.da(f);f=f.da(h);h=0.5*(b+d+e+f);return new zc(a,c,Math.sqrt((b*d+e*f)*(b*f+d*e)*(b*e+d*f))/(4*Math.sqrt((h-b)*(h-d)*(h-e)*(h-f))))}
p.contains=function(a,b){return a.e>=this.D.e&&a.e<=this.I.e&&b.e>=this.F.e&&b.e<=this.J.e};p.zb=function(a){if(!a)return m;if(a.J.e<this.F.e)return m;if(a.F.e>this.J.e)return m;if(a.I.e<this.D.e)return m;if(a.D.e>this.I.e)return m;return j};p.toString=function(){return"A Sector with angles: ("+this.D.toString()+", "+this.F.toString()+"), ("+this.I.toString()+", "+this.J.toString()+")"};
p.ea=function(a){if(this.D.ea(a.D)<0)return-1;if(this.D.ea(a.D)>0)return 1;if(this.F.ea(a.F)<0)return-1;if(this.F.ea(a.F)>0)return 1;if(this.I.ea(a.I)<0)return-1;if(this.I.ea(a.I)>0)return 1;if(this.J.ea(a.J)<0)return-1;if(this.J.ea(a.J)>0)return 1;return 0};function Gc(a,b,c,d,e,f){this.ca=a;this.$=b;this.Pg=c;this.Nc=d;this.Cd=Hc(f,this.ca);this.pg=e}s("lanyard.globes.RenderInfo",Gc,void 0);function V(a,b,c,d){this.a=E("lanyard.globes.RectTile");this.Rb=this.Yb=this.Wb=l;this.ih=this.jh=0;this.hb=a;this.kb=b;this.va=c;this.aa=d;this.Pe=Fc(T.prototype,a,1,this.aa);a=d.gc.G*a.Ha()/c;this.We=Math.log(a)/Math.LN10;this.L=l;this.lb={};this.ib={}}p=V.prototype;p.ga=o("aa");p.xa=o("Pe");
p.split=function(a,b){var c=this.aa,d=I.prototype.lc(c.D,c.I,l),e=I.prototype.lc(c.F,c.J,l),f=[];f[0]=new T(c.D,d,c.F,e);f[1]=new T(c.D,d,e,c.J);f[2]=new T(d,c.I,c.F,e);f[3]=new T(d,c.I,e,c.J);c=[];c[0]=new V(this.hb,b.kb+1,this.va,f[0]);c[1]=new V(this.hb,b.kb+1,this.va,f[1]);c[2]=new V(this.hb,b.kb+1,this.va,f[2]);c[3]=new V(this.hb,b.kb+1,this.va,f[3]);return c};
p.ta=function(a){var b=Hc(this,this.L.ca),c=a.f;Ic(a.Q(),a,this.L.Nc);if(this.Wb)c.bindBuffer(c.ARRAY_BUFFER,this.Wb);else{this.Wb=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,this.Wb);c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.L.$),c.STATIC_DRAW)}c.enableVertexAttribArray(a.T.getAttribLocation("aVertexPosition"));c.vertexAttribPointer(a.T.getAttribLocation("aVertexPosition"),3,c.FLOAT,m,0,0);if(this.Yb)c.bindBuffer(c.ARRAY_BUFFER,this.Yb);else{this.Yb=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,
this.Yb);c.bufferData(c.ARRAY_BUFFER,new Float32Array(this.L.Pg),c.STATIC_DRAW)}c.enableVertexAttribArray(a.T.getAttribLocation("aTextureCoord0"));c.vertexAttribPointer(a.T.getAttribLocation("aTextureCoord0"),2,c.FLOAT,m,0,0);if(this.Rb)c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.Rb);else{this.Rb=c.createBuffer();c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,this.Rb);c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array(b),c.STATIC_DRAW)}c.drawElements(c.TRIANGLE_STRIP,this.L.Cd.length,c.UNSIGNED_SHORT,0);Jc(a.Q(),
a);return this.L.Cd.length-2};p.yc=function(a,b,c){if(!this.aa.contains(a,b))return l;if(!this.L)return l;var d=this.aa.D.e,e=this.aa.F.e;b=(b.e-e)/(this.aa.J.e-e);a=(a.e-d)/(this.aa.I.e-d);d=a*this.va;e=b*this.va;var f=this.L.ca,g=e/f,h=this.L.ca,k=d/h;b=V.prototype.Ed(d,e,(b-g)/((e+1)/f-g),(a-k)/((d+1)/h-k),this.L);b=b.add(this.L.Nc);if(c!==0){b=b;a=this.hb;d=b;d=d.K(a.mc);a=(new J(d.b/(a.P*a.P),d.c/(a.Db*a.Db),d.d/(a.P*a.P),1)).normalize();b=b=J.prototype.Ob(c,a,b)}return b};
p.Ed=function(a,b,c,d,e){a++;b++;var f=e.ca+3,g=a*f+b;g*=3;a=new J(e.$[g],e.$[g+1],e.$[g+2],1);b=new J(e.$[g+3],e.$[g+4],e.$[g+5],1);g+=f*3;f=new J(this.L.$[g+3],this.L.$[g+4],this.L.$[g+5],1);e=new J(e.$[g],e.$[g+1],e.$[g+2],1);g=c+d;if(g===1)d=new J(e.b*d+b.b*c,e.c*d+b.c*c,e.d*d+b.d*c,1);else if(g>1){c=e.K(f).multiply(1-c);d=b.K(f).multiply(1-d);d=f.add(c).add(d)}else{c=b.K(a).multiply(c);d=e.K(a).multiply(d);d=a.add(c).add(d)}return d};
p.toString=function(){return"level "+this.kb+", density "+this.va+", sector "+this.aa};
function Kc(a,b){if(b<1)b=1;if(a&&a.lb&&a.lb.ca)return a.lb.ca;var c=[],d=1/b,e=2*(b+3),f;for(f=0;f<b;f+=1){var g=f*d;c[e++]=0;c[e++]=g;var h;for(h=0;h<b;h+=1){c[e++]=h*d;c[e++]=g}c[e++]=0.999999;c[e++]=g;c[e++]=0.999999;c[e++]=g}c[e++]=0;c[e++]=0.999999;for(f=0;f<b;f+=1){c[e++]=f*d;c[e++]=0.999999}c[e++]=0.999999;c[e++]=0.999999;c[e++]=0.999999;c[e++]=0.999999;d=e-2*(b+3);for(f=0;f<b+3;f+=1){c[e++]=c[d++];c[e++]=c[d++]}e=0;d=2*(b+3);for(f=0;f<b+3;f+=1){c[e++]=c[d++];c[e++]=c[d++]}if(a.lb)a.lb.ca=
c;return c}function Hc(a,b){if(b<1)b=1;if(a.ib&&a.ib.ca)return a.ib.ca;var c=b+2,d=[],e=0,f;for(f=0;f<c;f+=1){d.push(e);if(f>0){d.push(++e);d.push(e)}if(f%2===0){d.push(++e);var g;for(g=0;g<c;g+=1){e+=c;d.push(e);d.push(++e)}}else{d.push(--e);for(g=0;g<c;g++){e-=c;d.push(e);d.push(--e)}}}if(a.ib)a.ib.ca=d;return d};function Lc(a){this.a=E("lanyard.globes.EllipsoidRectangularTessellator");for(var b=[],c=I.prototype.cc,d=0;d<5;d+=1){var e=c.kc(36);if(e.e+1>90)e=I.prototype.ec;for(var f=I.prototype.bc,g=0;g<10;g+=1){var h=f.kc(36);if(h.e+1>180)h=I.prototype.dc;f=new V(a,0,Lc.prototype.we,new T(c,e,f,h));b.push(f);f=h}c=e}this.ne=b;this.cg=12;this.ob=new vc;this.rd=l;this.Mb=0;this.ua=l;this.ca=24}p=Lc.prototype;p.we=24;p.xe=1.3;p.ga=o("ua");
p.Wc=function(a){a||D(this.a,"Attempted to tessellate without a valid draw context.");this.ob.clear();this.Mb=0;this.ua=l;var b=a.Q();b.V||D(b.a,"Attempted to compute a model-view coordinate frustum without a valid state matrix.");if(!b.Pb&&b.V){var c=b.Wa();if(c){var d=b.V,e=new Q(l);e.q=d.q;e.r=d.g;e.s=d.k;e.w=d.o;e.g=d.r;e.h=d.h;e.i=d.l;e.n=d.p;e.k=d.s;e.l=d.i;e.m=d.m;e.u=d.t;e.o=d.w;e.p=d.n;e.t=d.u;e.v=d.v;e.Rc(d.ja);d=oc(N.prototype,e.transform(c.Ea.O));var f=oc(N.prototype,e.transform(c.gb.O)),
g=oc(N.prototype,e.transform(c.Ma.O)),h=oc(N.prototype,e.transform(c.Na.O)),k=oc(N.prototype,e.transform(c.Ka.O));c=oc(N.prototype,e.transform(c.Oa.O));b.Pb=new lc(d,f,g,h,k,c)}else D(b.a,"Frustum for conversion to model coordinates was invalid.")}this.rd=b.Pb;for(b=0;b<this.ne.length;b+=1)Mc(this,a,this.ne[b]);a.$c=this.ga();for(b=0;b<this.ob.length();b+=1){d=this.ob.X[b];if(!(d.L&&d.L.pg>=0)){e=c=d;d=d.va;f=[];var q=a.S(),u=e.aa.D.G;g=e.aa.I.G;h=(g-u)/d;k=e.aa.F.G;var v=e.aa.J.G,w=(v-k)/d;u=u;var z=
(q.wa?q.wa.ph():0)*a.ya(),ra=q.P,U=q.Ta,K=Ec(e.aa);q=rc(q,new O(K.B,K.C,0));K=void 0;for(K=0;K<=d+2;K+=1){var Ka=Math.cos(u),sa=Math.sin(u),Tb=ra/Math.sqrt(1-U*sa*sa),mb=k,ia;for(ia=0;ia<=d+2;ia+=1){var nb=0;if(K===0||K>=d+2||ia===0||ia>=d+2)nb-=z>=0?z:-z;f=f.concat([(Tb+nb)*Ka*Math.sin(mb)-q.b,(Tb*(1-U)+nb)*sa-q.c,(Tb+nb)*Ka*Math.cos(mb)-q.d]);if(ia>d)mb=v;else if(ia!==0)mb+=w}if(K>d)u=g;else if(K!==0)u+=h}e=new Gc(d,f,Kc(e,d),q,0,e);c.L=e}}return this.ob};
function Mc(a,b,c){if(c.xa().Ec(a.rd)){var d;if(d=a.Mb<a.cg){if(!c||!c.ga())a.a.error("Attempted to perform a split check on an invalid tile.");var e=c.ga(),f=b.S();d=[];var g=e.D,h=e.I,k=e.F;e=e.J;d[0]=P(f,g,k,f.Y(g,k));d[1]=P(f,g,e,f.Y(g,e));d[2]=P(f,h,e,f.Y(h,e));d[3]=P(f,h,k,f.Y(h,k));h=c.ga();f=b.S();g=0.5*(h.F.e+h.J.e);h=I.prototype.j(0.5*(h.D.e+h.I.e));g=I.prototype.j(g);k=P(f,h,g,f.Y(h,g));e=b.Q();h=Nc(e).da(d[0]);f=Nc(e).da(d[1]);g=Nc(e).da(d[2]);d=Nc(e).da(d[3]);k=Nc(e).da(k);h=h;if(f<h)h=
f;if(g<h)h=g;if(d<h)h=d;if(k<h)h=k;d=!(c.We<=Math.log(h)/Math.log(10)-Lc.prototype.xe)}if(d){++a.Mb;c=c.split(b,c);for(d=1;d<c.length;d+=1)Mc(a,b,c[d]);--a.Mb}else{b=c.ga();if(d=a.ua){f=b.D;g=b.I;h=b.F;k=b.J;if(d.D.e<b.D.e)f=d.D;if(d.I.e>b.I.e)g=d.I;if(d.F.e<b.F.e)h=d.F;if(d.J.e>b.J.e)k=d.J;b=new T(f,g,h,k)}else b=b;a.ua=b;a.ob.add(c)}}}p.toString=function(){var a=Kc(V.prototype,5),b=Hc(V.prototype,5),c="",d;for(d=0;d<b.length;d+=1){var e=b[d];c+=e+": "+a[2*e]+", "+a[2*e+1]}return c};function Oc(){this.ka=new uc;this.Xc=l;this.Gc=[];this.fe=this.ge=this.Uc=m;this.Gc=[]}Oc.prototype.S=o("ka");Oc.prototype.wb=o("Gc");function tc(a){if(!a.Xc&&a.ka)a.Xc=new Lc(a.ka);return a.Xc}Oc.prototype.xa=function(){var a=this.wb();if(a){var b;for(b=0;b<a.length;b+=1){var c=a[b];if(typeof c.xa==="function")if(c=c.xa())return c}}if(a=this.S())if(a=a.xa())return a;return l};function Pc(a,b){this.Re=a;this.Xe=b}s("lanyard.geom.ViewFrustum",Pc,void 0);Pc.prototype.sf=function(a,b,c,d,e){var f=e-d;a=1/a.Vc();b=c/b;c=Math.sqrt(a*a+1);var g=Math.sqrt(a*a+b*b);return new Pc(new lc(new N(0,0,-1,0-d),new N(0,0,1,e),new N(a/c,0,0-1/c,0),new N(0-a/c,0,0-1/c,0),new N(0,a/g,0-b/g,0),new N(0,0-a/g,0-b/g,0)),new Q([a,0,0,0,0,a/b,0,0,0,0,0-(e+d)/f,-1,0,0,0-2*e*d/f,0]))};Pc.prototype.Wa=o("Re");Pc.prototype.Ad=o("Xe");function Qc(){}
Qc.prototype.Zb=function(a,b,c,d,e,f,g){a=[a,b,c,1];b=[];for(c=0;c<4;c+=1)for(var h=0;h<4;h+=1)b[c*4+h]=d[c*4+0]*e[0+h]+d[c*4+1]*e[4+h]+d[c*4+2]*e[8+h]+d[c*4+3]*e[12+h];d=[];d[0]=b[5]*b[10]*b[15]-b[5]*b[11]*b[14]-b[9]*b[6]*b[15]+b[9]*b[7]*b[14]+b[13]*b[6]*b[11]-b[13]*b[7]*b[10];d[4]=-b[4]*b[10]*b[15]+b[4]*b[11]*b[14]+b[8]*b[6]*b[15]-b[8]*b[7]*b[14]-b[12]*b[6]*b[11]+b[12]*b[7]*b[10];d[8]=b[4]*b[9]*b[15]-b[4]*b[11]*b[13]-b[8]*b[5]*b[15]+b[8]*b[7]*b[13]+b[12]*b[5]*b[11]-b[12]*b[7]*b[9];d[12]=-b[4]*b[9]*
b[14]+b[4]*b[10]*b[13]+b[8]*b[5]*b[14]-b[8]*b[6]*b[13]-b[12]*b[5]*b[10]+b[12]*b[6]*b[9];d[1]=-b[1]*b[10]*b[15]+b[1]*b[11]*b[14]+b[9]*b[2]*b[15]-b[9]*b[3]*b[14]-b[13]*b[2]*b[11]+b[13]*b[3]*b[10];d[5]=b[0]*b[10]*b[15]-b[0]*b[11]*b[14]-b[8]*b[2]*b[15]+b[8]*b[3]*b[14]+b[12]*b[2]*b[11]-b[12]*b[3]*b[10];d[9]=-b[0]*b[9]*b[15]+b[0]*b[11]*b[13]+b[8]*b[1]*b[15]-b[8]*b[3]*b[13]-b[12]*b[1]*b[11]+b[12]*b[3]*b[9];d[13]=b[0]*b[9]*b[14]-b[0]*b[10]*b[13]-b[8]*b[1]*b[14]+b[8]*b[2]*b[13]+b[12]*b[1]*b[10]-b[12]*b[2]*
b[9];d[2]=b[1]*b[6]*b[15]-b[1]*b[7]*b[14]-b[5]*b[2]*b[15]+b[5]*b[3]*b[14]+b[13]*b[2]*b[7]-b[13]*b[3]*b[6];d[6]=-b[0]*b[6]*b[15]+b[0]*b[7]*b[14]+b[4]*b[2]*b[15]-b[4]*b[3]*b[14]-b[12]*b[2]*b[7]+b[12]*b[3]*b[6];d[10]=b[0]*b[5]*b[15]-b[0]*b[7]*b[13]-b[4]*b[1]*b[15]+b[4]*b[3]*b[13]+b[12]*b[1]*b[7]-b[12]*b[3]*b[5];d[14]=-b[0]*b[5]*b[14]+b[0]*b[6]*b[13]+b[4]*b[1]*b[14]-b[4]*b[2]*b[13]-b[12]*b[1]*b[6]+b[12]*b[2]*b[5];d[3]=-b[1]*b[6]*b[11]+b[1]*b[7]*b[10]+b[5]*b[2]*b[11]-b[5]*b[3]*b[10]-b[9]*b[2]*b[7]+b[9]*
b[3]*b[6];d[7]=b[0]*b[6]*b[11]-b[0]*b[7]*b[10]-b[4]*b[2]*b[11]+b[4]*b[3]*b[10]+b[8]*b[2]*b[7]-b[8]*b[3]*b[6];d[11]=-b[0]*b[5]*b[11]+b[0]*b[7]*b[9]+b[4]*b[1]*b[11]-b[4]*b[3]*b[9]-b[8]*b[1]*b[7]+b[8]*b[3]*b[5];d[15]=b[0]*b[5]*b[10]-b[0]*b[6]*b[9]-b[4]*b[1]*b[10]+b[4]*b[2]*b[9]+b[8]*b[1]*b[6]-b[8]*b[2]*b[5];e=b[0]*d[0]+b[1]*d[4]+b[2]*d[8]+b[3]*d[12];if(e===0)d=m;else{e=1/e;for(c=0;c<16;c+=1)b[c]=d[c]*e;d=j}if(!d)return m;a[0]=(a[0]-f[0])/f[2];a[1]=(a[1]-f[1])/f[3];a[0]=a[0]*2-1;a[1]=a[1]*2-1;a[2]=a[2]*
2-1;f=[];for(d=0;d<4;d+=1)f[d]=a[0]*b[0+d]+a[1]*b[4+d]+a[2]*b[8+d]+a[3]*b[12+d];if(f[3]===0)return m;f[0]/=f[3];f[1]/=f[3];f[2]/=f[3];g[0]=f[0];g[1]=f[1];g[2]=f[2];return j};function Rc(){this.sa=[]}Rc.prototype.Ud=function(){if(!this.sa||this.sa.length<1)return l;return this.sa[this.sa.length-1]};Rc.prototype.pop=function(){return this.sa?this.sa.pop():l};Rc.prototype.push=function(a){if(this.sa)this.sa.push(a);else this.sa=[a]};function Sc(){this.a=E("lanyard.BasicOrbitView");this.ah=0;this.bh=180*(new Date).getTimezoneOffset()/432E5;this.Fe=6E6;this.Ee=0;this.Ce=+Infinity;this.ze=j;this.De=this.dh=this.$g=0;this.Be=90;this.ye=j;this.Ae=45;this.viewport=this.Xb=this.V=l;this.yd=I.prototype.j(this.Ae);this.ka=l;this.ac=-1;this.Pb=this.forward=this.Sg=this.Nb=l;this.Vf=this.lg=-1;this.sh=[];this.Fh=[];this.tb=I.prototype.j(0);this.ub=I.prototype.j(180*(new Date).getTimezoneOffset()/432E5);this.Ua=this.Fe;this.na=I.prototype.j(0);
this.pitch=I.prototype.j(0);this.altitude=0;this.Ic=this.Ee;this.Hc=this.Ce;this.nh=this.ze;this.hg=I.prototype.j(this.De);this.dg=I.prototype.j(this.Be);this.mh=this.ye;this.db=l;this.mb=0;this.Hd=m;this.Od=new Rc}
function Tc(a,b,c,d,e,f,g){a=new Q(l);a.translate(0,0,-e);wc(a,g.multiply(-1));e=f.cos();f=f.sin();g=a.q*-f+a.r*e;var h=a.g*e+a.h*f,k=a.g*-f+a.h*e,q=a.k*e+a.l*f,u=a.k*-f+a.l*e,v=a.o*e+a.p*f,w=a.o*-f+a.p*e;a.q=a.q*e+a.r*f;a.r=g;a.g=h;a.h=k;a.k=q;a.l=u;a.o=v;a.p=w;a.translate(0,0,-d);wc(a,b);c=c.multiply(-1);b=c.cos();c=c.sin();d=a.q*c+a.s*b;e=a.g*b+a.i*-c;f=a.g*c+a.i*b;g=a.k*b+a.m*-c;h=a.k*c+a.m*b;k=a.o*b+a.t*-c;q=a.o*c+a.t*b;a.q=a.q*b+a.s*-c;a.s=d;a.g=e;a.i=f;a.k=g;a.m=h;a.o=k;a.t=q;return a}p=Sc.prototype;
p.Wa=function(){if(!this.db){D(this.a,"Attempted to get a null frustum from the view.");return l}return this.db.Wa()};p.Qb=function(){return new O(this.tb,this.ub,0)};function Uc(a,b){var c=[a.hg,a.dg];if(b.ea(c[0])<0)a.pitch=c[0];else if(b.ea(c[1])>0)a.pitch=c[1];a.pitch=b;return a.pitch}function Vc(a,b){var c=b,d=[Math.max(a.Ic,a.mb),a.Hc];if(c<d[0])c=d[0];else if(c>d[1])c=d[1];return c}
p.Zb=function(a){a||D(this.a,"Attempted to unproject an invalid window point.");if(!this.V||!this.Xb||!this.viewport)return l;var b=this.Xb.Va(),c=this.V.Va(),d=[3];return Qc.prototype.Zb(a.b,a.c,a.d,c,b,[this.viewport.b,this.viewport.c,this.viewport.md,this.viewport.Xa()],d)?new J(d[0],d[1],d[2],0):l};
function Wc(a,b,c){if(a.viewport){var d=a.viewport.Xa()-c-1;c=a.Zb(new J(b,d,0,0));b=a.Zb(new J(b,d,1,0));b=!c||!b?l:new nc(c,b.K(c).normalize())}else b=l;if(!b)return l;if(!a.ka)return l;a=a.ka;b=a.Dc(b);a=b===l?l:sc(a,b[0].kd);return a}function Jc(a,b){a.V=a.Od.pop();Xc(b,"uMVMatrix",a.V);return a.V}function Nc(a){if(!a.Nb&&a.V){var b=xc(a.V);if(b)a.Nb=b.transform(new J(0,0,0,1))}return a.Nb}p.Ad=o("Xb");
p.apply=function(a){this.ka=a.S();this.ac=a.ya();this.Pb=this.forward=this.Sg=this.Nb=l;this.Vf=this.lg=-1;if(!this.Hd){var b=a.S();this.Ic=this.mb=1;this.Hc=b?6*b.Ha():+Infinity;if(b)this.Ua=Vc(this,3*b.Ha());this.Hd=j}if(b=a.S()){var c=rc(b,new O(this.tb,this.ub,0)),d=Tc(this,this.tb,this.ub,c.length(),this.Ua,this.na,this.pitch),e=xc(d).transform(new J(0,0,0,1)),f=sc(b,e),g;g=f.B;f=f.C;var h=l,k=a.Da;if(k)h=k.yc(g,f,0);if(!h)if(k=a.S())h=rc(k,new O(g,f,a.ya()*k.Y(g,f)));g=h;if(g){g=e.length()-
this.mb-g.length();if(g<0){this.a.log(C,"Distance to surface was less than 0.",void 0);f=e.normalize();g=J.prototype.Ob(e.length()-g,f,J.prototype.ZERO);e=e.K(c);g=g.K(c);e=e.H(g)/(e.length()*g.length());if(e>=-1&&e<=1){this.pitch=Uc(this,this.pitch.K(I.prototype.M(Math.acos(e))));this.Ua=Vc(this,g.length());d=Tc(Sc.prototype,this.tb,this.ub,c.length(),this.Ua,this.na,this.pitch)}}}e=xc(d).transform(new J(0,0,0,1));f=sc(b,e);this.altitude=e.length()-P(b,f.B,f.C,0).length();b=d}else{D(this.a,"The globe was null when computing the model-view matrix.");
b=l}g=xc(b).transform(new J(0,0,0,1));if(c=this.viewport)if(d=this.yd){e=a.S();f=a.ya();if(!e||!g)e=-1;else{h=sc(e,g);f=rc(e,new O(h.B,h.C,f*e.Y(h.B,h.C)));g=g.length()-f.length();e=Math.sqrt(g*(2*e.P+g))}c=new Pc.prototype.sf(d,c.md,c.Xa(),0.1,e*2)}else{D(this.a,"We don't know anything about the field of view.");c=l}else{D(this.a,"We don't know anything about the viewport.");c=l}(this.db=c)||D(this.a,"We don't have a view frustum to generate the projection matrix.");d=this.db;c=this.viewport;e=this.yd;
if(!c||!e||!d||!d.Wa()||!mc(d.Wa()))c=1;else{d=Math.abs(pc(mc(d.Wa())));if(d===0)d=1;e=d*e.Vc();c=c.height*e/c.width;c=1+Math.sqrt(e*e+c*c+d*d)}this.mb=c;b=b;c=this.db.Ad();Xc(a,"uMVMatrix",b);Xc(a,"uPMatrix",c);this.V=b;this.Xb=c};function Ic(a,b,c){a.V||D(a.a,"Attempted to push the reference center without a valid model-view.");a.Od.push(new Q(a.V.Va()));a.V=a.V.se(c);Xc(b,"uMVMatrix",a.V)};function Yc(a){this.a=E("lanyard.render.GLSL");a||D(this.a,"Attempted to create a program object without a valid GL context.");this.f=a;this.wc=this.ad="";this.Ca=a.createProgram()}Yc.prototype.getAttribLocation=function(a){return this.f.getAttribLocation(this.Ca,a)};Yc.prototype.getUniformLocation=function(a){var b=this.f.getUniformLocation(this.Ca,a);b||D(this.a,"The specified uniform was not found in the shader ("+a+").");return b};
function Zc(a,b,c){if(c)a.f.getProgramParameter(b,a.f.LINK_STATUS)||D(a.a,"Linking of a program failed. "+a.f.getProgramInfoLog(b));else a.f.getShaderParameter(b,a.f.COMPILE_STATUS)||D(a.a,"Compilation of a shader failed. "+a.f.getShaderInfoLog(b))};function $c(a){this.a=E("lanyard.util.Texture");a||D(this.a,"Creation of a texture was attempted without a valid draw context.");this.gf=a;(this.f=a.f)||D(this.a,"Creation of a texture was attempted without a valid gl context.");this.ke=this.f.createTexture()}$c.prototype.Pa=function(){this.f.bindTexture(this.f.TEXTURE_2D,this.ke)};
function ad(a,b){var c=b.getContext("2d"),d=new Image;d.onload=function(){c.drawImage(d,0,0);var e=a.f;e.bindTexture(e.TEXTURE_2D,this.ke);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,j);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,d);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.bindTexture(e.TEXTURE_2D,l);a.f.generateMipmap(a.f.TEXTURE_2D);a.a.log(C,"Render event is being fired off.",void 0);a.gf.A.display()}}
function bd(a,b,c){a.f.texParameteri(a.f.TEXTURE_2D,b,c)};function cd(a){this.vh=this.ra=l;this.xh=j;this.f=a;this.transform={bd:0,dd:0,cd:0,ed:0};this.be=this.ce=this.Sc=this.Tc=0;this.a=E("lanyard.render.SurfaceTileRenderer")}cd.prototype.ve=2;function dd(a,b,c,d,e){this.Ye=a;this.Se=b;this.Ne=c;this.Me=d;this.fh=e;this.a=E("lanyard.util.Color")}dd.prototype.te=new dd(0,0,0,1,"000000FF");dd.prototype.ue=new dd(0,0,0,0,"00000000");function ed(a){this.eh=a;this.hc=[]}ed.prototype.Ud=function(){return this.hc[0]};ed.prototype.clear=function(){this.hc=[]};function fd(a){this.a=E("lanyard.BasicDrawContext");this.ka=this.Bb=this.view=l;(this.A=a)||D(this.a,"Attempted to create a draw context without a valid lanyard canvas.");this.ac=1;this.Da=this.$c=l;this.Rg=0;this.clearColor=dd.prototype.te;this.hh=m;this.Td=-1;this.Kc=new ed(function(b,c){var d=b.Of(),e=c.Of();return d>e?-1:d===e?0:1});(this.f=a.La.getContext("experimental-webgl"))||D(this.a,"The canvas specified does not seem to support WebGL.");this.Og=new cd(this.f);this.T=l;this.Ib="shader-vs";
this.vb="shader-fs"}
function gd(a){if(!a.T&&a.Ib&&a.vb){a.T=new Yc(a.f);var b=a.T,c=t(a.Ib)?document.getElementById(a.Ib):a.Ib;if(c){b.ad=c.innerHTML;if(c.type!=="x-shader/x-vertex")D(b.a,"Attempted to update a vertex shader with an incorrect mime type.");else{c=b.f.createShader(b.f.VERTEX_SHADER);b.ad||D(b.a,"The location of a vertex shader was not specified.");b.f.shaderSource(c,b.ad);b.f.compileShader(c);Zc(b,c,m);b.f.attachShader(b.Ca,c)}}b=a.T;if(c=t(a.vb)?document.getElementById(a.vb):a.vb){b.wc=c.innerHTML;if(c.type!==
"x-shader/x-fragment")D(b.a,"Attempted to update a fragment shader with an incorrect mime type.");else{c=b.f.createShader(b.f.FRAGMENT_SHADER);b.wc||D(b.a,"The location of a fragment shader was not specified.");b.f.shaderSource(c,b.wc);b.f.compileShader(c);Zc(b,c,m);b.f.attachShader(b.Ca,c)}}b=a.T;b.f.linkProgram(b.Ca);b.f.validateProgram(b.Ca);Zc(b,b.Ca,j);a=a.T;a.f.useProgram(a.Ca)}}p=fd.prototype;p.Fb=function(a){if(a){this.Bb=a;if(a=this.Bb.S())this.ka=a}};p.Z=o("Bb");p.wb=function(){return this.Bb.wb()};
p.S=function(){return this.ka!==l?this.ka:this.Bb.S()};p.Gb=n("view");p.Q=o("view");p.ya=o("ac");p.Zd=n("ac");function Xc(a,b,c){a.f.uniformMatrix4fv(a.T.getUniformLocation(b),m,new Float32Array(c.Va()))};function hd(a,b){this.b=a;this.c=b}hd.prototype.zc=o("b");hd.prototype.Ac=o("c");hd.prototype.translate=function(a,b){this.b+=a;this.c+=b};hd.prototype.toString=function(){return"A string with coordinates of: x = "+this.b+", y = "+this.c+"."};function id(){this.a=E("lanyard.BasicFrameController")};function jd(a){this.a=E("lanyard.BasicSceneController");a||D(this.a,"Attempted to create a scene controller without a valid lanyard canvas.");this.Lb=this.ic=l;this.Qe=new id;this.jc=1;this.pa=new fd(a)}p=jd.prototype;p.Z=o("ic");p.Q=o("Lb");p.Fb=n("ic");p.Gb=n("Lb");p.Zd=n("jc");p.ya=o("jc");function kd(a){this.W=l;this.La=a;this.gh=l;this.a=E("lanyard.LanyardCanvas")}p=kd.prototype;p.Fb=function(a){if(!this.W)this.W=new jd(this);this.W?this.W.Fb(a):D(this.a,"Attempted to set a model without a valid scene controller.")};p.Z=function(){return this.W?this.W.Z():l};
p.Gb=function(a){this.La||D(this.a,"Attempted to set the view without a valid canvas element.");a||D(this.a,"Attempted to set an invalid view.");if(!this.W)this.W=new jd(this);var b=this.La;a.viewport=new yc(0,0,b.width,b.height);this.W?this.W.Gb(a):D(this.a,"Tried to set a view without a scene controller existing.")};p.Q=function(){if(!this.W)this.W=new jd(this);this.W||D(this.a,"Attempted to get the view from an invalid scene controller.");return this.W.Q()};
p.display=function(){var a=this.W;a||this.a.log(C,"The scene controller was null when a repaint was attempted.",void 0);var b=a.pa;b.A||D(b.a,"Attempt to initialize a draw context without a valid lanyard canvas.");b.f.viewport(0,0,b.A.La.width,b.A.La.height);b.$c=l;b.Da&&b.Da.clear();b.Da=l;b.Kc.clear();b.Rg=0;if(b.Td<1)b.Td=b.f.getParameter(b.f.MAX_TEXTURE_IMAGE_UNITS);a.pa.Fb(a.ic);a.pa.Gb(a.Lb);a.pa.Zd(a.jc);gd(a.pa);a.pa.A||a.a.log(C,"The scene controller has a null lanyard canvas.",void 0);var c=
a.Qe;c||a.a.log(C,"The frame controller did not exist when the scene controller tried to use it.",void 0);b=a.pa;b.Ib="shader-vs";b.vb="shader-fs";b.T=l;gd(b);b.f.clearDepth(1);b.f.enable(b.f.DEPTH_TEST);b.f.enable(b.f.CULL_FACE);b.f.depthFunc(b.f.LEQUAL);Xc(b,"uMVMatrix",new Q(l));Xc(b,"uPMatrix",new Q(l));a.Lb.apply(a.pa);b=a.pa;var d=dd.prototype.ue,e=b.f;e.clearColor(d.Ye,d.Se,d.Ne,d.Me);e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT);if(b.Q())if(b.Z())if(b.wb()){b.Q().apply(b);if(tc(b.Z())){d=
tc(b.Z()).Wc(b);b.Da=d}else D(c.a,"No tessellator was available.");d=b.wb();for(e=0;e<d.length;e+=1){var f=d[e];f&&f.ta(b)}for(;b.Kc.Ud();)b.Kc.hc.splice(0,1).ta(b);if(b.Da&&b.Z().ge||b.Z().Uc||b.Z().fe){c.a.log(C,"Creating diagnostic displays.",void 0);c=b.Z();d=b.Da;for(e=0;e<d.X.length;e+=1){if(c.Uc||c.ge){f=d.X[e];var g=b,h=c.Uc,k=Hc(f,f.L.ca);Ic(g.Q(),g,f.L.Nc);var q=g.f;if(h){h=q.createBuffer();q.bindBuffer(q.ARRAY_BUFFER,h);q.bufferData(q.ARRAY_BUFFER,new Float32Array(f.L.$),q.STATIC_DRAW);
q.enableVertexAttribArray(g.T.getAttribLocation("aVertexPosition"));q.vertexAttribPointer(g.T.getAttribLocation("aVertexPosition"),3,q.FLOAT,m,0,0);h=q.createBuffer();q.bindBuffer(q.ELEMENT_ARRAY_BUFFER,h);q.bufferData(q.ELEMENT_ARRAY_BUFFER,new Float32Array(k),q.STATIC_DRAW);q.drawElements(q.TRIANGLE_STRIP,f.L.$.length/3,q.UNSIGNED_SHORT,0)}Jc(g.Q(),g)}if(c.fe){f=b;d.X[e].xa().ta(f)}}}}else D(c.a,"The layers were null when attempting to draw.");else D(c.a,"The model was null when attempting to draw.");
else D(c.a,"The view was null when attempting to draw.");a.frame+=1};function ld(a){a.Dd=new md;a.Dd.Pc(a)};function nd(a,b,c){this.a=E("lanyard.demo.StatusBar");this.pf=l;this.Id=a;this.Kd=b;this.vd=c}s("lanyard.demo.StatusBar",nd,void 0);nd.prototype.Pc=function(a){a||D(this.a,"Attempted to use an invalid event source.");var b=a.Dd;this||D(b.a,"Attempted to add an invalid position listener.");this.Zf=j;b.qb.push(this);this.pf=a};
nd.prototype.Qd=function(a){if(a=a.Qb()){this.Id.innerHTML=a.B.e.toFixed(5);this.Kd.innerHTML=a.C.e.toFixed(5);this.vd.innerHTML=Math.round(a.Y())}else{this.Id.innerHTML="Off globe";this.Kd.innerHTML="Off globe";this.vd.innerHTML="Off globe"}};var od;!F||Mb("9");var pd=F&&!Mb("8");function W(a,b){this.type=a;this.currentTarget=this.target=b}x(W,ac);W.prototype.fa=function(){delete this.type;delete this.target;delete this.currentTarget};W.prototype.ab=m;W.prototype.Eb=j;W.prototype.preventDefault=function(){this.Eb=m};function qd(a,b){a&&this.Ya(a,b)}x(qd,W);p=qd.prototype;p.target=l;p.relatedTarget=l;p.offsetX=0;p.offsetY=0;p.clientX=0;p.clientY=0;p.screenX=0;p.screenY=0;p.button=0;p.keyCode=0;p.charCode=0;p.ctrlKey=m;p.altKey=m;p.shiftKey=m;p.metaKey=m;p.mg=m;p.rb=l;
p.Ya=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(Ab)try{d=d.nodeName&&d}catch(e){d=l}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==undefined?a.offsetX:a.layerX;this.offsetY=a.offsetY!==undefined?a.offsetY:a.layerY;this.clientX=a.clientX!==undefined?a.clientX:a.pageX;this.clientY=a.clientY!==undefined?a.clientY:a.pageY;this.screenX=a.screenX||0;
this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.mg=vb?a.metaKey:a.ctrlKey;this.je=a.je?a.je:l;this.rb=a;delete this.Eb;delete this.ab};
p.preventDefault=function(){qd.cb.preventDefault.call(this);var a=this.rb;if(a.preventDefault)a.preventDefault();else{a.returnValue=m;if(pd)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}}};p.fa=function(){qd.cb.fa.call(this);this.relatedTarget=this.currentTarget=this.target=this.rb=l};function rd(){}var sd=0;p=rd.prototype;p.key=0;p.bb=m;p.od=m;p.Ya=function(a,b,c,d,e,f){if(ea(a))this.Gd=j;else if(a&&a.handleEvent&&ea(a.handleEvent))this.Gd=m;else i(Error("Invalid listener argument"));this.Ab=a;this.Wd=b;this.src=c;this.type=d;this.capture=!!e;this.Bc=f;this.od=m;this.key=++sd;this.bb=m};p.handleEvent=function(a){if(this.Gd)return this.Ab.call(this.Bc||this.src,a);return this.Ab.handleEvent.call(this.Ab,a)};var td;var ud=(td="ScriptEngine"in r&&r.ScriptEngine()=="JScript")?r.ScriptEngineMajorVersion()+"."+r.ScriptEngineMinorVersion()+"."+r.ScriptEngineBuildVersion():"0";var vd,wd,xd,yd,zd,Ad,Bd,Cd,Dd,Ed,Fd;
(function(){function a(){return{R:0,la:0}}function b(){return[]}function c(){function w(z){return g.call(w.src,w.key,z)}return w}function d(){return new rd}function e(){return new qd}var f=td&&!(za(ud,"5.7")>=0),g;Ad=function(w){g=w};if(f){vd=function(){return bc(h)};wd=function(w){cc(h,w)};xd=function(){return bc(k)};yd=function(w){cc(k,w)};zd=function(){return bc(q)};Bd=function(){cc(q,c())};Cd=function(){return bc(u)};Dd=function(w){cc(u,w)};Ed=function(){return bc(v)};Fd=function(w){cc(v,w)};
var h=new H(0,600);h.Fa=a;var k=new H(0,600);k.Fa=b;var q=new H(0,600);q.Fa=c;var u=new H(0,600);u.Fa=d;var v=new H(0,600);v.Fa=e}else{vd=a;wd=ba;xd=b;yd=ba;zd=c;Bd=ba;Cd=d;Dd=ba;Ed=e;Fd=ba}})();var Gd={},X={},Y={},Hd={};
function Z(a,b,c,d,e){if(b)if(ca(b)=="array"){for(var f=0;f<b.length;f++)Z(a,b[f],c,d,e);return l}else{d=!!d;var g=X;b in g||(g[b]=vd());g=g[b];if(!(d in g)){g[d]=vd();g.R++}g=g[d];var h=ga(a),k;g.la++;if(g[h]){k=g[h];for(f=0;f<k.length;f++){g=k[f];if(g.Ab==c&&g.Bc==e){if(g.bb)break;return k[f].key}}}else{k=g[h]=xd();g.R++}f=zd();f.src=a;g=Cd();g.Ya(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);Gd[c]=g;Y[h]||(Y[h]=xd());Y[h].push(g);if(a.addEventListener){if(a==r||!a.sd)a.addEventListener(b,f,d)}else a.attachEvent(Id(b),
f);return c}else i(Error("Invalid event type"))}function Jd(a,b,c,d,e){if(ca(b)=="array"){for(var f=0;f<b.length;f++)Jd(a,b[f],c,d,e);return l}d=!!d;a:{f=X;if(b in f){f=f[b];if(d in f){f=f[d];a=ga(a);if(f[a]){a=f[a];break a}}}a=l}if(!a)return m;for(f=0;f<a.length;f++)if(a[f].Ab==c&&a[f].capture==d&&a[f].Bc==e)return Kd(a[f].key);return m}
function Kd(a){if(!Gd[a])return m;var b=Gd[a];if(b.bb)return m;var c=b.src,d=b.type,e=b.Wd,f=b.capture;if(c.removeEventListener){if(c==r||!c.sd)c.removeEventListener(d,e,f)}else c.detachEvent&&c.detachEvent(Id(d),e);c=ga(c);e=X[d][f][c];if(Y[c]){var g=Y[c],h=Ja(g,b);if(h>=0){Ha(g.length!=l);y.splice.call(g,h,1)}g.length==0&&delete Y[c]}b.bb=j;e.Sd=j;Ld(d,f,c,e);delete Gd[a];return j}
function Ld(a,b,c,d){if(!d.Ub)if(d.Sd){for(var e=0,f=0;e<d.length;e++)if(d[e].bb){var g=d[e].Wd;g.src=l;Bd(g);Dd(d[e])}else{if(e!=f)d[f]=d[e];f++}d.length=f;d.Sd=m;if(f==0){yd(d);delete X[a][b][c];X[a][b].R--;if(X[a][b].R==0){wd(X[a][b]);delete X[a][b];X[a].R--}if(X[a].R==0){wd(X[a]);delete X[a]}}}}
function Md(a,b,c){var d=0,e=a==l,f=b==l,g=c==l;c=!!c;if(e)Pa(Y,function(k){for(var q=k.length-1;q>=0;q--){var u=k[q];if((f||b==u.type)&&(g||c==u.capture)){Kd(u.key);d++}}});else{a=ga(a);if(Y[a]){a=Y[a];for(e=a.length-1;e>=0;e--){var h=a[e];if((f||b==h.type)&&(g||c==h.capture)){Kd(h.key);d++}}}}return d}function Id(a){if(a in Hd)return Hd[a];return Hd[a]="on"+a}
function Nd(a,b,c,d,e){var f=1;b=ga(b);if(a[b]){a.la--;a=a[b];if(a.Ub)a.Ub++;else a.Ub=1;try{for(var g=a.length,h=0;h<g;h++){var k=a[h];if(k&&!k.bb)f&=Od(k,e)!==m}}finally{a.Ub--;Ld(c,d,b,a)}}return Boolean(f)}function Od(a,b){var c=a.handleEvent(b);a.od&&Kd(a.key);return c}
Ad(function(a,b){if(!Gd[a])return j;var c=Gd[a],d=c.type,e=X;if(!(d in e))return j;e=e[d];var f,g;if(od===undefined)od=F&&!r.addEventListener;if(od){f=b||aa("window.event");var h=j in e,k=m in e;if(h){if(f.keyCode<0||f.returnValue=="marked_closure")return j;a:{var q=m;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(u){q=j}if(q||f.returnValue!="marked_closure")f.returnValue="marked_closure"}}q=Ed();q.Ya(f,this);f=j;try{if(h){for(var v=xd(),w=q.currentTarget;w;w=w.parentNode)v.push(w);g=e[j];g.la=g.R;
for(var z=v.length-1;!q.ab&&z>=0&&g.la;z--){q.currentTarget=v[z];f&=Nd(g,v[z],d,j,q)}if(k){g=e[m];g.la=g.R;for(z=0;!q.ab&&z<v.length&&g.la;z++){q.currentTarget=v[z];f&=Nd(g,v[z],d,m,q)}}}else f=Od(c,q)}finally{if(v){v.length=0;yd(v)}q.Ra();Fd(q)}return f}d=new qd(b,this);try{f=Od(c,d)}finally{d.Ra()}return f});new H(0,100);function Pd(){}x(Pd,ac);p=Pd.prototype;p.sd=j;p.Mc=l;p.addEventListener=function(a,b,c,d){Z(this,a,b,c,d)};p.removeEventListener=function(a,b,c,d){Jd(this,a,b,c,d)};
p.dispatchEvent=function(a){a=a;if(t(a))a=new W(a,this);else if(a instanceof W)a.target=a.target||this;else{var b=a;a=new W(a.type,this);Ra(a,b)}b=1;var c,d=a.type,e=X;if(d in e){e=e[d];d=j in e;var f;if(d){c=[];for(f=this;f;f=f.Mc)c.push(f);f=e[j];f.la=f.R;for(var g=c.length-1;!a.ab&&g>=0&&f.la;g--){a.currentTarget=c[g];b&=Nd(f,c[g],a.type,j,a)&&a.Eb!=m}}if(m in e){f=e[m];f.la=f.R;if(d)for(g=0;!a.ab&&g<c.length&&f.la;g++){a.currentTarget=c[g];b&=Nd(f,c[g],a.type,m,a)&&a.Eb!=m}else for(c=this;!a.ab&&
c&&f.la;c=c.Mc){a.currentTarget=c;b&=Nd(f,c,a.type,m,a)&&a.Eb!=m}}a=Boolean(b)}else a=j;return a};p.fa=function(){Pd.cb.fa.call(this);Md(this);this.Mc=l};function Qd(a,b,c,d,e){if(!F&&!(G&&Mb("525")))return j;if(vb&&e)return Rd(a);if(e&&!d)return m;if(!c&&(b==17||b==18))return m;if(F&&d&&b==a)return m;switch(a){case 13:return j;case 27:return!G}return Rd(a)}
function Rd(a){if(a>=48&&a<=57)return j;if(a>=96&&a<=106)return j;if(a>=65&&a<=90)return j;if(G&&a==0)return j;switch(a){case 32:case 63:case 107:case 109:case 110:case 111:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return j;default:return m}};function Sd(a,b){if(a){this.Tb&&this.detach();this.N=a;this.Sb=Z(this.N,"keypress",this,b);this.Fc=Z(this.N,"keydown",this.Tf,b,this);this.Tb=Z(this.N,"keyup",this.Uf,b,this)}}x(Sd,Pd);p=Sd.prototype;p.N=l;p.Sb=l;p.Fc=l;p.Tb=l;p.Aa=-1;p.za=-1;
var Td={"3":13,"12":144,"63232":38,"63233":40,"63234":37,"63235":39,"63236":112,"63237":113,"63238":114,"63239":115,"63240":116,"63241":117,"63242":118,"63243":119,"63244":120,"63245":121,"63246":122,"63247":123,"63248":44,"63272":46,"63273":36,"63275":35,"63276":33,"63277":34,"63289":144,"63302":45},Ud={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},Vd={61:187,
59:186},Wd=F||G&&Mb("525");p=Sd.prototype;p.Tf=function(a){if(G&&(this.Aa==17&&!a.ctrlKey||this.Aa==18&&!a.altKey))this.za=this.Aa=-1;if(Wd&&!Qd(a.keyCode,this.Aa,a.shiftKey,a.ctrlKey,a.altKey))this.handleEvent(a);else this.za=Ab&&a.keyCode in Vd?Vd[a.keyCode]:a.keyCode};p.Uf=function(){this.za=this.Aa=-1};
p.handleEvent=function(a){var b=a.rb,c,d;if(F&&a.type=="keypress"){c=this.za;d=c!=13&&c!=27?b.keyCode:0}else if(G&&a.type=="keypress"){c=this.za;d=b.charCode>=0&&b.charCode<63232&&Rd(c)?b.charCode:0}else if(zb){c=this.za;d=Rd(c)?b.keyCode:0}else{c=b.keyCode||this.za;d=b.charCode||0;if(vb&&d==63&&!c)c=191}var e=c,f=b.keyIdentifier;if(c)if(c>=63232&&c in Td)e=Td[c];else{if(c==25&&a.shiftKey)e=9}else if(f&&f in Ud)e=Ud[f];a=e==this.Aa;this.Aa=e;b=new Xd(e,d,a,b);try{this.dispatchEvent(b)}finally{b.Ra()}};
p.detach=function(){if(this.Sb){Kd(this.Sb);Kd(this.Fc);Kd(this.Tb);this.Tb=this.Fc=this.Sb=l}this.N=l;this.za=this.Aa=-1};p.fa=function(){Sd.cb.fa.call(this);this.detach()};function Xd(a,b,c,d){d&&this.Ya(d,void 0);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}x(Xd,qd);function Yd(a){this.N=a;this.Jd=Z(this.N,Ab?"DOMMouseScroll":"mousewheel",this)}x(Yd,Pd);
Yd.prototype.handleEvent=function(a){var b=0,c=0,d=0;a=a.rb;if(a.type=="mousewheel"){c=1;if(F||G&&(Db||Mb("532.0")))c=40;d=-a.wheelDelta/c;if(a.wheelDeltaX!==undefined){b=-a.wheelDeltaX/c;c=-a.wheelDeltaY/c}else c=d}else{d=a.detail;if(d>100)d=3;else if(d<-100)d=-3;if(a.axis!==undefined&&a.axis===a.HORIZONTAL_AXIS)b=d;else c=d}if(typeof this.Md=="number")b=Math.min(Math.max(b,-this.Md),this.Md);if(typeof this.Nd=="number")c=Math.min(Math.max(c,-this.Nd),this.Nd);b=new Zd(d,a,b,c);try{this.dispatchEvent(b)}finally{b.Ra()}};
Yd.prototype.fa=function(){Yd.cb.fa.call(this);Kd(this.Jd);delete this.Jd};function Zd(a,b,c,d){b&&this.Ya(b,void 0);this.type="mousewheel";this.detail=a;this.lh=c;this.jf=d}x(Zd,qd);function $d(a,b,c,d){this.a=E("lanyard.dom.PositionEvent");this.source=a;this.uh=b;this.Vd=c;this.position=d}$d.prototype.Qb=o("position");$d.prototype.toString=function(){return"A position event: "+this.Vd?this.Vd.toString():"null --\> "+this.position?this.position.toString():"null"};function ae(){this.zoom=this.pitch=this.na=this.Za=l};function md(){this.a=E("lanyard.dom.InputHandler");this.qb=[];this.ba=this.A=l;this.Ia=new hd(0,0);this.Jc=0;this.Cb=[0,0,0,0];this.yh=j;this.Vg=1.0E-5;this.Ug=0.2;this.Tg=1.0E-9;this.Wg=0.6;this.Eh=0.1;this.Ah=0.25;this.Bh=1.0E-4;this.Dh=0.3;this.Ch=0.1;this.Xg=0.05;this.Yg=0.0010;this.Zg=0.1}
md.prototype.Pc=function(a){a||D(this.a,"Attempted to use an invalid object as an event source.");a.Q()||D(this.a,"Attempted to set an event source without a valid view.");(this.ba=a.La)||D(this.a,"Attempted to use an input source without a valid dom node.");this.A=a;a=new Sd(this.ba);Z(a,"key",this.$f,m,this);var b=new Yd(this.ba);Z(b,"mousewheel",this.Pd,m,this);Z(window,"mousedown",function(c){++this.Cb[c.button];++this.Jc},m,this);Z(window,"mouseup",function(c){--this.Cb[c.button];--this.Jc},
m,this);Z(this.ba,"mousemove",this.ig,m,this);Z(this.ba,"unload",function(){Jd(b,"mousewheel",this.Pd)})};md.prototype.$f=function(a){if(this.A){var b=this.A.Q();if(b){a.preventDefault();var c=b.na.sin(),d=b.na.cos(),e=0,f=0;if(a.keyCode===37){e=c;f=-d}else if(a.keyCode===39){e=-c;f=d}else if(a.keyCode===38){e=d;f=c}else if(a.keyCode===40){e=-d;f=-c}if(e!==0||f!==0)if(a=this.A.Z().S()){e=be(this,b,a,10*e,10*f,m);ce(this,b,de(this,b,e.B,e.C))}}}};
md.prototype.ig=function(a){if(this.A)if(a){var b=this.A.Q();if(b){if(this.Jc){if(this.Cb[0])if(this.A)if(a){var c=this.A.Q();if(c)if(this.A.Z()){var d=new hd(a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-this.ba.offsetLeft-this.Ia.b,a.clientY+document.body.scrollTop+document.documentElement.scrollTop-this.ba.offsetTop-this.Ia.c),e=l,f=Wc(c,this.Ia.b,this.Ia.c),g=Wc(c,a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-this.ba.offsetLeft,a.clientY+document.body.scrollTop+
document.documentElement.scrollTop-this.ba.offsetTop);if(f&&g)e=new S(f.B.K(g.B),f.C.K(g.C));else if(f=this.A.Z().S()){var h=c.na.sin(),k=c.na.cos();g=k*d.c+h*d.b;d=h*d.c-k*d.b;if(g!==0||d!==0)e=be(this,c,f,g,d,m)}else D(this.a,"Attempted to perform a drag event without a valid globe.");e?ce(this,c,de(this,c,e.B,e.C)):D(this.a,"A failure occured in the drag event result.")}else D(this.a,"Attempted to handle a drag event without a valid model.");else D(this.a,"Attempted to handle a drag event without a valid view.")}else D(this.a,
"Attempted to handle a drag event without a valid event.");else D(this.a,"Attempted to handle a drag event without a valid canvas.");this.Cb[1]&&this.a.log(C,"The center mouse button is pressed.",void 0);this.Cb[2]&&this.a.log(C,"The right mouse button is pressed.",void 0)}if(c=this.A.Z())if(c.S()){b=new $d(this.A,a,Wc(b,this.Ia.b,this.Ia.c),Wc(b,a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-this.ba.offsetLeft,a.clientY+document.body.scrollTop+document.documentElement.scrollTop-
this.ba.offsetTop));for(c=0;c<this.qb.length;c++)this.qb[c].Qd&&this.qb[c].Zf&&this.qb[c].Qd(b);this.Ia=new hd(a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-this.ba.offsetLeft,a.clientY+document.body.scrollTop+document.documentElement.scrollTop-this.ba.offsetTop)}}}};function ce(a,b,c){c||D(a.a,"Attempted to set the view to an invalid latlon.");a.ha=new ae;a.ha.Za=c;ee(a,b,a.ha,a.Wg,a.Tg,m)}
function be(a,b,c,d,e,f){b=Nc(b);if(!b){D(a.a,"Attempted to compute a latlon change without a valid eye.");return l}c=b.length()/c.P-1;c=c<0?0:c>1?1:c;a=((1-c)*a.Vg+c*a.Ug)*(f?0.25:1);return S.prototype.j(d*a,e*a)}function de(a,b,c,d){var e;if(a.ha&&a.ha.Za){e=a.ha.Za.B.e;a=a.ha.Za.C.e}else{e=b.Qb().B.e;a=b.Qb().C.e}e+=c.e;a+=d.e;if(e<-90)e=-90;else if(e>90)e=90;if(a<-180)a+=360;else if(a>180)a-=360;return S.prototype.j(e,a)}
md.prototype.Pd=function(a){if(this.A)if(a){a.preventDefault();var b=this.A.Q();b?fe(this,b,ge(this,b,function(c){if(c<0)return-1;if(c>0)return 1;return 0}(a.jf)*this.Xg*1)):D(this.a,"Attempted to handle a mouse wheel event without a valid view.")}else D(this.a,"Attempted to handle an invalid mouse wheel event.");else D(this.a,"A mouse wheel event was thrown away due to a missing event source.")};
function ge(a,b,c){a=a.ha&&a.ha.zoom?Math.log(a.ha.zoom):Math.log(b.Ua);a+=c;b=[Math.max(b.Ic,b.mb),b.Hc];return Math.exp(a)<b[0]?b[0]:Math.exp(a)>b[1]?b[1]:Math.exp(a)}function fe(a,b,c){a.ha=new ae;a.ha.zoom=c;ee(a,b,a.ha,a.Zg,a.Yg,m)}
function ee(a,b,c){b||D(a.a,"Attempted to set properties on a null view.");if(c.Za){var d=c.Za;a=d.B.e;if(a<-90)a=-90;else if(a>90)a=90;d=d.C.e;if(d<-180)d+=360;else if(d>180)d-=360;a=S.prototype.j(a,d);b.tb=a.B;b.ub=a.C}if(c.na){a=c.na.e;if(a<0)a+=360;else if(a>360)a-=360;a=I.prototype.j(a);b.na=a}if(c.pitch)b.pitch=Uc(b,c.pitch);if(c.zoom)b.Ua=Vc(b,c.zoom)};function he(){this.a=E("lanyard.layers.AbstractLayer");this.enabled=j;this.opacity=1;this.gg=Number.MIN_VALUE;this.bg=Number.MAX_VALUE;this.pc="Untitled Layer"}s("lanyard.layers.AbstractLayer",he,void 0);he.prototype.getName=o("pc");he.prototype.toString=o("pc");he.prototype.ta=function(a){if(this.enabled){var b;b=a.Q().altitude;if(b>=this.gg&&b<=this.bg){(b=this.Oc?this.Oc:this.Yd)||this.a.log(C,"Active renderable array is not correct.",void 0);for(var c in b)b.hasOwnProperty(c)&&b[c].ta(a)}}};function ie(a){he.call(this);this.a=E("lanyard.layers.RenderableLayer");this.Yd=[];this.Oc=l;this.kh=a}x(ie,he);ie.prototype.toString=function(){return"A generic renderable layer."};function je(a,b,c){this.a=E("lanyard.render.SurfaceImage");this.vc=l;this.xd=Number.MIN_VALUE;this.opacity=1;this.Yc=l;this.Bd=this.Wf=m;this.yb=a;this.ua=b;this.wh=new O.prototype.tf(Ec(b),0);this.qh=c;this.yb||D(this.a,"The image source is null.");this.ua||D(this.a,"The sector is null.")}p=je.prototype;p.ga=o("ua");p.xa=function(a){a||D(this.a,"The draw context is null.");if(!this.vc||this.xd!==a.ya()){this.vc=Fc(T.prototype,a.S(),a.ya(),this.ua);this.xd=a.ya()}return this.vc};
function ke(a,b){b||D(a.a,"The draw context was null.");var c=b.f,d=new $c(b),e=new Image;e.onload=function(){d.Pa();d.f.pixelStorei(d.f.UNPACK_FLIP_Y_WEBGL,1);d.f.texImage2D(d.f.TEXTURE_2D,0,d.f.RGBA,d.f.RGBA,d.f.UNSIGNED_BYTE,e);bd(d,c.TEXTURE_MIN_FILTER,c.LINEAR);bd(d,c.TEXTURE_MAG_FILTER,c.LINEAR);bd(d,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);bd(d,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);d.f.generateMipmap(d.f.TEXTURE_2D);a.Wf=j;a.Yc=d;b.A.display()};e.onerror=function(){a.a.log(gb,"An image failed to load from: "+
a.yb,void 0);a.Bd=j};e.onabort=function(){a.a.log(gb,"An image load was aborted: "+a.yb,void 0);a.Bd=j};e.src=a.yb;return d}p.Pa=function(a){a||D(this.a,"The draw context is null.");var b=this.Yc;if(!b)if(b=ke(this,a))return j;if(b){b.Pa();return j}return m};
p.ta=function(a){a||D(this.a,"The draw context is null.");if(this.ua.zb(a.$c)){var b=a.f;b.enable(b.CULL_FACE);b=a.Og;if(this){var c=[this],d=a.f;if(!b.ra){var e=cd.prototype.ve,f=document.createElement("canvas");f.width=f.height=e;for(var g=f.getContext("2d"),h=g.createImageData(e,e),k=0;k<e;k+=1)for(var q=0;q<e;q+=1){var u=(q*e+k)*4;h.data[u+0]=255;h.data[u+1]=255;h.data[u+2]=255;h.data[u+3]=255}g.putImageData(h,0,0);b.ra=new $c(a);ad(b.ra,f);b.ra.Pa();bd(b.ra,b.f.TEXTURE_MAG_FILTER,b.f.NEAREST);
bd(b.ra,b.f.TEXTURE_MIN_FILTER,b.f.NEAREST);bd(b.ra,b.f.TEXTURE_WRAP_S,b.f.CLAMP_TO_EDGE);bd(b.ra,b.f.TEXTURE_WRAP_T,b.f.CLAMP_TO_EDGE)}d.enable(d.DEPTH_TEST);d.depthFunc(d.LEQUAL);d.activeTexture(d.TEXTURE0);e=a.Da;for(f=0;f<e.X.length;f+=1){g=e.X[f];h=c;k=[];q=void 0;for(q=0;q<h.length;q+=1)h[q].ga().zb(g.ga())&&k.push(h[q]);if(g=k){h=b;k=e.X[f].ga();h.Tc=k.gd.G;h.Sc=k.gc.G;h.ce=k.F.G;h.be=k.D.G;for(h=0;h<g.length;h+=1){d.activeTexture(d.TEXTURE0);if(g[h].Pa(a)){d.activeTexture(d.TEXTURE0);d.uniform1i(a.T.getUniformLocation("uSamplerTileImage"),
0);k=g[h];(q=a)||D(k.a,"The draw context was null.");k.Yc||ke(k,q);k=b;q=b.transform;var v=g[h].ga();u=v.gd.G;var w=v.gc.G,z=v.F.G;v=v.D.G;q.dd=w>0?k.Sc/w:1;q.bd=u>0?k.Tc/u:1;q.ed=-(v-k.be)/k.Sc;q.cd=-(z-k.ce)/k.Tc;k=new Q([b.transform.bd,0,0,0,0,b.transform.dd,0,0,0,0,1,0,0,0,0,1]);k.translate(b.transform.cd,b.transform.ed,0);Xc(a,"uTextureMatrix",k);d.activeTexture(d.TEXTURE1);b.ra.Pa();d.uniform1i(a.T.getUniformLocation("uSamplerAlphaMask"),1);e.X[f].ta(a)}}}}d.activeTexture(d.TEXTURE0)}else b.a.log(C,
"Attempted to render a null tile.",void 0)}else this.a.log(C,"The surface image does not intersect with a visible sector.",void 0)};p.toString=function(){return"A SurfaceImage with a path of: "+this.yb};function le(){ie.call(this,l);this.a=E("lanyard.layers.earth.BMNGOneImage");this.pc="The Blue Marble, single image";var a=new je("images/bmng.world.topo.512.256.gif",T.prototype.Ge,this);a||D(this.a,"Renderable is null.");this.Oc&&D(this.a,"Layer is already using a custom iterable.");this.Yd.push(a)}x(le,ie);le.prototype.toString=function(){return"A BMNGOneImage object."};function $(a,b,c){this.ld=a;this.Ve=b;this.Oe=c;this.a=E("lanyard.demo.BasicDemo");this.A=l;this.jb=[]}s("lanyard.demo.BasicDemo",$,void 0);$.prototype.qg=function(){this.$d();this.ae();this.ld||D(this.a,"A valid canvas element was not found.");var a=new Oc;a.Gc=this.jb;this.A=new kd(this.ld);this.A.Fb(a);this.A.Gb(new Sc);ld(this.A);var b=this;(function c(){setTimeout(function(){b.A.display();c()},15)})()};s("lanyard.demo.BasicDemo.prototype.run",$.prototype.qg,void 0);
$.prototype.$d=function(){qb().Qc(jb);var a=new $b(this.Oe);if(j!=a.Fd){var b=qb(),c=a.og;if(!b.xb)b.xb=[];b.xb.push(c);a.Fd=j}};s("lanyard.demo.BasicDemo.prototype.setupEventLog",$.prototype.$d,void 0);$.prototype.af=function(a){this.A||D(this.a,"A LanyardCanvas must exist before a status bar is added.");a||D(this.a,"Attempted to attach an invalid status bar.");a.Pc(this.A)};s("lanyard.demo.BasicDemo.prototype.addStatusBar",$.prototype.af,void 0);
$.prototype.ae=function(){this.jb.push(new le);var a;for(a=0;a<this.jb.length;a+=1){var b="Adding layer with name = "+this.jb[a].toString();this.a.log(C,b,void 0);this.Ve.appendChild(Ub("p",{style:"background-color:#EEE"},this.jb[a].getName()))}};s("lanyard.demo.BasicDemo.prototype.setupLayerList",$.prototype.ae,void 0);
