var COMPILED=false;var goog=goog||{};goog.global=this;goog.DEBUG=true;goog.LOCALE="en";goog.evalWorksForGlobals_=null;goog.provide=function(name){if(!COMPILED){if(goog.getObjectByName(name)&&!goog.implicitNamespaces_[name])throw Error('Namespace "'+name+'" already declared.');var namespace=name;while(namespace=namespace.substring(0,namespace.lastIndexOf(".")))goog.implicitNamespaces_[namespace]=true}goog.exportPath_(name)};
goog.setTestOnly=function(opt_message){if(COMPILED&&!goog.DEBUG){opt_message=opt_message||"";throw Error("Importing test-only code into non-debug environment"+opt_message?": "+opt_message:".");}};if(!COMPILED)goog.implicitNamespaces_={};
goog.exportPath_=function(name,opt_object,opt_objectToExportTo){var parts=name.split(".");var cur=opt_objectToExportTo||goog.global;if(!(parts[0]in cur)&&cur.execScript)cur.execScript("var "+parts[0]);for(var part;parts.length&&(part=parts.shift());)if(!parts.length&&goog.isDef(opt_object))cur[part]=opt_object;else if(cur[part])cur=cur[part];else cur=cur[part]={}};
goog.getObjectByName=function(name,opt_obj){var parts=name.split(".");var cur=opt_obj||goog.global;for(var part;part=parts.shift();)if(cur[part])cur=cur[part];else return null;return cur};goog.globalize=function(obj,opt_global){var global=opt_global||goog.global;for(var x in obj)global[x]=obj[x]};
goog.addDependency=function(relPath,provides,requires){if(!COMPILED){var provide,require;var path=relPath.replace(/\\/g,"/");var deps=goog.dependencies_;for(var i=0;provide=provides[i];i++){deps.nameToPath[provide]=path;if(!(path in deps.pathToNames))deps.pathToNames[path]={};deps.pathToNames[path][provide]=true}for(var j=0;require=requires[j];j++){if(!(path in deps.requires))deps.requires[path]={};deps.requires[path][require]=true}}};
goog.require=function(rule){if(!COMPILED){if(goog.getObjectByName(rule))return;var path=goog.getPathFromDeps_(rule);if(path){goog.included_[path]=true;goog.writeScripts_()}else{var errorMessage="goog.require could not find: "+rule;if(goog.global.console)goog.global.console["error"](errorMessage);throw Error(errorMessage);}}};goog.basePath="";goog.global.CLOSURE_BASE_PATH;goog.global.CLOSURE_NO_DEPS;goog.nullFunction=function(){};goog.identityFunction=function(var_args){return arguments[0]};
goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(ctor){ctor.getInstance=function(){return ctor.instance_||(ctor.instance_=new ctor)}};
if(!COMPILED){goog.included_={};goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}};goog.inHtmlDocument_=function(){var doc=goog.global.document;return typeof doc!="undefined"&&"write"in doc};goog.findBasePath_=function(){if(!goog.inHtmlDocument_())return;var doc=goog.global.document;if(goog.global.CLOSURE_BASE_PATH){goog.basePath=goog.global.CLOSURE_BASE_PATH;return}var scripts=doc.getElementsByTagName("script");for(var i=scripts.length-1;i>=0;--i){var src=scripts[i].src;
var l=src.length;if(src.substr(l-7)=="base.js"){goog.basePath=src.substr(0,l-7);return}}};goog.writeScriptTag_=function(src){if(goog.inHtmlDocument_()&&!goog.dependencies_.written[src]){goog.dependencies_.written[src]=true;var doc=goog.global.document;doc.write('<script type="text/javascript" src="'+src+'"></'+"script>")}};goog.writeScripts_=function(){var scripts=[];var seenScript={};var deps=goog.dependencies_;function visitNode(path){if(path in deps.written)return;if(path in deps.visited){if(!(path in
seenScript)){seenScript[path]=true;scripts.push(path)}return}deps.visited[path]=true;if(path in deps.requires)for(var requireName in deps.requires[path])if(requireName in deps.nameToPath)visitNode(deps.nameToPath[requireName]);else if(!goog.getObjectByName(requireName))throw Error("Undefined nameToPath for "+requireName);if(!(path in seenScript)){seenScript[path]=true;scripts.push(path)}}for(var path in goog.included_)if(!deps.written[path])visitNode(path);for(var i=0;i<scripts.length;i++)if(scripts[i])goog.writeScriptTag_(goog.basePath+
scripts[i]);else throw Error("Undefined script input");};goog.getPathFromDeps_=function(rule){if(rule in goog.dependencies_.nameToPath)return goog.dependencies_.nameToPath[rule];else return null};goog.findBasePath_();if(!goog.global.CLOSURE_NO_DEPS)goog.writeScriptTag_(goog.basePath+"deps.js")}
goog.typeOf=function(value){var s=typeof value;if(s=="object")if(value){if(value instanceof Array||!(value instanceof Object)&&Object.prototype.toString.call(value)=="[object Array]"||typeof value.length=="number"&&typeof value.splice!="undefined"&&typeof value.propertyIsEnumerable!="undefined"&&!value.propertyIsEnumerable("splice"))return"array";if(!(value instanceof Object)&&(Object.prototype.toString.call(value)=="[object Function]"||typeof value.call!="undefined"&&typeof value.propertyIsEnumerable!=
"undefined"&&!value.propertyIsEnumerable("call")))return"function"}else return"null";else if(s=="function"&&typeof value.call=="undefined")return"object";return s};goog.propertyIsEnumerableCustom_=function(object,propName){if(propName in object)for(var key in object)if(key==propName&&Object.prototype.hasOwnProperty.call(object,propName))return true;return false};
goog.propertyIsEnumerable_=function(object,propName){if(object instanceof Object)return Object.prototype.propertyIsEnumerable.call(object,propName);else return goog.propertyIsEnumerableCustom_(object,propName)};goog.isDef=function(val){return val!==undefined};goog.isNull=function(val){return val===null};goog.isDefAndNotNull=function(val){return val!=null};goog.isArray=function(val){return goog.typeOf(val)=="array"};
goog.isArrayLike=function(val){var type=goog.typeOf(val);return type=="array"||type=="object"&&typeof val.length=="number"};goog.isDateLike=function(val){return goog.isObject(val)&&typeof val.getFullYear=="function"};goog.isString=function(val){return typeof val=="string"};goog.isBoolean=function(val){return typeof val=="boolean"};goog.isNumber=function(val){return typeof val=="number"};goog.isFunction=function(val){return goog.typeOf(val)=="function"};
goog.isObject=function(val){var type=goog.typeOf(val);return type=="object"||type=="array"||type=="function"};goog.getUid=function(obj){return obj[goog.UID_PROPERTY_]||(obj[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(obj){if("removeAttribute"in obj)obj.removeAttribute(goog.UID_PROPERTY_);try{delete obj[goog.UID_PROPERTY_]}catch(ex){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36);goog.uidCounter_=0;goog.getHashCode=goog.getUid;
goog.removeHashCode=goog.removeUid;goog.cloneObject=function(obj){var type=goog.typeOf(obj);if(type=="object"||type=="array"){if(obj.clone)return obj.clone();var clone=type=="array"?[]:{};for(var key in obj)clone[key]=goog.cloneObject(obj[key]);return clone}return obj};Object.prototype.clone;
goog.bind=function(fn,selfObj,var_args){var context=selfObj||goog.global;if(arguments.length>2){var boundArgs=Array.prototype.slice.call(arguments,2);return function(){var newArgs=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(newArgs,boundArgs);return fn.apply(context,newArgs)}}else return function(){return fn.apply(context,arguments)}};
goog.partial=function(fn,var_args){var args=Array.prototype.slice.call(arguments,1);return function(){var newArgs=Array.prototype.slice.call(arguments);newArgs.unshift.apply(newArgs,args);return fn.apply(this,newArgs)}};goog.mixin=function(target,source){for(var x in source)target[x]=source[x]};goog.now=Date.now||function(){return+new Date};
goog.globalEval=function(script){if(goog.global.execScript)goog.global.execScript(script,"JavaScript");else if(goog.global.eval){if(goog.evalWorksForGlobals_==null){goog.global.eval("var _et_ = 1;");if(typeof goog.global["_et_"]!="undefined"){delete goog.global["_et_"];goog.evalWorksForGlobals_=true}else goog.evalWorksForGlobals_=false}if(goog.evalWorksForGlobals_)goog.global.eval(script);else{var doc=goog.global.document;var scriptElt=doc.createElement("script");scriptElt.type="text/javascript";
scriptElt.defer=false;scriptElt.appendChild(doc.createTextNode(script));doc.body.appendChild(scriptElt);doc.body.removeChild(scriptElt)}}else throw Error("goog.globalEval not available");};goog.typedef=true;goog.cssNameMapping_;goog.getCssName=function(className,opt_modifier){var cssName=className+(opt_modifier?"-"+opt_modifier:"");return goog.cssNameMapping_&&cssName in goog.cssNameMapping_?goog.cssNameMapping_[cssName]:cssName};goog.setCssNameMapping=function(mapping){goog.cssNameMapping_=mapping};
goog.getMsg=function(str,opt_values){var values=opt_values||{};for(var key in values){var value=(""+values[key]).replace(/\$/g,"$$$$");str=str.replace(new RegExp("\\{\\$"+key+"\\}","gi"),value)}return str};goog.exportSymbol=function(publicPath,object,opt_objectToExportTo){goog.exportPath_(publicPath,object,opt_objectToExportTo)};goog.exportProperty=function(object,publicName,symbol){object[publicName]=symbol};
goog.inherits=function(childCtor,parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;childCtor.superClass_=parentCtor.prototype;childCtor.prototype=new tempCtor;childCtor.prototype.constructor=childCtor};
goog.base=function(me,opt_methodName,var_args){var caller=arguments.callee.caller;if(caller.superClass_)return caller.superClass_.constructor.apply(me,Array.prototype.slice.call(arguments,1));var args=Array.prototype.slice.call(arguments,2);var foundCaller=false;for(var ctor=me.constructor;ctor;ctor=ctor.superClass_&&ctor.superClass_.constructor)if(ctor.prototype[opt_methodName]===caller)foundCaller=true;else if(foundCaller)return ctor.prototype[opt_methodName].apply(me,args);if(me[opt_methodName]===
caller)return me.constructor.prototype[opt_methodName].apply(me,args);else throw Error("goog.base called from a method of one name "+"to a method of a different name");};goog.scope=function(fn){fn.call(goog.global)};goog.provide("goog.debug.RelativeTimeProvider");goog.debug.RelativeTimeProvider=function(){this.relativeTimeStart_=goog.now()};goog.debug.RelativeTimeProvider.defaultInstance_=new goog.debug.RelativeTimeProvider;goog.debug.RelativeTimeProvider.prototype.set=function(timeStamp){this.relativeTimeStart_=timeStamp};goog.debug.RelativeTimeProvider.prototype.reset=function(){this.set(goog.now())};goog.debug.RelativeTimeProvider.prototype.get=function(){return this.relativeTimeStart_};
goog.debug.RelativeTimeProvider.getDefaultInstance=function(){return goog.debug.RelativeTimeProvider.defaultInstance_};goog.provide("goog.string");goog.provide("goog.string.Unicode");goog.string.Unicode={NBSP:"\u00a0"};goog.string.startsWith=function(str,prefix){return str.lastIndexOf(prefix,0)==0};goog.string.endsWith=function(str,suffix){var l=str.length-suffix.length;return l>=0&&str.indexOf(suffix,l)==l};goog.string.caseInsensitiveStartsWith=function(str,prefix){return goog.string.caseInsensitiveCompare(prefix,str.substr(0,prefix.length))==0};
goog.string.caseInsensitiveEndsWith=function(str,suffix){return goog.string.caseInsensitiveCompare(suffix,str.substr(str.length-suffix.length,suffix.length))==0};goog.string.subs=function(str,var_args){for(var i=1;i<arguments.length;i++){var replacement=String(arguments[i]).replace(/\$/g,"$$$$");str=str.replace(/\%s/,replacement)}return str};goog.string.collapseWhitespace=function(str){return str.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")};goog.string.isEmpty=function(str){return/^[\s\xa0]*$/.test(str)};
goog.string.isEmptySafe=function(str){return goog.string.isEmpty(goog.string.makeSafe(str))};goog.string.isBreakingWhitespace=function(str){return!/[^\t\n\r ]/.test(str)};goog.string.isAlpha=function(str){return!/[^a-zA-Z]/.test(str)};goog.string.isNumeric=function(str){return!/[^0-9]/.test(str)};goog.string.isAlphaNumeric=function(str){return!/[^a-zA-Z0-9]/.test(str)};goog.string.isSpace=function(ch){return ch==" "};
goog.string.isUnicodeChar=function(ch){return ch.length==1&&ch>=" "&&ch<="~"||ch>="\u0080"&&ch<="\ufffd"};goog.string.stripNewlines=function(str){return str.replace(/(\r\n|\r|\n)+/g," ")};goog.string.canonicalizeNewlines=function(str){return str.replace(/(\r\n|\r|\n)/g,"\n")};goog.string.normalizeWhitespace=function(str){return str.replace(/\xa0|\s/g," ")};goog.string.normalizeSpaces=function(str){return str.replace(/\xa0|[ \t]+/g," ")};
goog.string.trim=function(str){return str.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")};goog.string.trimLeft=function(str){return str.replace(/^[\s\xa0]+/,"")};goog.string.trimRight=function(str){return str.replace(/[\s\xa0]+$/,"")};goog.string.caseInsensitiveCompare=function(str1,str2){var test1=String(str1).toLowerCase();var test2=String(str2).toLowerCase();if(test1<test2)return-1;else if(test1==test2)return 0;else return 1};goog.string.numerateCompareRegExp_=/(\.\d+)|(\d+)|(\D+)/g;
goog.string.numerateCompare=function(str1,str2){if(str1==str2)return 0;if(!str1)return-1;if(!str2)return 1;var tokens1=str1.toLowerCase().match(goog.string.numerateCompareRegExp_);var tokens2=str2.toLowerCase().match(goog.string.numerateCompareRegExp_);var count=Math.min(tokens1.length,tokens2.length);for(var i=0;i<count;i++){var a=tokens1[i];var b=tokens2[i];if(a!=b){var num1=parseInt(a,10);if(!isNaN(num1)){var num2=parseInt(b,10);if(!isNaN(num2)&&num1-num2)return num1-num2}return a<b?-1:1}}if(tokens1.length!=
tokens2.length)return tokens1.length-tokens2.length;return str1<str2?-1:1};goog.string.encodeUriRegExp_=/^[a-zA-Z0-9\-_.!~*'()]*$/;goog.string.urlEncode=function(str){str=String(str);if(!goog.string.encodeUriRegExp_.test(str))return encodeURIComponent(str);return str};goog.string.urlDecode=function(str){return decodeURIComponent(str.replace(/\+/g," "))};goog.string.newLineToBr=function(str,opt_xml){return str.replace(/(\r\n|\r|\n)/g,opt_xml?"<br />":"<br>")};
goog.string.htmlEscape=function(str,opt_isLikelyToContainHtmlChars){if(opt_isLikelyToContainHtmlChars)return str.replace(goog.string.amperRe_,"&amp;").replace(goog.string.ltRe_,"&lt;").replace(goog.string.gtRe_,"&gt;").replace(goog.string.quotRe_,"&quot;");else{if(!goog.string.allRe_.test(str))return str;if(str.indexOf("&")!=-1)str=str.replace(goog.string.amperRe_,"&amp;");if(str.indexOf("<")!=-1)str=str.replace(goog.string.ltRe_,"&lt;");if(str.indexOf(">")!=-1)str=str.replace(goog.string.gtRe_,"&gt;");
if(str.indexOf('"')!=-1)str=str.replace(goog.string.quotRe_,"&quot;");return str}};goog.string.amperRe_=/&/g;goog.string.ltRe_=/</g;goog.string.gtRe_=/>/g;goog.string.quotRe_=/\"/g;goog.string.allRe_=/[&<>\"]/;goog.string.unescapeEntities=function(str){if(goog.string.contains(str,"&"))if("document"in goog.global&&!goog.string.contains(str,"<"))return goog.string.unescapeEntitiesUsingDom_(str);else return goog.string.unescapePureXmlEntities_(str);return str};
goog.string.unescapeEntitiesUsingDom_=function(str){var el=goog.global["document"]["createElement"]("div");el["innerHTML"]="<pre>x"+str+"</pre>";if(el["firstChild"][goog.string.NORMALIZE_FN_])el["firstChild"][goog.string.NORMALIZE_FN_]();str=el["firstChild"]["firstChild"]["nodeValue"].slice(1);el["innerHTML"]="";return goog.string.canonicalizeNewlines(str)};
goog.string.unescapePureXmlEntities_=function(str){return str.replace(/&([^;]+);/g,function(s,entity){switch(entity){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:if(entity.charAt(0)=="#"){var n=Number("0"+entity.substr(1));if(!isNaN(n))return String.fromCharCode(n)}return s}})};goog.string.NORMALIZE_FN_="normalize";goog.string.whitespaceEscape=function(str,opt_xml){return goog.string.newLineToBr(str.replace(/  /g," &#160;"),opt_xml)};
goog.string.stripQuotes=function(str,quoteChars){var length=quoteChars.length;for(var i=0;i<length;i++){var quoteChar=length==1?quoteChars:quoteChars.charAt(i);if(str.charAt(0)==quoteChar&&str.charAt(str.length-1)==quoteChar)return str.substring(1,str.length-1)}return str};
goog.string.truncate=function(str,chars,opt_protectEscapedCharacters){if(opt_protectEscapedCharacters)str=goog.string.unescapeEntities(str);if(str.length>chars)str=str.substring(0,chars-3)+"...";if(opt_protectEscapedCharacters)str=goog.string.htmlEscape(str);return str};
goog.string.truncateMiddle=function(str,chars,opt_protectEscapedCharacters){if(opt_protectEscapedCharacters)str=goog.string.unescapeEntities(str);if(str.length>chars){var half=Math.floor(chars/2);var endPos=str.length-half;half+=chars%2;str=str.substring(0,half)+"..."+str.substring(endPos)}if(opt_protectEscapedCharacters)str=goog.string.htmlEscape(str);return str};
goog.string.specialEscapeChars_={"\u0000":"\\0","\u0008":"\\b","\u000c":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\u000b":"\\x0B",'"':'\\"',"\\":"\\\\"};goog.string.jsEscapeCache_={"'":"\\'"};goog.string.quote=function(s){s=String(s);if(s.quote)return s.quote();else{var sb=['"'];for(var i=0;i<s.length;i++){var ch=s.charAt(i);var cc=ch.charCodeAt(0);sb[i+1]=goog.string.specialEscapeChars_[ch]||(cc>31&&cc<127?ch:goog.string.escapeChar(ch))}sb.push('"');return sb.join("")}};
goog.string.escapeString=function(str){var sb=[];for(var i=0;i<str.length;i++)sb[i]=goog.string.escapeChar(str.charAt(i));return sb.join("")};
goog.string.escapeChar=function(c){if(c in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[c];if(c in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[c]=goog.string.specialEscapeChars_[c];var rv=c;var cc=c.charCodeAt(0);if(cc>31&&cc<127)rv=c;else{if(cc<256){rv="\\x";if(cc<16||cc>256)rv+="0"}else{rv="\\u";if(cc<4096)rv+="0"}rv+=cc.toString(16).toUpperCase()}return goog.string.jsEscapeCache_[c]=rv};
goog.string.toMap=function(s){var rv={};for(var i=0;i<s.length;i++)rv[s.charAt(i)]=true;return rv};goog.string.contains=function(s,ss){return s.indexOf(ss)!=-1};goog.string.removeAt=function(s,index,stringLength){var resultStr=s;if(index>=0&&index<s.length&&stringLength>0)resultStr=s.substr(0,index)+s.substr(index+stringLength,s.length-index-stringLength);return resultStr};goog.string.remove=function(s,ss){var re=new RegExp(goog.string.regExpEscape(ss),"");return s.replace(re,"")};
goog.string.removeAll=function(s,ss){var re=new RegExp(goog.string.regExpEscape(ss),"g");return s.replace(re,"")};goog.string.regExpEscape=function(s){return String(s).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")};goog.string.repeat=function(string,length){return(new Array(length+1)).join(string)};
goog.string.padNumber=function(num,length,opt_precision){var s=goog.isDef(opt_precision)?num.toFixed(opt_precision):String(num);var index=s.indexOf(".");if(index==-1)index=s.length;return goog.string.repeat("0",Math.max(0,length-index))+s};goog.string.makeSafe=function(obj){return obj==null?"":String(obj)};goog.string.buildString=function(var_args){return Array.prototype.join.call(arguments,"")};
goog.string.getRandomString=function(){return Math.floor(Math.random()*2147483648).toString(36)+(Math.floor(Math.random()*2147483648)^goog.now()).toString(36)};
goog.string.compareVersions=function(version1,version2){var order=0;var v1Subs=goog.string.trim(String(version1)).split(".");var v2Subs=goog.string.trim(String(version2)).split(".");var subCount=Math.max(v1Subs.length,v2Subs.length);for(var subIdx=0;order==0&&subIdx<subCount;subIdx++){var v1Sub=v1Subs[subIdx]||"";var v2Sub=v2Subs[subIdx]||"";var v1CompParser=new RegExp("(\\d*)(\\D*)","g");var v2CompParser=new RegExp("(\\d*)(\\D*)","g");do{var v1Comp=v1CompParser.exec(v1Sub)||["","",""];var v2Comp=
v2CompParser.exec(v2Sub)||["","",""];if(v1Comp[0].length==0&&v2Comp[0].length==0)break;var v1CompNum=v1Comp[1].length==0?0:parseInt(v1Comp[1],10);var v2CompNum=v2Comp[1].length==0?0:parseInt(v2Comp[1],10);order=goog.string.compareElements_(v1CompNum,v2CompNum)||goog.string.compareElements_(v1Comp[2].length==0,v2Comp[2].length==0)||goog.string.compareElements_(v1Comp[2],v2Comp[2])}while(order==0)}return order};
goog.string.compareElements_=function(left,right){if(left<right)return-1;else if(left>right)return 1;return 0};goog.string.HASHCODE_MAX_=4294967296;goog.string.hashCode=function(str){var result=0;for(var i=0;i<str.length;++i){result=31*result+str.charCodeAt(i);result%=goog.string.HASHCODE_MAX_}return result};goog.string.uniqueStringCounter_=Math.random()*2147483648|0;goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++};
goog.string.toNumber=function(str){var num=Number(str);if(num==0&&goog.string.isEmpty(str))return NaN;return num};goog.provide("goog.debug.Formatter");goog.provide("goog.debug.HtmlFormatter");goog.provide("goog.debug.TextFormatter");goog.require("goog.debug.RelativeTimeProvider");goog.require("goog.string");goog.debug.Formatter=function(opt_prefix){this.prefix_=opt_prefix||"";this.startTimeProvider_=goog.debug.RelativeTimeProvider.getDefaultInstance()};goog.debug.Formatter.prototype.showAbsoluteTime=true;goog.debug.Formatter.prototype.showRelativeTime=true;goog.debug.Formatter.prototype.showLoggerName=true;
goog.debug.Formatter.prototype.showExceptionText=false;goog.debug.Formatter.prototype.showSeverityLevel=false;goog.debug.Formatter.prototype.formatRecord=goog.abstractMethod;goog.debug.Formatter.prototype.setStartTimeProvider=function(provider){this.startTimeProvider_=provider};goog.debug.Formatter.prototype.getStartTimeProvider=function(){return this.startTimeProvider_};goog.debug.Formatter.prototype.resetRelativeTimeStart=function(){this.startTimeProvider_.reset()};
goog.debug.Formatter.getDateTimeStamp_=function(logRecord){var time=new Date(logRecord.getMillis());return goog.debug.Formatter.getTwoDigitString_(time.getFullYear()-2E3)+goog.debug.Formatter.getTwoDigitString_(time.getMonth()+1)+goog.debug.Formatter.getTwoDigitString_(time.getDate())+" "+goog.debug.Formatter.getTwoDigitString_(time.getHours())+":"+goog.debug.Formatter.getTwoDigitString_(time.getMinutes())+":"+goog.debug.Formatter.getTwoDigitString_(time.getSeconds())+"."+goog.debug.Formatter.getTwoDigitString_(Math.floor(time.getMilliseconds()/
10))};goog.debug.Formatter.getTwoDigitString_=function(n){if(n<10)return"0"+n;return String(n)};goog.debug.Formatter.getRelativeTime_=function(logRecord,relativeTimeStart){var ms=logRecord.getMillis()-relativeTimeStart;var sec=ms/1E3;var str=sec.toFixed(3);var spacesToPrepend=0;if(sec<1)spacesToPrepend=2;else while(sec<100){spacesToPrepend++;sec*=10}while(spacesToPrepend-- >0)str=" "+str;return str};goog.debug.HtmlFormatter=function(opt_prefix){goog.debug.Formatter.call(this,opt_prefix)};
goog.inherits(goog.debug.HtmlFormatter,goog.debug.Formatter);goog.debug.HtmlFormatter.prototype.showExceptionText=true;
goog.debug.HtmlFormatter.prototype.formatRecord=function(logRecord){var className;switch(logRecord.getLevel().value){case goog.debug.Logger.Level.SHOUT.value:className="dbg-sh";break;case goog.debug.Logger.Level.SEVERE.value:className="dbg-sev";break;case goog.debug.Logger.Level.WARNING.value:className="dbg-w";break;case goog.debug.Logger.Level.INFO.value:className="dbg-i";break;case goog.debug.Logger.Level.FINE.value:default:className="dbg-f";break}var sb=[];sb.push(this.prefix_," ");if(this.showAbsoluteTime)sb.push("[",
goog.debug.Formatter.getDateTimeStamp_(logRecord),"] ");if(this.showRelativeTime)sb.push("[",goog.string.whitespaceEscape(goog.debug.Formatter.getRelativeTime_(logRecord,this.startTimeProvider_.get())),"s] ");if(this.showLoggerName)sb.push("[",goog.string.htmlEscape(logRecord.getLoggerName()),"] ");sb.push('<span class="',className,'">',goog.string.newLineToBr(goog.string.whitespaceEscape(goog.string.htmlEscape(logRecord.getMessage()))));if(this.showExceptionText&&logRecord.getException())sb.push("<br>",
goog.string.newLineToBr(goog.string.whitespaceEscape(logRecord.getExceptionText()||"")));sb.push("</span><br>");return sb.join("")};goog.debug.TextFormatter=function(opt_prefix){goog.debug.Formatter.call(this,opt_prefix)};goog.inherits(goog.debug.TextFormatter,goog.debug.Formatter);
goog.debug.TextFormatter.prototype.formatRecord=function(logRecord){var sb=[];sb.push(this.prefix_," ");if(this.showAbsoluteTime)sb.push("[",goog.debug.Formatter.getDateTimeStamp_(logRecord),"] ");if(this.showRelativeTime)sb.push("[",goog.debug.Formatter.getRelativeTime_(logRecord,this.startTimeProvider_.get()),"s] ");if(this.showLoggerName)sb.push("[",logRecord.getLoggerName(),"] ");if(this.showSeverityLevel)sb.push("[",logRecord.getLevel().name,"] ");sb.push(logRecord.getMessage(),"\n");if(this.showExceptionText&&
logRecord.getException())sb.push(logRecord.getExceptionText(),"\n");return sb.join("")};goog.provide("goog.debug.Error");goog.debug.Error=function(opt_msg){this.stack=(new Error).stack||"";if(opt_msg)this.message=String(opt_msg)};goog.inherits(goog.debug.Error,Error);goog.debug.Error.prototype.name="CustomError";goog.provide("goog.asserts");goog.provide("goog.asserts.AssertionError");goog.require("goog.debug.Error");goog.require("goog.string");goog.asserts.ENABLE_ASSERTS=goog.DEBUG;goog.asserts.AssertionError=function(messagePattern,messageArgs){messageArgs.unshift(messagePattern);goog.debug.Error.call(this,goog.string.subs.apply(null,messageArgs));messageArgs.shift();this.messagePattern=messagePattern};goog.inherits(goog.asserts.AssertionError,goog.debug.Error);
goog.asserts.AssertionError.prototype.name="AssertionError";goog.asserts.doAssertFailure_=function(defaultMessage,defaultArgs,givenMessage,givenArgs){var message="Assertion failed";if(givenMessage){message+=": "+givenMessage;var args=givenArgs}else if(defaultMessage){message+=": "+defaultMessage;args=defaultArgs}throw new goog.asserts.AssertionError(""+message,args||[]);};
goog.asserts.assert=function(condition,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!condition)goog.asserts.doAssertFailure_("",null,opt_message,Array.prototype.slice.call(arguments,2));return condition};goog.asserts.fail=function(opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS)throw new goog.asserts.AssertionError("Failure"+(opt_message?": "+opt_message:""),Array.prototype.slice.call(arguments,1));};
goog.asserts.assertNumber=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(value))goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return value};
goog.asserts.assertString=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isString(value))goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return value};
goog.asserts.assertFunction=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(value))goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return value};
goog.asserts.assertObject=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isObject(value))goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return value};
goog.asserts.assertArray=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isArray(value))goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return value};
goog.asserts.assertBoolean=function(value,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(value))goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(value),value],opt_message,Array.prototype.slice.call(arguments,2));return value};
goog.asserts.assertInstanceof=function(value,type,opt_message,var_args){if(goog.asserts.ENABLE_ASSERTS&&!(value instanceof type))goog.asserts.doAssertFailure_("instanceof check failed.",null,opt_message,Array.prototype.slice.call(arguments,3))};goog.provide("goog.array");goog.require("goog.asserts");goog.array.ArrayLike;goog.array.peek=function(array){return array[array.length-1]};goog.array.ARRAY_PROTOTYPE_=Array.prototype;
goog.array.indexOf=goog.array.ARRAY_PROTOTYPE_.indexOf?function(arr,obj,opt_fromIndex){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.indexOf.call(arr,obj,opt_fromIndex)}:function(arr,obj,opt_fromIndex){var fromIndex=opt_fromIndex==null?0:opt_fromIndex<0?Math.max(0,arr.length+opt_fromIndex):opt_fromIndex;if(goog.isString(arr)){if(!goog.isString(obj)||obj.length!=1)return-1;return arr.indexOf(obj,fromIndex)}for(var i=fromIndex;i<arr.length;i++)if(i in arr&&arr[i]===obj)return i;
return-1};
goog.array.lastIndexOf=goog.array.ARRAY_PROTOTYPE_.lastIndexOf?function(arr,obj,opt_fromIndex){goog.asserts.assert(arr.length!=null);var fromIndex=opt_fromIndex==null?arr.length-1:opt_fromIndex;return goog.array.ARRAY_PROTOTYPE_.lastIndexOf.call(arr,obj,fromIndex)}:function(arr,obj,opt_fromIndex){var fromIndex=opt_fromIndex==null?arr.length-1:opt_fromIndex;if(fromIndex<0)fromIndex=Math.max(0,arr.length+fromIndex);if(goog.isString(arr)){if(!goog.isString(obj)||obj.length!=1)return-1;return arr.lastIndexOf(obj,fromIndex)}for(var i=
fromIndex;i>=0;i--)if(i in arr&&arr[i]===obj)return i;return-1};goog.array.forEach=goog.array.ARRAY_PROTOTYPE_.forEach?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);goog.array.ARRAY_PROTOTYPE_.forEach.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++)if(i in arr2)f.call(opt_obj,arr2[i],i,arr)};
goog.array.forEachRight=function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=l-1;i>=0;--i)if(i in arr2)f.call(opt_obj,arr2[i],i,arr)};
goog.array.filter=goog.array.ARRAY_PROTOTYPE_.filter?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.filter.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var res=[];var resLength=0;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++)if(i in arr2){var val=arr2[i];if(f.call(opt_obj,val,i,arr))res[resLength++]=val}return res};
goog.array.map=goog.array.ARRAY_PROTOTYPE_.map?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.map.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var res=new Array(l);var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++)if(i in arr2)res[i]=f.call(opt_obj,arr2[i],i,arr);return res};
goog.array.reduce=function(arr,f,val,opt_obj){if(arr.reduce)if(opt_obj)return arr.reduce(goog.bind(f,opt_obj),val);else return arr.reduce(f,val);var rval=val;goog.array.forEach(arr,function(val,index){rval=f.call(opt_obj,rval,val,index,arr)});return rval};
goog.array.reduceRight=function(arr,f,val,opt_obj){if(arr.reduceRight)if(opt_obj)return arr.reduceRight(goog.bind(f,opt_obj),val);else return arr.reduceRight(f,val);var rval=val;goog.array.forEachRight(arr,function(val,index){rval=f.call(opt_obj,rval,val,index,arr)});return rval};
goog.array.some=goog.array.ARRAY_PROTOTYPE_.some?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.some.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++)if(i in arr2&&f.call(opt_obj,arr2[i],i,arr))return true;return false};
goog.array.every=goog.array.ARRAY_PROTOTYPE_.every?function(arr,f,opt_obj){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.every.call(arr,f,opt_obj)}:function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++)if(i in arr2&&!f.call(opt_obj,arr2[i],i,arr))return false;return true};goog.array.find=function(arr,f,opt_obj){var i=goog.array.findIndex(arr,f,opt_obj);return i<0?null:goog.isString(arr)?arr.charAt(i):arr[i]};
goog.array.findIndex=function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=0;i<l;i++)if(i in arr2&&f.call(opt_obj,arr2[i],i,arr))return i;return-1};goog.array.findRight=function(arr,f,opt_obj){var i=goog.array.findIndexRight(arr,f,opt_obj);return i<0?null:goog.isString(arr)?arr.charAt(i):arr[i]};
goog.array.findIndexRight=function(arr,f,opt_obj){var l=arr.length;var arr2=goog.isString(arr)?arr.split(""):arr;for(var i=l-1;i>=0;i--)if(i in arr2&&f.call(opt_obj,arr2[i],i,arr))return i;return-1};goog.array.contains=function(arr,obj){return goog.array.indexOf(arr,obj)>=0};goog.array.isEmpty=function(arr){return arr.length==0};goog.array.clear=function(arr){if(!goog.isArray(arr))for(var i=arr.length-1;i>=0;i--)delete arr[i];arr.length=0};
goog.array.insert=function(arr,obj){if(!goog.array.contains(arr,obj))arr.push(obj)};goog.array.insertAt=function(arr,obj,opt_i){goog.array.splice(arr,opt_i,0,obj)};goog.array.insertArrayAt=function(arr,elementsToAdd,opt_i){goog.partial(goog.array.splice,arr,opt_i,0).apply(null,elementsToAdd)};goog.array.insertBefore=function(arr,obj,opt_obj2){var i;if(arguments.length==2||(i=goog.array.indexOf(arr,opt_obj2))<0)arr.push(obj);else goog.array.insertAt(arr,obj,i)};
goog.array.remove=function(arr,obj){var i=goog.array.indexOf(arr,obj);var rv;if(rv=i>=0)goog.array.removeAt(arr,i);return rv};goog.array.removeAt=function(arr,i){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.splice.call(arr,i,1).length==1};goog.array.removeIf=function(arr,f,opt_obj){var i=goog.array.findIndex(arr,f,opt_obj);if(i>=0){goog.array.removeAt(arr,i);return true}return false};
goog.array.concat=function(var_args){return goog.array.ARRAY_PROTOTYPE_.concat.apply(goog.array.ARRAY_PROTOTYPE_,arguments)};goog.array.clone=function(arr){if(goog.isArray(arr))return goog.array.concat(arr);else{var rv=[];for(var i=0,len=arr.length;i<len;i++)rv[i]=arr[i];return rv}};goog.array.toArray=function(object){if(goog.isArray(object))return goog.array.concat(object);return goog.array.clone(object)};
goog.array.extend=function(arr1,var_args){for(var i=1;i<arguments.length;i++){var arr2=arguments[i];var isArrayLike;if(goog.isArray(arr2)||(isArrayLike=goog.isArrayLike(arr2))&&arr2.hasOwnProperty("callee"))arr1.push.apply(arr1,arr2);else if(isArrayLike){var len1=arr1.length;var len2=arr2.length;for(var j=0;j<len2;j++)arr1[len1+j]=arr2[j]}else arr1.push(arr2)}};
goog.array.splice=function(arr,index,howMany,var_args){goog.asserts.assert(arr.length!=null);return goog.array.ARRAY_PROTOTYPE_.splice.apply(arr,goog.array.slice(arguments,1))};goog.array.slice=function(arr,start,opt_end){goog.asserts.assert(arr.length!=null);if(arguments.length<=2)return goog.array.ARRAY_PROTOTYPE_.slice.call(arr,start);else return goog.array.ARRAY_PROTOTYPE_.slice.call(arr,start,opt_end)};
goog.array.removeDuplicates=function(arr,opt_rv){var rv=opt_rv||arr;var seen={},cursorInsert=0,cursorRead=0;while(cursorRead<arr.length){var current=arr[cursorRead++];var uid=goog.isObject(current)?goog.getUid(current):current;if(!Object.prototype.hasOwnProperty.call(seen,uid)){seen[uid]=true;rv[cursorInsert++]=current}}rv.length=cursorInsert};goog.array.binarySearch=function(arr,target,opt_compareFn){return goog.array.binarySearch_(arr,opt_compareFn||goog.array.defaultCompare,false,target)};
goog.array.binarySelect=function(arr,evaluator,opt_obj){return goog.array.binarySearch_(arr,evaluator,true,undefined,opt_obj)};
goog.array.binarySearch_=function(arr,compareFn,isEvaluator,opt_target,opt_selfObj){var left=0;var right=arr.length;var found;while(left<right){var middle=left+right>>1;var compareResult;if(isEvaluator)compareResult=compareFn.call(opt_selfObj,arr[middle],middle,arr);else compareResult=compareFn(opt_target,arr[middle]);if(compareResult>0)left=middle+1;else{right=middle;found=!compareResult}}return found?left:~left};
goog.array.sort=function(arr,opt_compareFn){goog.asserts.assert(arr.length!=null);goog.array.ARRAY_PROTOTYPE_.sort.call(arr,opt_compareFn||goog.array.defaultCompare)};
goog.array.stableSort=function(arr,opt_compareFn){for(var i=0;i<arr.length;i++)arr[i]={index:i,value:arr[i]};var valueCompareFn=opt_compareFn||goog.array.defaultCompare;function stableCompareFn(obj1,obj2){return valueCompareFn(obj1.value,obj2.value)||obj1.index-obj2.index}goog.array.sort(arr,stableCompareFn);for(var i=0;i<arr.length;i++)arr[i]=arr[i].value};
goog.array.sortObjectsByKey=function(arr,key,opt_compareFn){var compare=opt_compareFn||goog.array.defaultCompare;goog.array.sort(arr,function(a,b){return compare(a[key],b[key])})};goog.array.equals=function(arr1,arr2,opt_equalsFn){if(!goog.isArrayLike(arr1)||!goog.isArrayLike(arr2)||arr1.length!=arr2.length)return false;var l=arr1.length;var equalsFn=opt_equalsFn||goog.array.defaultCompareEquality;for(var i=0;i<l;i++)if(!equalsFn(arr1[i],arr2[i]))return false;return true};
goog.array.compare=function(arr1,arr2,opt_equalsFn){return goog.array.equals(arr1,arr2,opt_equalsFn)};goog.array.defaultCompare=function(a,b){return a>b?1:a<b?-1:0};goog.array.defaultCompareEquality=function(a,b){return a===b};goog.array.binaryInsert=function(array,value,opt_compareFn){var index=goog.array.binarySearch(array,value,opt_compareFn);if(index<0){goog.array.insertAt(array,value,-(index+1));return true}return false};
goog.array.binaryRemove=function(array,value,opt_compareFn){var index=goog.array.binarySearch(array,value,opt_compareFn);return index>=0?goog.array.removeAt(array,index):false};goog.array.bucket=function(array,sorter){var buckets={};for(var i=0;i<array.length;i++){var value=array[i];var key=sorter(value,i,array);if(goog.isDef(key)){var bucket=buckets[key]||(buckets[key]=[]);bucket.push(value)}}return buckets};goog.array.repeat=function(value,n){var array=[];for(var i=0;i<n;i++)array[i]=value;return array};
goog.array.flatten=function(var_args){var result=[];for(var i=0;i<arguments.length;i++){var element=arguments[i];if(goog.isArray(element))result.push.apply(result,goog.array.flatten.apply(null,element));else result.push(element)}return result};goog.array.rotate=function(array,n){goog.asserts.assert(array.length!=null);if(array.length){n%=array.length;if(n>0)goog.array.ARRAY_PROTOTYPE_.unshift.apply(array,array.splice(-n,n));else if(n<0)goog.array.ARRAY_PROTOTYPE_.push.apply(array,array.splice(0,-n))}return array};
goog.array.zip=function(var_args){if(!arguments.length)return[];var result=[];for(var i=0;true;i++){var value=[];for(var j=0;j<arguments.length;j++){var arr=arguments[j];if(i>=arr.length)return result;value.push(arr[i])}result.push(value)}};goog.provide("goog.object");goog.object.forEach=function(obj,f,opt_obj){for(var key in obj)f.call(opt_obj,obj[key],key,obj)};goog.object.filter=function(obj,f,opt_obj){var res={};for(var key in obj)if(f.call(opt_obj,obj[key],key,obj))res[key]=obj[key];return res};goog.object.map=function(obj,f,opt_obj){var res={};for(var key in obj)res[key]=f.call(opt_obj,obj[key],key,obj);return res};goog.object.some=function(obj,f,opt_obj){for(var key in obj)if(f.call(opt_obj,obj[key],key,obj))return true;return false};
goog.object.every=function(obj,f,opt_obj){for(var key in obj)if(!f.call(opt_obj,obj[key],key,obj))return false;return true};goog.object.getCount=function(obj){var rv=0;for(var key in obj)rv++;return rv};goog.object.getAnyKey=function(obj){for(var key in obj)return key};goog.object.getAnyValue=function(obj){for(var key in obj)return obj[key]};goog.object.contains=function(obj,val){return goog.object.containsValue(obj,val)};
goog.object.getValues=function(obj){var res=[];var i=0;for(var key in obj)res[i++]=obj[key];return res};goog.object.getKeys=function(obj){var res=[];var i=0;for(var key in obj)res[i++]=key;return res};goog.object.containsKey=function(obj,key){return key in obj};goog.object.containsValue=function(obj,val){for(var key in obj)if(obj[key]==val)return true;return false};goog.object.findKey=function(obj,f,opt_this){for(var key in obj)if(f.call(opt_this,obj[key],key,obj))return key;return undefined};
goog.object.findValue=function(obj,f,opt_this){var key=goog.object.findKey(obj,f,opt_this);return key&&obj[key]};goog.object.isEmpty=function(obj){for(var key in obj)return false;return true};goog.object.clear=function(obj){var keys=goog.object.getKeys(obj);for(var i=keys.length-1;i>=0;i--)goog.object.remove(obj,keys[i])};goog.object.remove=function(obj,key){var rv;if(rv=key in obj)delete obj[key];return rv};
goog.object.add=function(obj,key,val){if(key in obj)throw Error('The object already contains the key "'+key+'"');goog.object.set(obj,key,val)};goog.object.get=function(obj,key,opt_val){if(key in obj)return obj[key];return opt_val};goog.object.set=function(obj,key,value){obj[key]=value};goog.object.setIfUndefined=function(obj,key,value){return key in obj?obj[key]:obj[key]=value};goog.object.clone=function(obj){var res={};for(var key in obj)res[key]=obj[key];return res};
goog.object.transpose=function(obj){var transposed={};for(var key in obj)transposed[obj[key]]=key;return transposed};goog.object.PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];
goog.object.extend=function(target,var_args){var key,source;for(var i=1;i<arguments.length;i++){source=arguments[i];for(key in source)target[key]=source[key];for(var j=0;j<goog.object.PROTOTYPE_FIELDS_.length;j++){key=goog.object.PROTOTYPE_FIELDS_[j];if(Object.prototype.hasOwnProperty.call(source,key))target[key]=source[key]}}};
goog.object.create=function(var_args){var argLength=arguments.length;if(argLength==1&&goog.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(argLength%2)throw Error("Uneven number of arguments");var rv={};for(var i=0;i<argLength;i+=2)rv[arguments[i]]=arguments[i+1];return rv};
goog.object.createSet=function(var_args){var argLength=arguments.length;if(argLength==1&&goog.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);var rv={};for(var i=0;i<argLength;i++)rv[arguments[i]]=true;return rv};goog.provide("goog.structs");goog.require("goog.array");goog.require("goog.object");goog.structs.getCount=function(col){if(typeof col.getCount=="function")return col.getCount();if(goog.isArrayLike(col)||goog.isString(col))return col.length;return goog.object.getCount(col)};
goog.structs.getValues=function(col){if(typeof col.getValues=="function")return col.getValues();if(goog.isString(col))return col.split("");if(goog.isArrayLike(col)){var rv=[];var l=col.length;for(var i=0;i<l;i++)rv.push(col[i]);return rv}return goog.object.getValues(col)};
goog.structs.getKeys=function(col){if(typeof col.getKeys=="function")return col.getKeys();if(typeof col.getValues=="function")return undefined;if(goog.isArrayLike(col)||goog.isString(col)){var rv=[];var l=col.length;for(var i=0;i<l;i++)rv.push(i);return rv}return goog.object.getKeys(col)};
goog.structs.contains=function(col,val){if(typeof col.contains=="function")return col.contains(val);if(typeof col.containsValue=="function")return col.containsValue(val);if(goog.isArrayLike(col)||goog.isString(col))return goog.array.contains(col,val);return goog.object.containsValue(col,val)};goog.structs.isEmpty=function(col){if(typeof col.isEmpty=="function")return col.isEmpty();if(goog.isArrayLike(col)||goog.isString(col))return goog.array.isEmpty(col);return goog.object.isEmpty(col)};
goog.structs.clear=function(col){if(typeof col.clear=="function")col.clear();else if(goog.isArrayLike(col))goog.array.clear(col);else goog.object.clear(col)};
goog.structs.forEach=function(col,f,opt_obj){if(typeof col.forEach=="function")col.forEach(f,opt_obj);else if(goog.isArrayLike(col)||goog.isString(col))goog.array.forEach(col,f,opt_obj);else{var keys=goog.structs.getKeys(col);var values=goog.structs.getValues(col);var l=values.length;for(var i=0;i<l;i++)f.call(opt_obj,values[i],keys&&keys[i],col)}};
goog.structs.filter=function(col,f,opt_obj){if(typeof col.filter=="function")return col.filter(f,opt_obj);if(goog.isArrayLike(col)||goog.isString(col))return goog.array.filter(col,f,opt_obj);var rv;var keys=goog.structs.getKeys(col);var values=goog.structs.getValues(col);var l=values.length;if(keys){rv={};for(var i=0;i<l;i++)if(f.call(opt_obj,values[i],keys[i],col))rv[keys[i]]=values[i]}else{rv=[];for(var i=0;i<l;i++)if(f.call(opt_obj,values[i],undefined,col))rv.push(values[i])}return rv};
goog.structs.map=function(col,f,opt_obj){if(typeof col.map=="function")return col.map(f,opt_obj);if(goog.isArrayLike(col)||goog.isString(col))return goog.array.map(col,f,opt_obj);var rv;var keys=goog.structs.getKeys(col);var values=goog.structs.getValues(col);var l=values.length;if(keys){rv={};for(var i=0;i<l;i++)rv[keys[i]]=f.call(opt_obj,values[i],keys[i],col)}else{rv=[];for(var i=0;i<l;i++)rv[i]=f.call(opt_obj,values[i],undefined,col)}return rv};
goog.structs.some=function(col,f,opt_obj){if(typeof col.some=="function")return col.some(f,opt_obj);if(goog.isArrayLike(col)||goog.isString(col))return goog.array.some(col,f,opt_obj);var keys=goog.structs.getKeys(col);var values=goog.structs.getValues(col);var l=values.length;for(var i=0;i<l;i++)if(f.call(opt_obj,values[i],keys&&keys[i],col))return true;return false};
goog.structs.every=function(col,f,opt_obj){if(typeof col.every=="function")return col.every(f,opt_obj);if(goog.isArrayLike(col)||goog.isString(col))return goog.array.every(col,f,opt_obj);var keys=goog.structs.getKeys(col);var values=goog.structs.getValues(col);var l=values.length;for(var i=0;i<l;i++)if(!f.call(opt_obj,values[i],keys&&keys[i],col))return false;return true};goog.provide("goog.iter");goog.provide("goog.iter.Iterator");goog.provide("goog.iter.StopIteration");goog.require("goog.array");goog.iter.Iterable;if("StopIteration"in goog.global)goog.iter.StopIteration=goog.global["StopIteration"];else goog.iter.StopIteration=Error("StopIteration");goog.iter.Iterator=function(){};goog.iter.Iterator.prototype.next=function(){throw goog.iter.StopIteration;};goog.iter.Iterator.prototype.__iterator__=function(opt_keys){return this};
goog.iter.toIterator=function(iterable){if(iterable instanceof goog.iter.Iterator)return iterable;if(typeof iterable.__iterator__=="function")return iterable.__iterator__(false);if(goog.isArrayLike(iterable)){var i=0;var newIter=new goog.iter.Iterator;newIter.next=function(){while(true){if(i>=iterable.length)throw goog.iter.StopIteration;if(!(i in iterable)){i++;continue}return iterable[i++]}};return newIter}throw Error("Not implemented");};
goog.iter.forEach=function(iterable,f,opt_obj){if(goog.isArrayLike(iterable))try{goog.array.forEach(iterable,f,opt_obj)}catch(ex){if(ex!==goog.iter.StopIteration)throw ex;}else{iterable=goog.iter.toIterator(iterable);try{while(true)f.call(opt_obj,iterable.next(),undefined,iterable)}catch(ex){if(ex!==goog.iter.StopIteration)throw ex;}}};
goog.iter.filter=function(iterable,f,opt_obj){iterable=goog.iter.toIterator(iterable);var newIter=new goog.iter.Iterator;newIter.next=function(){while(true){var val=iterable.next();if(f.call(opt_obj,val,undefined,iterable))return val}};return newIter};
goog.iter.range=function(startOrStop,opt_stop,opt_step){var start=0;var stop=startOrStop;var step=opt_step||1;if(arguments.length>1){start=startOrStop;stop=opt_stop}if(step==0)throw Error("Range step argument must not be zero");var newIter=new goog.iter.Iterator;newIter.next=function(){if(step>0&&start>=stop||step<0&&start<=stop)throw goog.iter.StopIteration;var rv=start;start+=step;return rv};return newIter};goog.iter.join=function(iterable,deliminator){return goog.iter.toArray(iterable).join(deliminator)};
goog.iter.map=function(iterable,f,opt_obj){iterable=goog.iter.toIterator(iterable);var newIter=new goog.iter.Iterator;newIter.next=function(){while(true){var val=iterable.next();return f.call(opt_obj,val,undefined,iterable)}};return newIter};goog.iter.reduce=function(iterable,f,val,opt_obj){var rval=val;goog.iter.forEach(iterable,function(val){rval=f.call(opt_obj,rval,val)});return rval};
goog.iter.some=function(iterable,f,opt_obj){iterable=goog.iter.toIterator(iterable);try{while(true)if(f.call(opt_obj,iterable.next(),undefined,iterable))return true}catch(ex){if(ex!==goog.iter.StopIteration)throw ex;}return false};goog.iter.every=function(iterable,f,opt_obj){iterable=goog.iter.toIterator(iterable);try{while(true)if(!f.call(opt_obj,iterable.next(),undefined,iterable))return false}catch(ex){if(ex!==goog.iter.StopIteration)throw ex;}return true};
goog.iter.chain=function(var_args){var args=arguments;var length=args.length;var i=0;var newIter=new goog.iter.Iterator;newIter.next=function(){try{if(i>=length)throw goog.iter.StopIteration;var current=goog.iter.toIterator(args[i]);return current.next()}catch(ex){if(ex!==goog.iter.StopIteration||i>=length)throw ex;else{i++;return this.next()}}};return newIter};
goog.iter.dropWhile=function(iterable,f,opt_obj){iterable=goog.iter.toIterator(iterable);var newIter=new goog.iter.Iterator;var dropping=true;newIter.next=function(){while(true){var val=iterable.next();if(dropping&&f.call(opt_obj,val,undefined,iterable))continue;else dropping=false;return val}};return newIter};
goog.iter.takeWhile=function(iterable,f,opt_obj){iterable=goog.iter.toIterator(iterable);var newIter=new goog.iter.Iterator;var taking=true;newIter.next=function(){while(true)if(taking){var val=iterable.next();if(f.call(opt_obj,val,undefined,iterable))return val;else taking=false}else throw goog.iter.StopIteration;};return newIter};
goog.iter.toArray=function(iterable){if(goog.isArrayLike(iterable))return goog.array.toArray(iterable);iterable=goog.iter.toIterator(iterable);var array=[];goog.iter.forEach(iterable,function(val){array.push(val)});return array};
goog.iter.equals=function(iterable1,iterable2){iterable1=goog.iter.toIterator(iterable1);iterable2=goog.iter.toIterator(iterable2);var b1,b2;try{while(true){b1=b2=false;var val1=iterable1.next();b1=true;var val2=iterable2.next();b2=true;if(val1!=val2)return false}}catch(ex){if(ex!==goog.iter.StopIteration)throw ex;else{if(b1&&!b2)return false;if(!b2)try{val2=iterable2.next();return false}catch(ex1){if(ex1!==goog.iter.StopIteration)throw ex1;return true}}}return false};
goog.iter.nextOrValue=function(iterable,defaultValue){try{return goog.iter.toIterator(iterable).next()}catch(e){if(e!=goog.iter.StopIteration)throw e;return defaultValue}};goog.provide("goog.structs.Map");goog.require("goog.iter.Iterator");goog.require("goog.iter.StopIteration");goog.require("goog.object");goog.require("goog.structs");goog.structs.Map=function(opt_map,var_args){this.map_={};this.keys_=[];var argLength=arguments.length;if(argLength>1){if(argLength%2)throw Error("Uneven number of arguments");for(var i=0;i<argLength;i+=2)this.set(arguments[i],arguments[i+1])}else if(opt_map)this.addAll(opt_map)};goog.structs.Map.prototype.count_=0;
goog.structs.Map.prototype.version_=0;goog.structs.Map.prototype.getCount=function(){return this.count_};goog.structs.Map.prototype.getValues=function(){this.cleanupKeysArray_();var rv=[];for(var i=0;i<this.keys_.length;i++){var key=this.keys_[i];rv.push(this.map_[key])}return rv};goog.structs.Map.prototype.getKeys=function(){this.cleanupKeysArray_();return this.keys_.concat()};goog.structs.Map.prototype.containsKey=function(key){return goog.structs.Map.hasKey_(this.map_,key)};
goog.structs.Map.prototype.containsValue=function(val){for(var i=0;i<this.keys_.length;i++){var key=this.keys_[i];if(goog.structs.Map.hasKey_(this.map_,key)&&this.map_[key]==val)return true}return false};
goog.structs.Map.prototype.equals=function(otherMap,opt_equalityFn){if(this===otherMap)return true;if(this.count_!=otherMap.getCount())return false;var equalityFn=opt_equalityFn||goog.structs.Map.defaultEquals;this.cleanupKeysArray_();for(var key,i=0;key=this.keys_[i];i++)if(!equalityFn(this.get(key),otherMap.get(key)))return false;return true};goog.structs.Map.defaultEquals=function(a,b){return a===b};goog.structs.Map.prototype.isEmpty=function(){return this.count_==0};
goog.structs.Map.prototype.clear=function(){this.map_={};this.keys_.length=0;this.count_=0;this.version_=0};goog.structs.Map.prototype.remove=function(key){if(goog.structs.Map.hasKey_(this.map_,key)){delete this.map_[key];this.count_--;this.version_++;if(this.keys_.length>2*this.count_)this.cleanupKeysArray_();return true}return false};
goog.structs.Map.prototype.cleanupKeysArray_=function(){if(this.count_!=this.keys_.length){var srcIndex=0;var destIndex=0;while(srcIndex<this.keys_.length){var key=this.keys_[srcIndex];if(goog.structs.Map.hasKey_(this.map_,key))this.keys_[destIndex++]=key;srcIndex++}this.keys_.length=destIndex}if(this.count_!=this.keys_.length){var seen={};var srcIndex=0;var destIndex=0;while(srcIndex<this.keys_.length){var key=this.keys_[srcIndex];if(!goog.structs.Map.hasKey_(seen,key)){this.keys_[destIndex++]=key;
seen[key]=1}srcIndex++}this.keys_.length=destIndex}};goog.structs.Map.prototype.get=function(key,opt_val){if(goog.structs.Map.hasKey_(this.map_,key))return this.map_[key];return opt_val};goog.structs.Map.prototype.set=function(key,value){if(!goog.structs.Map.hasKey_(this.map_,key)){this.count_++;this.keys_.push(key);this.version_++}this.map_[key]=value};
goog.structs.Map.prototype.addAll=function(map){var keys,values;if(map instanceof goog.structs.Map){keys=map.getKeys();values=map.getValues()}else{keys=goog.object.getKeys(map);values=goog.object.getValues(map)}for(var i=0;i<keys.length;i++)this.set(keys[i],values[i])};goog.structs.Map.prototype.clone=function(){return new goog.structs.Map(this)};
goog.structs.Map.prototype.transpose=function(){var transposed=new goog.structs.Map;for(var i=0;i<this.keys_.length;i++){var key=this.keys_[i];var value=this.map_[key];transposed.set(value,key)}return transposed};goog.structs.Map.prototype.toObject=function(){this.cleanupKeysArray_();var obj={};for(var i=0;i<this.keys_.length;i++){var key=this.keys_[i];obj[key]=this.map_[key]}return obj};goog.structs.Map.prototype.getKeyIterator=function(){return this.__iterator__(true)};
goog.structs.Map.prototype.getValueIterator=function(){return this.__iterator__(false)};
goog.structs.Map.prototype.__iterator__=function(opt_keys){this.cleanupKeysArray_();var i=0;var keys=this.keys_;var map=this.map_;var version=this.version_;var selfObj=this;var newIter=new goog.iter.Iterator;newIter.next=function(){while(true){if(version!=selfObj.version_)throw Error("The map has changed since the iterator was created");if(i>=keys.length)throw goog.iter.StopIteration;var key=keys[i++];return opt_keys?key:map[key]}};return newIter};
goog.structs.Map.hasKey_=function(obj,key){return Object.prototype.hasOwnProperty.call(obj,key)};goog.provide("goog.structs.Set");goog.require("goog.structs");goog.require("goog.structs.Map");goog.structs.Set=function(opt_values){this.map_=new goog.structs.Map;if(opt_values)this.addAll(opt_values)};goog.structs.Set.getKey_=function(val){var type=typeof val;if(type=="object"&&val||type=="function")return"o"+goog.getUid(val);else return type.substr(0,1)+val};goog.structs.Set.prototype.getCount=function(){return this.map_.getCount()};
goog.structs.Set.prototype.add=function(element){this.map_.set(goog.structs.Set.getKey_(element),element)};goog.structs.Set.prototype.addAll=function(col){var values=goog.structs.getValues(col);var l=values.length;for(var i=0;i<l;i++)this.add(values[i])};goog.structs.Set.prototype.removeAll=function(col){var values=goog.structs.getValues(col);var l=values.length;for(var i=0;i<l;i++)this.remove(values[i])};goog.structs.Set.prototype.remove=function(element){return this.map_.remove(goog.structs.Set.getKey_(element))};
goog.structs.Set.prototype.clear=function(){this.map_.clear()};goog.structs.Set.prototype.isEmpty=function(){return this.map_.isEmpty()};goog.structs.Set.prototype.contains=function(element){return this.map_.containsKey(goog.structs.Set.getKey_(element))};goog.structs.Set.prototype.containsAll=function(col){return goog.structs.every(col,this.contains,this)};
goog.structs.Set.prototype.intersection=function(col){var result=new goog.structs.Set;var values=goog.structs.getValues(col);for(var i=0;i<values.length;i++){var value=values[i];if(this.contains(value))result.add(value)}return result};goog.structs.Set.prototype.getValues=function(){return this.map_.getValues()};goog.structs.Set.prototype.clone=function(){return new goog.structs.Set(this)};goog.structs.Set.prototype.equals=function(col){return this.getCount()==goog.structs.getCount(col)&&this.isSubsetOf(col)};
goog.structs.Set.prototype.isSubsetOf=function(col){var colCount=goog.structs.getCount(col);if(this.getCount()>colCount)return false;if(!(col instanceof goog.structs.Set)&&colCount>5)col=new goog.structs.Set(col);return goog.structs.every(this,function(value){return goog.structs.contains(col,value)})};goog.structs.Set.prototype.__iterator__=function(opt_keys){return this.map_.__iterator__(false)};goog.provide("goog.debug");goog.require("goog.array");goog.require("goog.string");goog.require("goog.structs.Set");goog.debug.catchErrors=function(logFunc,opt_cancel,opt_target){var target=opt_target||goog.global;var oldErrorHandler=target.onerror;target.onerror=function(message,url,line){if(oldErrorHandler)oldErrorHandler(message,url,line);logFunc({message:message,fileName:url,line:line});return Boolean(opt_cancel)}};
goog.debug.expose=function(obj,opt_showFn){if(typeof obj=="undefined")return"undefined";if(obj==null)return"NULL";var str=[];for(var x in obj){if(!opt_showFn&&goog.isFunction(obj[x]))continue;var s=x+" = ";try{s+=obj[x]}catch(e){s+="*** "+e+" ***"}str.push(s)}return str.join("\n")};
goog.debug.deepExpose=function(obj,opt_showFn){var previous=new goog.structs.Set;var str=[];var helper=function(obj,space){var nestspace=space+"  ";var indentMultiline=function(str){return str.replace(/\n/g,"\n"+space)};try{if(!goog.isDef(obj))str.push("undefined");else if(goog.isNull(obj))str.push("NULL");else if(goog.isString(obj))str.push('"'+indentMultiline(obj)+'"');else if(goog.isFunction(obj))str.push(indentMultiline(String(obj)));else if(goog.isObject(obj))if(previous.contains(obj))str.push("*** reference loop detected ***");
else{previous.add(obj);str.push("{");for(var x in obj){if(!opt_showFn&&goog.isFunction(obj[x]))continue;str.push("\n");str.push(nestspace);str.push(x+" = ");helper(obj[x],nestspace)}str.push("\n"+space+"}")}else str.push(obj)}catch(e){str.push("*** "+e+" ***")}};helper(obj,"");return str.join("")};goog.debug.exposeArray=function(arr){var str=[];for(var i=0;i<arr.length;i++)if(goog.isArray(arr[i]))str.push(goog.debug.exposeArray(arr[i]));else str.push(arr[i]);return"[ "+str.join(", ")+" ]"};
goog.debug.exposeException=function(err,opt_fn){try{var e=goog.debug.normalizeErrorObject(err);var error="Message: "+goog.string.htmlEscape(e.message)+'\nUrl: <a href="view-source:'+e.fileName+'" target="_new">'+e.fileName+"</a>\nLine: "+e.lineNumber+"\n\nBrowser stack:\n"+goog.string.htmlEscape(e.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+goog.string.htmlEscape(goog.debug.getStacktrace(opt_fn)+"-> ");return error}catch(e2){return"Exception trying to expose exception! You win, we lose. "+e2}};
goog.debug.normalizeErrorObject=function(err){var href=goog.getObjectByName("window.location.href");return typeof err=="string"?{message:err,name:"Unknown error",lineNumber:"Not available",fileName:href,stack:"Not available"}:!err.lineNumber||!err.fileName||!err.stack?{message:err.message,name:err.name,lineNumber:err.lineNumber||err.line||"Not available",fileName:err.fileName||err.filename||err.sourceURL||href,stack:err.stack||"Not available"}:err};
goog.debug.enhanceError=function(err,opt_message){var error=typeof err=="string"?Error(err):err;if(!error.stack)error.stack=goog.debug.getStacktrace(arguments.callee.caller);if(opt_message){var x=0;while(error["message"+x])++x;error["message"+x]=String(opt_message)}return error};
goog.debug.getStacktraceSimple=function(opt_depth){var sb=[];var fn=arguments.callee.caller;var depth=0;while(fn&&(!opt_depth||depth<opt_depth)){sb.push(goog.debug.getFunctionName(fn));sb.push("()\n");try{fn=fn.caller}catch(e){sb.push("[exception trying to get caller]\n");break}depth++;if(depth>=goog.debug.MAX_STACK_DEPTH){sb.push("[...long stack...]");break}}if(opt_depth&&depth>=opt_depth)sb.push("[...reached max depth limit...]");else sb.push("[end]");return sb.join("")};
goog.debug.MAX_STACK_DEPTH=50;goog.debug.getStacktrace=function(opt_fn){return goog.debug.getStacktraceHelper_(opt_fn||arguments.callee.caller,[])};
goog.debug.getStacktraceHelper_=function(fn,visited){var sb=[];if(goog.array.contains(visited,fn))sb.push("[...circular reference...]");else if(fn&&visited.length<goog.debug.MAX_STACK_DEPTH){sb.push(goog.debug.getFunctionName(fn)+"(");var args=fn.arguments;for(var i=0;i<args.length;i++){if(i>0)sb.push(", ");var argDesc;var arg=args[i];switch(typeof arg){case "object":argDesc=arg?"object":"null";break;case "string":argDesc=arg;break;case "number":argDesc=String(arg);break;case "boolean":argDesc=arg?
"true":"false";break;case "function":argDesc=goog.debug.getFunctionName(arg);argDesc=argDesc?argDesc:"[fn]";break;case "undefined":default:argDesc=typeof arg;break}if(argDesc.length>40)argDesc=argDesc.substr(0,40)+"...";sb.push(argDesc)}visited.push(fn);sb.push(")\n");try{sb.push(goog.debug.getStacktraceHelper_(fn.caller,visited))}catch(e){sb.push("[exception trying to get caller]\n")}}else if(fn)sb.push("[...long stack...]");else sb.push("[end]");return sb.join("")};
goog.debug.getFunctionName=function(fn){var functionSource=String(fn);if(!goog.debug.fnNameCache_[functionSource]){var matches=/function ([^\(]+)/.exec(functionSource);if(matches){var method=matches[1];goog.debug.fnNameCache_[functionSource]=method}else goog.debug.fnNameCache_[functionSource]="[Anonymous]"}return goog.debug.fnNameCache_[functionSource]};
goog.debug.makeWhitespaceVisible=function(string){return string.replace(/ /g,"[_]").replace(/\f/g,"[f]").replace(/\n/g,"[n]\n").replace(/\r/g,"[r]").replace(/\t/g,"[t]")};goog.debug.fnNameCache_={};goog.provide("goog.debug.LogRecord");goog.debug.LogRecord=function(level,msg,loggerName,opt_time,opt_sequenceNumber){this.reset(level,msg,loggerName,opt_time,opt_sequenceNumber)};goog.debug.LogRecord.prototype.time_;goog.debug.LogRecord.prototype.level_;goog.debug.LogRecord.prototype.msg_;goog.debug.LogRecord.prototype.loggerName_;goog.debug.LogRecord.prototype.sequenceNumber_=0;goog.debug.LogRecord.prototype.exception_=null;goog.debug.LogRecord.prototype.exceptionText_=null;
goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS=true;goog.debug.LogRecord.nextSequenceNumber_=0;goog.debug.LogRecord.prototype.reset=function(level,msg,loggerName,opt_time,opt_sequenceNumber){if(goog.debug.LogRecord.ENABLE_SEQUENCE_NUMBERS)this.sequenceNumber_=typeof opt_sequenceNumber=="number"?opt_sequenceNumber:goog.debug.LogRecord.nextSequenceNumber_++;this.time_=opt_time||goog.now();this.level_=level;this.msg_=msg;this.loggerName_=loggerName;delete this.exception_;delete this.exceptionText_};
goog.debug.LogRecord.prototype.getLoggerName=function(){return this.loggerName_};goog.debug.LogRecord.prototype.getException=function(){return this.exception_};goog.debug.LogRecord.prototype.setException=function(exception){this.exception_=exception};goog.debug.LogRecord.prototype.getExceptionText=function(){return this.exceptionText_};goog.debug.LogRecord.prototype.setExceptionText=function(text){this.exceptionText_=text};
goog.debug.LogRecord.prototype.setLoggerName=function(loggerName){this.loggerName_=loggerName};goog.debug.LogRecord.prototype.getLevel=function(){return this.level_};goog.debug.LogRecord.prototype.setLevel=function(level){this.level_=level};goog.debug.LogRecord.prototype.getMessage=function(){return this.msg_};goog.debug.LogRecord.prototype.setMessage=function(msg){this.msg_=msg};goog.debug.LogRecord.prototype.getMillis=function(){return this.time_};
goog.debug.LogRecord.prototype.setMillis=function(time){this.time_=time};goog.debug.LogRecord.prototype.getSequenceNumber=function(){return this.sequenceNumber_};goog.provide("goog.debug.LogBuffer");goog.require("goog.asserts");goog.require("goog.debug.LogRecord");goog.debug.LogBuffer=function(){goog.asserts.assert(goog.debug.LogBuffer.isBufferingEnabled(),"Cannot use goog.debug.LogBuffer without defining "+"goog.debug.LogBuffer.CAPACITY.");this.clear()};goog.debug.LogBuffer.getInstance=function(){if(!goog.debug.LogBuffer.instance_)goog.debug.LogBuffer.instance_=new goog.debug.LogBuffer;return goog.debug.LogBuffer.instance_};
goog.debug.LogBuffer.CAPACITY=0;goog.debug.LogBuffer.prototype.buffer_;goog.debug.LogBuffer.prototype.curIndex_;goog.debug.LogBuffer.prototype.isFull_;
goog.debug.LogBuffer.prototype.addRecord=function(level,msg,loggerName){var curIndex=(this.curIndex_+1)%goog.debug.LogBuffer.CAPACITY;this.curIndex_=curIndex;if(this.isFull_){var ret=this.buffer_[curIndex];ret.reset(level,msg,loggerName);return ret}this.isFull_=curIndex==goog.debug.LogBuffer.CAPACITY-1;return this.buffer_[curIndex]=new goog.debug.LogRecord(level,msg,loggerName)};goog.debug.LogBuffer.isBufferingEnabled=function(){return goog.debug.LogBuffer.CAPACITY>0};
goog.debug.LogBuffer.prototype.clear=function(){this.buffer_=new Array(goog.debug.LogBuffer.CAPACITY);this.curIndex_=-1;this.isFull_=false};goog.debug.LogBuffer.prototype.forEachRecord=function(func){var buffer=this.buffer_;if(!buffer[0])return;var curIndex=this.curIndex_;var i=this.isFull_?curIndex:-1;do{i=(i+1)%goog.debug.LogBuffer.CAPACITY;func(buffer[i])}while(i!=curIndex)};goog.provide("goog.debug.LogManager");goog.provide("goog.debug.Logger");goog.provide("goog.debug.Logger.Level");goog.require("goog.array");goog.require("goog.asserts");goog.require("goog.debug");goog.require("goog.debug.LogBuffer");goog.require("goog.debug.LogRecord");goog.debug.Logger=function(name){this.name_=name};goog.debug.Logger.prototype.parent_=null;goog.debug.Logger.prototype.level_=null;goog.debug.Logger.prototype.children_=null;goog.debug.Logger.prototype.handlers_=null;
goog.debug.Logger.ENABLE_HIERARCHY=true;if(!goog.debug.Logger.ENABLE_HIERARCHY){goog.debug.Logger.rootHandlers_=[];goog.debug.Logger.rootLevel_}goog.debug.Logger.Level=function(name,value){this.name=name;this.value=value};goog.debug.Logger.Level.prototype.toString=function(){return this.name};goog.debug.Logger.Level.OFF=new goog.debug.Logger.Level("OFF",Infinity);goog.debug.Logger.Level.SHOUT=new goog.debug.Logger.Level("SHOUT",1200);
goog.debug.Logger.Level.SEVERE=new goog.debug.Logger.Level("SEVERE",1E3);goog.debug.Logger.Level.WARNING=new goog.debug.Logger.Level("WARNING",900);goog.debug.Logger.Level.INFO=new goog.debug.Logger.Level("INFO",800);goog.debug.Logger.Level.CONFIG=new goog.debug.Logger.Level("CONFIG",700);goog.debug.Logger.Level.FINE=new goog.debug.Logger.Level("FINE",500);goog.debug.Logger.Level.FINER=new goog.debug.Logger.Level("FINER",400);goog.debug.Logger.Level.FINEST=new goog.debug.Logger.Level("FINEST",300);
goog.debug.Logger.Level.ALL=new goog.debug.Logger.Level("ALL",0);goog.debug.Logger.Level.PREDEFINED_LEVELS=[goog.debug.Logger.Level.OFF,goog.debug.Logger.Level.SHOUT,goog.debug.Logger.Level.SEVERE,goog.debug.Logger.Level.WARNING,goog.debug.Logger.Level.INFO,goog.debug.Logger.Level.CONFIG,goog.debug.Logger.Level.FINE,goog.debug.Logger.Level.FINER,goog.debug.Logger.Level.FINEST,goog.debug.Logger.Level.ALL];goog.debug.Logger.Level.predefinedLevelsCache_=null;
goog.debug.Logger.Level.createPredefinedLevelsCache_=function(){goog.debug.Logger.Level.predefinedLevelsCache_={};for(var i=0,level;level=goog.debug.Logger.Level.PREDEFINED_LEVELS[i];i++){goog.debug.Logger.Level.predefinedLevelsCache_[level.value]=level;goog.debug.Logger.Level.predefinedLevelsCache_[level.name]=level}};
goog.debug.Logger.Level.getPredefinedLevel=function(name){if(!goog.debug.Logger.Level.predefinedLevelsCache_)goog.debug.Logger.Level.createPredefinedLevelsCache_();return goog.debug.Logger.Level.predefinedLevelsCache_[name]||null};
goog.debug.Logger.Level.getPredefinedLevelByValue=function(value){if(!goog.debug.Logger.Level.predefinedLevelsCache_)goog.debug.Logger.Level.createPredefinedLevelsCache_();if(value in goog.debug.Logger.Level.predefinedLevelsCache_)return goog.debug.Logger.Level.predefinedLevelsCache_[value];for(var i=0;i<goog.debug.Logger.Level.PREDEFINED_LEVELS.length;++i){var level=goog.debug.Logger.Level.PREDEFINED_LEVELS[i];if(level.value<=value)return level}return null};goog.debug.Logger.getLogger=function(name){return goog.debug.LogManager.getLogger(name)};
goog.debug.Logger.prototype.getName=function(){return this.name_};goog.debug.Logger.prototype.addHandler=function(handler){if(goog.debug.Logger.ENABLE_HIERARCHY){if(!this.handlers_)this.handlers_=[];this.handlers_.push(handler)}else{goog.asserts.assert(!this.name_,"Cannot call addHandler on a non-root logger when "+"goog.debug.Logger.ENABLE_HIERARCHY is false.");goog.debug.Logger.rootHandlers_.push(handler)}};
goog.debug.Logger.prototype.removeHandler=function(handler){var handlers=goog.debug.Logger.ENABLE_HIERARCHY?this.handlers_:goog.debug.Logger.rootHandlers_;return!!handlers&&goog.array.remove(handlers,handler)};goog.debug.Logger.prototype.getParent=function(){return this.parent_};goog.debug.Logger.prototype.getChildren=function(){if(!this.children_)this.children_={};return this.children_};
goog.debug.Logger.prototype.setLevel=function(level){if(goog.debug.Logger.ENABLE_HIERARCHY)this.level_=level;else{goog.asserts.assert(!this.name_,"Cannot call setLevel() on a non-root logger when "+"goog.debug.Logger.ENABLE_HIERARCHY is false.");goog.debug.Logger.rootLevel_=level}};goog.debug.Logger.prototype.getLevel=function(){return this.level_};
goog.debug.Logger.prototype.getEffectiveLevel=function(){if(!goog.debug.Logger.ENABLE_HIERARCHY)return goog.debug.Logger.rootLevel_;if(this.level_)return this.level_;if(this.parent_)return this.parent_.getEffectiveLevel();goog.asserts.fail("Root logger has no level set.");return null};goog.debug.Logger.prototype.isLoggable=function(level){return level.value>=this.getEffectiveLevel().value};
goog.debug.Logger.prototype.log=function(level,msg,opt_exception){if(this.isLoggable(level))this.doLogRecord_(this.getLogRecord(level,msg,opt_exception))};
goog.debug.Logger.prototype.getLogRecord=function(level,msg,opt_exception){if(goog.debug.LogBuffer.isBufferingEnabled())var logRecord=goog.debug.LogBuffer.getInstance().addRecord(level,msg,this.name_);else logRecord=new goog.debug.LogRecord(level,String(msg),this.name_);if(opt_exception){logRecord.setException(opt_exception);logRecord.setExceptionText(goog.debug.exposeException(opt_exception,arguments.callee.caller))}return logRecord};
goog.debug.Logger.prototype.shout=function(msg,opt_exception){this.log(goog.debug.Logger.Level.SHOUT,msg,opt_exception)};goog.debug.Logger.prototype.severe=function(msg,opt_exception){this.log(goog.debug.Logger.Level.SEVERE,msg,opt_exception)};goog.debug.Logger.prototype.warning=function(msg,opt_exception){this.log(goog.debug.Logger.Level.WARNING,msg,opt_exception)};goog.debug.Logger.prototype.info=function(msg,opt_exception){this.log(goog.debug.Logger.Level.INFO,msg,opt_exception)};
goog.debug.Logger.prototype.config=function(msg,opt_exception){this.log(goog.debug.Logger.Level.CONFIG,msg,opt_exception)};goog.debug.Logger.prototype.fine=function(msg,opt_exception){this.log(goog.debug.Logger.Level.FINE,msg,opt_exception)};goog.debug.Logger.prototype.finer=function(msg,opt_exception){this.log(goog.debug.Logger.Level.FINER,msg,opt_exception)};goog.debug.Logger.prototype.finest=function(msg,opt_exception){this.log(goog.debug.Logger.Level.FINEST,msg,opt_exception)};
goog.debug.Logger.prototype.logRecord=function(logRecord){if(this.isLoggable(logRecord.getLevel()))this.doLogRecord_(logRecord)};goog.debug.Logger.prototype.doLogRecord_=function(logRecord){if(goog.debug.Logger.ENABLE_HIERARCHY){var target=this;while(target){target.callPublish_(logRecord);target=target.getParent()}}else for(var i=0,handler;handler=goog.debug.Logger.rootHandlers_[i++];)handler(logRecord)};
goog.debug.Logger.prototype.callPublish_=function(logRecord){if(this.handlers_)for(var i=0,handler;handler=this.handlers_[i];i++)handler(logRecord)};goog.debug.Logger.prototype.setParent_=function(parent){this.parent_=parent};goog.debug.Logger.prototype.addChild_=function(name,logger){this.getChildren()[name]=logger};goog.debug.LogManager={};goog.debug.LogManager.loggers_={};goog.debug.LogManager.rootLogger_=null;
goog.debug.LogManager.initialize=function(){if(!goog.debug.LogManager.rootLogger_){goog.debug.LogManager.rootLogger_=new goog.debug.Logger("");goog.debug.LogManager.loggers_[""]=goog.debug.LogManager.rootLogger_;goog.debug.LogManager.rootLogger_.setLevel(goog.debug.Logger.Level.CONFIG)}};goog.debug.LogManager.getLoggers=function(){return goog.debug.LogManager.loggers_};goog.debug.LogManager.getRoot=function(){goog.debug.LogManager.initialize();return goog.debug.LogManager.rootLogger_};
goog.debug.LogManager.getLogger=function(name){goog.debug.LogManager.initialize();var ret=goog.debug.LogManager.loggers_[name];return ret||goog.debug.LogManager.createLogger_(name)};goog.debug.LogManager.createFunctionForCatchErrors=function(opt_logger){return function(info){var logger=opt_logger||goog.debug.LogManager.getRoot();logger.severe("Error: "+info.message+" ("+info.fileName+" @ Line: "+info.line+")")}};
goog.debug.LogManager.createLogger_=function(name){var logger=new goog.debug.Logger(name);if(goog.debug.Logger.ENABLE_HIERARCHY){var lastDotIndex=name.lastIndexOf(".");var parentName=name.substr(0,lastDotIndex);var leafName=name.substr(lastDotIndex+1);var parentLogger=goog.debug.LogManager.getLogger(parentName);parentLogger.addChild_(leafName,logger);logger.setParent_(parentLogger)}goog.debug.LogManager.loggers_[name]=logger;return logger};goog.provide("goog.userAgent");goog.require("goog.string");goog.userAgent.ASSUME_IE=false;goog.userAgent.ASSUME_GECKO=false;goog.userAgent.ASSUME_WEBKIT=false;goog.userAgent.ASSUME_MOBILE_WEBKIT=false;goog.userAgent.ASSUME_OPERA=false;goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA;
goog.userAgent.getUserAgentString=function(){return goog.global["navigator"]?goog.global["navigator"].userAgent:null};goog.userAgent.getNavigator=function(){return goog.global["navigator"]};
goog.userAgent.init_=function(){goog.userAgent.detectedOpera_=false;goog.userAgent.detectedIe_=false;goog.userAgent.detectedWebkit_=false;goog.userAgent.detectedMobile_=false;goog.userAgent.detectedGecko_=false;var ua;if(!goog.userAgent.BROWSER_KNOWN_&&(ua=goog.userAgent.getUserAgentString())){var navigator=goog.userAgent.getNavigator();goog.userAgent.detectedOpera_=ua.indexOf("Opera")==0;goog.userAgent.detectedIe_=!goog.userAgent.detectedOpera_&&ua.indexOf("MSIE")!=-1;goog.userAgent.detectedWebkit_=
!goog.userAgent.detectedOpera_&&ua.indexOf("WebKit")!=-1;goog.userAgent.detectedMobile_=goog.userAgent.detectedWebkit_&&ua.indexOf("Mobile")!=-1;goog.userAgent.detectedGecko_=!goog.userAgent.detectedOpera_&&!goog.userAgent.detectedWebkit_&&navigator.product=="Gecko"}};if(!goog.userAgent.BROWSER_KNOWN_)goog.userAgent.init_();goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.userAgent.detectedOpera_;
goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.userAgent.detectedIe_;goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.userAgent.detectedGecko_;goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.userAgent.detectedWebkit_;goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.detectedMobile_;goog.userAgent.SAFARI=goog.userAgent.WEBKIT;
goog.userAgent.determinePlatform_=function(){var navigator=goog.userAgent.getNavigator();return navigator&&navigator.platform||""};goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_();goog.userAgent.ASSUME_MAC=false;goog.userAgent.ASSUME_WINDOWS=false;goog.userAgent.ASSUME_LINUX=false;goog.userAgent.ASSUME_X11=false;goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11;
goog.userAgent.initPlatform_=function(){goog.userAgent.detectedMac_=goog.string.contains(goog.userAgent.PLATFORM,"Mac");goog.userAgent.detectedWindows_=goog.string.contains(goog.userAgent.PLATFORM,"Win");goog.userAgent.detectedLinux_=goog.string.contains(goog.userAgent.PLATFORM,"Linux");goog.userAgent.detectedX11_=!!goog.userAgent.getNavigator()&&goog.string.contains(goog.userAgent.getNavigator()["appVersion"]||"","X11")};if(!goog.userAgent.PLATFORM_KNOWN_)goog.userAgent.initPlatform_();
goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.userAgent.detectedMac_;goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.userAgent.detectedWindows_;goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.detectedLinux_;goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.detectedX11_;
goog.userAgent.determineVersion_=function(){var version="",re;if(goog.userAgent.OPERA&&goog.global["opera"]){var operaVersion=goog.global["opera"].version;version=typeof operaVersion=="function"?operaVersion():operaVersion}else{if(goog.userAgent.GECKO)re=/rv\:([^\);]+)(\)|;)/;else if(goog.userAgent.IE)re=/MSIE\s+([^\);]+)(\)|;)/;else if(goog.userAgent.WEBKIT)re=/WebKit\/(\S+)/;if(re){var arr=re.exec(goog.userAgent.getUserAgentString());version=arr?arr[1]:""}}if(goog.userAgent.IE){var docMode=goog.userAgent.getDocumentMode_();
if(docMode>parseFloat(version))return String(docMode)}return version};goog.userAgent.getDocumentMode_=function(){var doc=goog.global["document"];return doc?doc["documentMode"]:undefined};goog.userAgent.VERSION=goog.userAgent.determineVersion_();goog.userAgent.compare=function(v1,v2){return goog.string.compareVersions(v1,v2)};goog.userAgent.isVersionCache_={};
goog.userAgent.isVersion=function(version){return goog.userAgent.isVersionCache_[version]||(goog.userAgent.isVersionCache_[version]=goog.string.compareVersions(goog.userAgent.VERSION,version)>=0)};goog.provide("goog.dom.BrowserFeature");goog.require("goog.userAgent");goog.dom.BrowserFeature={CAN_ADD_NAME_OR_TYPE_ATTRIBUTES:!goog.userAgent.IE||goog.userAgent.isVersion("9"),CAN_USE_INNER_TEXT:goog.userAgent.IE&&!goog.userAgent.isVersion("9"),INNER_HTML_NEEDS_SCOPED_ELEMENT:goog.userAgent.IE};goog.provide("goog.dom.TagName");
goog.dom.TagName={A:"A",ABBR:"ABBR",ACRONYM:"ACRONYM",ADDRESS:"ADDRESS",APPLET:"APPLET",AREA:"AREA",B:"B",BASE:"BASE",BASEFONT:"BASEFONT",BDO:"BDO",BIG:"BIG",BLOCKQUOTE:"BLOCKQUOTE",BODY:"BODY",BR:"BR",BUTTON:"BUTTON",CANVAS:"CANVAS",CAPTION:"CAPTION",CENTER:"CENTER",CITE:"CITE",CODE:"CODE",COL:"COL",COLGROUP:"COLGROUP",DD:"DD",DEL:"DEL",DFN:"DFN",DIR:"DIR",DIV:"DIV",DL:"DL",DT:"DT",EM:"EM",FIELDSET:"FIELDSET",FONT:"FONT",FORM:"FORM",FRAME:"FRAME",FRAMESET:"FRAMESET",H1:"H1",H2:"H2",H3:"H3",H4:"H4",
H5:"H5",H6:"H6",HEAD:"HEAD",HR:"HR",HTML:"HTML",I:"I",IFRAME:"IFRAME",IMG:"IMG",INPUT:"INPUT",INS:"INS",ISINDEX:"ISINDEX",KBD:"KBD",LABEL:"LABEL",LEGEND:"LEGEND",LI:"LI",LINK:"LINK",MAP:"MAP",MENU:"MENU",META:"META",NOFRAMES:"NOFRAMES",NOSCRIPT:"NOSCRIPT",OBJECT:"OBJECT",OL:"OL",OPTGROUP:"OPTGROUP",OPTION:"OPTION",P:"P",PARAM:"PARAM",PRE:"PRE",Q:"Q",S:"S",SAMP:"SAMP",SCRIPT:"SCRIPT",SELECT:"SELECT",SMALL:"SMALL",SPAN:"SPAN",STRIKE:"STRIKE",STRONG:"STRONG",STYLE:"STYLE",SUB:"SUB",SUP:"SUP",TABLE:"TABLE",
TBODY:"TBODY",TD:"TD",TEXTAREA:"TEXTAREA",TFOOT:"TFOOT",TH:"TH",THEAD:"THEAD",TITLE:"TITLE",TR:"TR",TT:"TT",U:"U",UL:"UL",VAR:"VAR"};goog.provide("goog.dom.classes");goog.require("goog.array");goog.dom.classes.set=function(element,className){element.className=className};goog.dom.classes.get=function(element){var className=element.className;return className&&typeof className.split=="function"?className.split(/\s+/):[]};goog.dom.classes.add=function(element,var_args){var classes=goog.dom.classes.get(element);var args=goog.array.slice(arguments,1);var b=goog.dom.classes.add_(classes,args);element.className=classes.join(" ");return b};
goog.dom.classes.remove=function(element,var_args){var classes=goog.dom.classes.get(element);var args=goog.array.slice(arguments,1);var b=goog.dom.classes.remove_(classes,args);element.className=classes.join(" ");return b};goog.dom.classes.add_=function(classes,args){var rv=0;for(var i=0;i<args.length;i++)if(!goog.array.contains(classes,args[i])){classes.push(args[i]);rv++}return rv==args.length};
goog.dom.classes.remove_=function(classes,args){var rv=0;for(var i=0;i<classes.length;i++)if(goog.array.contains(args,classes[i])){goog.array.splice(classes,i--,1);rv++}return rv==args.length};goog.dom.classes.swap=function(element,fromClass,toClass){var classes=goog.dom.classes.get(element);var removed=false;for(var i=0;i<classes.length;i++)if(classes[i]==fromClass){goog.array.splice(classes,i--,1);removed=true}if(removed){classes.push(toClass);element.className=classes.join(" ")}return removed};
goog.dom.classes.addRemove=function(element,classesToRemove,classesToAdd){var classes=goog.dom.classes.get(element);if(goog.isString(classesToRemove))goog.array.remove(classes,classesToRemove);else if(goog.isArray(classesToRemove))goog.dom.classes.remove_(classes,classesToRemove);if(goog.isString(classesToAdd)&&!goog.array.contains(classes,classesToAdd))classes.push(classesToAdd);else if(goog.isArray(classesToAdd))goog.dom.classes.add_(classes,classesToAdd);element.className=classes.join(" ")};
goog.dom.classes.has=function(element,className){return goog.array.contains(goog.dom.classes.get(element),className)};goog.dom.classes.enable=function(element,className,enabled){if(enabled)goog.dom.classes.add(element,className);else goog.dom.classes.remove(element,className)};goog.dom.classes.toggle=function(element,className){var add=!goog.dom.classes.has(element,className);goog.dom.classes.enable(element,className,add);return add};goog.provide("goog.math.Coordinate");goog.math.Coordinate=function(opt_x,opt_y){this.x=goog.isDef(opt_x)?opt_x:0;this.y=goog.isDef(opt_y)?opt_y:0};goog.math.Coordinate.prototype.clone=function(){return new goog.math.Coordinate(this.x,this.y)};if(goog.DEBUG)goog.math.Coordinate.prototype.toString=function(){return"("+this.x+", "+this.y+")"};goog.math.Coordinate.equals=function(a,b){if(a==b)return true;if(!a||!b)return false;return a.x==b.x&&a.y==b.y};
goog.math.Coordinate.distance=function(a,b){var dx=a.x-b.x;var dy=a.y-b.y;return Math.sqrt(dx*dx+dy*dy)};goog.math.Coordinate.squaredDistance=function(a,b){var dx=a.x-b.x;var dy=a.y-b.y;return dx*dx+dy*dy};goog.math.Coordinate.difference=function(a,b){return new goog.math.Coordinate(a.x-b.x,a.y-b.y)};goog.math.Coordinate.sum=function(a,b){return new goog.math.Coordinate(a.x+b.x,a.y+b.y)};goog.provide("goog.math.Size");goog.math.Size=function(width,height){this.width=width;this.height=height};goog.math.Size.equals=function(a,b){if(a==b)return true;if(!a||!b)return false;return a.width==b.width&&a.height==b.height};goog.math.Size.prototype.clone=function(){return new goog.math.Size(this.width,this.height)};if(goog.DEBUG)goog.math.Size.prototype.toString=function(){return"("+this.width+" x "+this.height+")"};goog.math.Size.prototype.getLongest=function(){return Math.max(this.width,this.height)};
goog.math.Size.prototype.getShortest=function(){return Math.min(this.width,this.height)};goog.math.Size.prototype.area=function(){return this.width*this.height};goog.math.Size.prototype.perimeter=function(){return(this.width+this.height)*2};goog.math.Size.prototype.aspectRatio=function(){return this.width/this.height};goog.math.Size.prototype.isEmpty=function(){return!this.area()};goog.math.Size.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
goog.math.Size.prototype.fitsInside=function(target){return this.width<=target.width&&this.height<=target.height};goog.math.Size.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};goog.math.Size.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};goog.math.Size.prototype.scale=function(s){this.width*=s;this.height*=s;return this};
goog.math.Size.prototype.scaleToFit=function(target){var s=this.aspectRatio()>target.aspectRatio()?target.width/this.width:target.height/this.height;return this.scale(s)};goog.provide("goog.dom");goog.provide("goog.dom.DomHelper");goog.provide("goog.dom.NodeType");goog.require("goog.array");goog.require("goog.dom.BrowserFeature");goog.require("goog.dom.TagName");goog.require("goog.dom.classes");goog.require("goog.math.Coordinate");goog.require("goog.math.Size");goog.require("goog.object");goog.require("goog.string");goog.require("goog.userAgent");goog.dom.ASSUME_QUIRKS_MODE=false;goog.dom.ASSUME_STANDARDS_MODE=false;
goog.dom.COMPAT_MODE_KNOWN_=goog.dom.ASSUME_QUIRKS_MODE||goog.dom.ASSUME_STANDARDS_MODE;goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12};goog.dom.getDomHelper=function(opt_element){return opt_element?new goog.dom.DomHelper(goog.dom.getOwnerDocument(opt_element)):goog.dom.defaultDomHelper_||(goog.dom.defaultDomHelper_=new goog.dom.DomHelper)};goog.dom.defaultDomHelper_;
goog.dom.getDocument=function(){return document};goog.dom.getElement=function(element){return goog.isString(element)?document.getElementById(element):element};goog.dom.$=goog.dom.getElement;goog.dom.getElementsByTagNameAndClass=function(opt_tag,opt_class,opt_el){return goog.dom.getElementsByTagNameAndClass_(document,opt_tag,opt_class,opt_el)};
goog.dom.getElementsByClass=function(className,opt_el){var parent=opt_el||document;if(goog.dom.canUseQuerySelector_(parent))return parent.querySelectorAll("."+className);else if(parent.getElementsByClassName)return parent.getElementsByClassName(className);return goog.dom.getElementsByTagNameAndClass_(document,"*",className,opt_el)};
goog.dom.getElementByClass=function(className,opt_el){var parent=opt_el||document;var retVal=null;if(goog.dom.canUseQuerySelector_(parent))retVal=parent.querySelector("."+className);else retVal=goog.dom.getElementsByClass(className,opt_el)[0];return retVal||null};goog.dom.canUseQuerySelector_=function(parent){return parent.querySelectorAll&&parent.querySelector&&(!goog.userAgent.WEBKIT||goog.dom.isCss1CompatMode_(document)||goog.userAgent.isVersion("528"))};
goog.dom.getElementsByTagNameAndClass_=function(doc,opt_tag,opt_class,opt_el){var parent=opt_el||doc;var tagName=opt_tag&&opt_tag!="*"?opt_tag.toUpperCase():"";if(goog.dom.canUseQuerySelector_(parent)&&(tagName||opt_class)){var query=tagName+(opt_class?"."+opt_class:"");return parent.querySelectorAll(query)}if(opt_class&&parent.getElementsByClassName){var els=parent.getElementsByClassName(opt_class);if(tagName){var arrayLike={};var len=0;for(var i=0,el;el=els[i];i++)if(tagName==el.nodeName)arrayLike[len++]=
el;arrayLike.length=len;return arrayLike}else return els}var els=parent.getElementsByTagName(tagName||"*");if(opt_class){var arrayLike={};var len=0;for(var i=0,el;el=els[i];i++){var className=el.className;if(typeof className.split=="function"&&goog.array.contains(className.split(/\s+/),opt_class))arrayLike[len++]=el}arrayLike.length=len;return arrayLike}else return els};goog.dom.$$=goog.dom.getElementsByTagNameAndClass;
goog.dom.setProperties=function(element,properties){goog.object.forEach(properties,function(val,key){if(key=="style")element.style.cssText=val;else if(key=="class")element.className=val;else if(key=="for")element.htmlFor=val;else if(key in goog.dom.DIRECT_ATTRIBUTE_MAP_)element.setAttribute(goog.dom.DIRECT_ATTRIBUTE_MAP_[key],val);else element[key]=val})};
goog.dom.DIRECT_ATTRIBUTE_MAP_={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",type:"type"};goog.dom.getViewportSize=function(opt_window){return goog.dom.getViewportSize_(opt_window||window)};
goog.dom.getViewportSize_=function(win){var doc=win.document;if(goog.userAgent.WEBKIT&&!goog.userAgent.isVersion("500")&&!goog.userAgent.MOBILE){if(typeof win.innerHeight=="undefined")win=window;var innerHeight=win.innerHeight;var scrollHeight=win.document.documentElement.scrollHeight;if(win==win.top)if(scrollHeight<innerHeight)innerHeight-=15;return new goog.math.Size(win.innerWidth,innerHeight)}var readsFromDocumentElement=goog.dom.isCss1CompatMode_(doc);if(goog.userAgent.OPERA&&!goog.userAgent.isVersion("9.50"))readsFromDocumentElement=
false;var el=readsFromDocumentElement?doc.documentElement:doc.body;return new goog.math.Size(el.clientWidth,el.clientHeight)};goog.dom.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(window)};
goog.dom.getDocumentHeight_=function(win){var doc=win.document;var height=0;if(doc){var vh=goog.dom.getViewportSize_(win).height;var body=doc.body;var docEl=doc.documentElement;if(goog.dom.isCss1CompatMode_(doc)&&docEl.scrollHeight)height=docEl.scrollHeight!=vh?docEl.scrollHeight:docEl.offsetHeight;else{var sh=docEl.scrollHeight;var oh=docEl.offsetHeight;if(docEl.clientHeight!=oh){sh=body.scrollHeight;oh=body.offsetHeight}if(sh>vh)height=sh>oh?sh:oh;else height=sh<oh?sh:oh}}return height};
goog.dom.getPageScroll=function(opt_window){var win=opt_window||goog.global||window;return goog.dom.getDomHelper(win.document).getDocumentScroll()};goog.dom.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(document)};goog.dom.getDocumentScroll_=function(doc){var el=goog.dom.getDocumentScrollElement_(doc);return new goog.math.Coordinate(el.scrollLeft,el.scrollTop)};goog.dom.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(document)};
goog.dom.getDocumentScrollElement_=function(doc){return!goog.userAgent.WEBKIT&&goog.dom.isCss1CompatMode_(doc)?doc.documentElement:doc.body};goog.dom.getWindow=function(opt_doc){return opt_doc?goog.dom.getWindow_(opt_doc):window};goog.dom.getWindow_=function(doc){return doc.parentWindow||doc.defaultView};goog.dom.createDom=function(tagName,opt_attributes,var_args){return goog.dom.createDom_(document,arguments)};
goog.dom.createDom_=function(doc,args){var tagName=args[0];var attributes=args[1];if(!goog.dom.BrowserFeature.CAN_ADD_NAME_OR_TYPE_ATTRIBUTES&&attributes&&(attributes.name||attributes.type)){var tagNameArr=["<",tagName];if(attributes.name)tagNameArr.push(' name="',goog.string.htmlEscape(attributes.name),'"');if(attributes.type){tagNameArr.push(' type="',goog.string.htmlEscape(attributes.type),'"');var clone={};goog.object.extend(clone,attributes);attributes=clone;delete attributes.type}tagNameArr.push(">");
tagName=tagNameArr.join("")}var element=doc.createElement(tagName);if(attributes)if(goog.isString(attributes))element.className=attributes;else if(goog.isArray(attributes))goog.dom.classes.add.apply(null,[element].concat(attributes));else goog.dom.setProperties(element,attributes);if(args.length>2)goog.dom.append_(doc,element,args,2);return element};
goog.dom.append_=function(doc,parent,args,startIndex){function childHandler(child){if(child)parent.appendChild(goog.isString(child)?doc.createTextNode(child):child)}for(var i=startIndex;i<args.length;i++){var arg=args[i];if(goog.isArrayLike(arg)&&!goog.dom.isNodeLike(arg))goog.array.forEach(goog.dom.isNodeList(arg)?goog.array.clone(arg):arg,childHandler);else childHandler(arg)}};goog.dom.$dom=goog.dom.createDom;goog.dom.createElement=function(name){return document.createElement(name)};
goog.dom.createTextNode=function(content){return document.createTextNode(content)};goog.dom.createTable=function(rows,columns,opt_fillWithNbsp){return goog.dom.createTable_(document,rows,columns,!!opt_fillWithNbsp)};
goog.dom.createTable_=function(doc,rows,columns,fillWithNbsp){var rowHtml=["<tr>"];for(var i=0;i<columns;i++)rowHtml.push(fillWithNbsp?"<td>&nbsp;</td>":"<td></td>");rowHtml.push("</tr>");rowHtml=rowHtml.join("");var totalHtml=["<table>"];for(i=0;i<rows;i++)totalHtml.push(rowHtml);totalHtml.push("</table>");var elem=doc.createElement(goog.dom.TagName.DIV);elem.innerHTML=totalHtml.join("");return elem.removeChild(elem.firstChild)};
goog.dom.htmlToDocumentFragment=function(htmlString){return goog.dom.htmlToDocumentFragment_(document,htmlString)};
goog.dom.htmlToDocumentFragment_=function(doc,htmlString){var tempDiv=doc.createElement("div");if(goog.dom.BrowserFeature.INNER_HTML_NEEDS_SCOPED_ELEMENT){tempDiv.innerHTML="<br>"+htmlString;tempDiv.removeChild(tempDiv.firstChild)}else tempDiv.innerHTML=htmlString;if(tempDiv.childNodes.length==1)return tempDiv.removeChild(tempDiv.firstChild);else{var fragment=doc.createDocumentFragment();while(tempDiv.firstChild)fragment.appendChild(tempDiv.firstChild);return fragment}};
goog.dom.getCompatMode=function(){return goog.dom.isCss1CompatMode()?"CSS1Compat":"BackCompat"};goog.dom.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(document)};goog.dom.isCss1CompatMode_=function(doc){if(goog.dom.COMPAT_MODE_KNOWN_)return goog.dom.ASSUME_STANDARDS_MODE;return doc.compatMode=="CSS1Compat"};goog.dom.canHaveChildren=function(node){if(node.nodeType!=goog.dom.NodeType.ELEMENT)return false;switch(node.tagName){case goog.dom.TagName.APPLET:case goog.dom.TagName.AREA:case goog.dom.TagName.BASE:case goog.dom.TagName.BR:case goog.dom.TagName.COL:case goog.dom.TagName.FRAME:case goog.dom.TagName.HR:case goog.dom.TagName.IMG:case goog.dom.TagName.INPUT:case goog.dom.TagName.IFRAME:case goog.dom.TagName.ISINDEX:case goog.dom.TagName.LINK:case goog.dom.TagName.NOFRAMES:case goog.dom.TagName.NOSCRIPT:case goog.dom.TagName.META:case goog.dom.TagName.OBJECT:case goog.dom.TagName.PARAM:case goog.dom.TagName.SCRIPT:case goog.dom.TagName.STYLE:return false}return true};
goog.dom.appendChild=function(parent,child){parent.appendChild(child)};goog.dom.append=function(parent,var_args){goog.dom.append_(goog.dom.getOwnerDocument(parent),parent,arguments,1)};goog.dom.removeChildren=function(node){var child;while(child=node.firstChild)node.removeChild(child)};goog.dom.insertSiblingBefore=function(newNode,refNode){if(refNode.parentNode)refNode.parentNode.insertBefore(newNode,refNode)};
goog.dom.insertSiblingAfter=function(newNode,refNode){if(refNode.parentNode)refNode.parentNode.insertBefore(newNode,refNode.nextSibling)};goog.dom.removeNode=function(node){return node&&node.parentNode?node.parentNode.removeChild(node):null};goog.dom.replaceNode=function(newNode,oldNode){var parent=oldNode.parentNode;if(parent)parent.replaceChild(newNode,oldNode)};
goog.dom.flattenElement=function(element){var child,parent=element.parentNode;if(parent&&parent.nodeType!=goog.dom.NodeType.DOCUMENT_FRAGMENT)if(element.removeNode)return element.removeNode(false);else{while(child=element.firstChild)parent.insertBefore(child,element);return goog.dom.removeNode(element)}};goog.dom.getFirstElementChild=function(node){return goog.dom.getNextElementNode_(node.firstChild,true)};
goog.dom.getLastElementChild=function(node){return goog.dom.getNextElementNode_(node.lastChild,false)};goog.dom.getNextElementSibling=function(node){return goog.dom.getNextElementNode_(node.nextSibling,true)};goog.dom.getPreviousElementSibling=function(node){return goog.dom.getNextElementNode_(node.previousSibling,false)};goog.dom.getNextElementNode_=function(node,forward){while(node&&node.nodeType!=goog.dom.NodeType.ELEMENT)node=forward?node.nextSibling:node.previousSibling;return node};
goog.dom.getNextNode=function(node){if(!node)return null;if(node.firstChild)return node.firstChild;while(node&&!node.nextSibling)node=node.parentNode;return node?node.nextSibling:null};goog.dom.getPreviousNode=function(node){if(!node)return null;if(!node.previousSibling)return node.parentNode;node=node.previousSibling;while(node&&node.lastChild)node=node.lastChild;return node};goog.dom.isNodeLike=function(obj){return goog.isObject(obj)&&obj.nodeType>0};
goog.dom.contains=function(parent,descendant){if(parent.contains&&descendant.nodeType==goog.dom.NodeType.ELEMENT)return parent==descendant||parent.contains(descendant);if(typeof parent.compareDocumentPosition!="undefined")return parent==descendant||Boolean(parent.compareDocumentPosition(descendant)&16);while(descendant&&parent!=descendant)descendant=descendant.parentNode;return descendant==parent};
goog.dom.compareNodeOrder=function(node1,node2){if(node1==node2)return 0;if(node1.compareDocumentPosition)return node1.compareDocumentPosition(node2)&2?1:-1;if("sourceIndex"in node1||node1.parentNode&&"sourceIndex"in node1.parentNode){var isElement1=node1.nodeType==goog.dom.NodeType.ELEMENT;var isElement2=node2.nodeType==goog.dom.NodeType.ELEMENT;if(isElement1&&isElement2)return node1.sourceIndex-node2.sourceIndex;else{var parent1=node1.parentNode;var parent2=node2.parentNode;if(parent1==parent2)return goog.dom.compareSiblingOrder_(node1,
node2);if(!isElement1&&goog.dom.contains(parent1,node2))return-1*goog.dom.compareParentsDescendantNodeIe_(node1,node2);if(!isElement2&&goog.dom.contains(parent2,node1))return goog.dom.compareParentsDescendantNodeIe_(node2,node1);return(isElement1?node1.sourceIndex:parent1.sourceIndex)-(isElement2?node2.sourceIndex:parent2.sourceIndex)}}var doc=goog.dom.getOwnerDocument(node1);var range1,range2;range1=doc.createRange();range1.selectNode(node1);range1.collapse(true);range2=doc.createRange();range2.selectNode(node2);
range2.collapse(true);return range1.compareBoundaryPoints(goog.global["Range"].START_TO_END,range2)};goog.dom.compareParentsDescendantNodeIe_=function(textNode,node){var parent=textNode.parentNode;if(parent==node)return-1;var sibling=node;while(sibling.parentNode!=parent)sibling=sibling.parentNode;return goog.dom.compareSiblingOrder_(sibling,textNode)};goog.dom.compareSiblingOrder_=function(node1,node2){var s=node2;while(s=s.previousSibling)if(s==node1)return-1;return 1};
goog.dom.findCommonAncestor=function(var_args){var i,count=arguments.length;if(!count)return null;else if(count==1)return arguments[0];var paths=[];var minLength=Infinity;for(i=0;i<count;i++){var ancestors=[];var node=arguments[i];while(node){ancestors.unshift(node);node=node.parentNode}paths.push(ancestors);minLength=Math.min(minLength,ancestors.length)}var output=null;for(i=0;i<minLength;i++){var first=paths[0][i];for(var j=1;j<count;j++)if(first!=paths[j][i])return output;output=first}return output};
goog.dom.getOwnerDocument=function(node){return node.nodeType==goog.dom.NodeType.DOCUMENT?node:node.ownerDocument||node.document};goog.dom.getFrameContentDocument=function(frame){var doc;if(goog.userAgent.WEBKIT)doc=frame.document||frame.contentWindow.document;else doc=frame.contentDocument||frame.contentWindow.document;return doc};goog.dom.getFrameContentWindow=function(frame){return frame.contentWindow||goog.dom.getWindow_(goog.dom.getFrameContentDocument(frame))};
goog.dom.setTextContent=function(element,text){if("textContent"in element)element.textContent=text;else if(element.firstChild&&element.firstChild.nodeType==goog.dom.NodeType.TEXT){while(element.lastChild!=element.firstChild)element.removeChild(element.lastChild);element.firstChild.data=text}else{goog.dom.removeChildren(element);var doc=goog.dom.getOwnerDocument(element);element.appendChild(doc.createTextNode(text))}};
goog.dom.getOuterHtml=function(element){if("outerHTML"in element)return element.outerHTML;else{var doc=goog.dom.getOwnerDocument(element);var div=doc.createElement("div");div.appendChild(element.cloneNode(true));return div.innerHTML}};goog.dom.findNode=function(root,p){var rv=[];var found=goog.dom.findNodes_(root,p,rv,true);return found?rv[0]:undefined};goog.dom.findNodes=function(root,p){var rv=[];goog.dom.findNodes_(root,p,rv,false);return rv};
goog.dom.findNodes_=function(root,p,rv,findOne){if(root!=null)for(var i=0,child;child=root.childNodes[i];i++){if(p(child)){rv.push(child);if(findOne)return true}if(goog.dom.findNodes_(child,p,rv,findOne))return true}return false};goog.dom.TAGS_TO_IGNORE_={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1};goog.dom.PREDEFINED_TAG_VALUES_={IMG:" ",BR:"\n"};
goog.dom.isFocusableTabIndex=function(element){var attrNode=element.getAttributeNode("tabindex");if(attrNode&&attrNode.specified){var index=element.tabIndex;return goog.isNumber(index)&&index>=0}return false};goog.dom.setFocusableTabIndex=function(element,enable){if(enable)element.tabIndex=0;else element.removeAttribute("tabIndex")};
goog.dom.getTextContent=function(node){var textContent;if(goog.dom.BrowserFeature.CAN_USE_INNER_TEXT&&"innerText"in node)textContent=goog.string.canonicalizeNewlines(node.innerText);else{var buf=[];goog.dom.getTextContent_(node,buf,true);textContent=buf.join("")}textContent=textContent.replace(/ \xAD /g," ").replace(/\xAD/g,"");if(!goog.userAgent.IE)textContent=textContent.replace(/ +/g," ");if(textContent!=" ")textContent=textContent.replace(/^\s*/,"");return textContent};
goog.dom.getRawTextContent=function(node){var buf=[];goog.dom.getTextContent_(node,buf,false);return buf.join("")};
goog.dom.getTextContent_=function(node,buf,normalizeWhitespace){if(node.nodeName in goog.dom.TAGS_TO_IGNORE_);else if(node.nodeType==goog.dom.NodeType.TEXT)if(normalizeWhitespace)buf.push(String(node.nodeValue).replace(/(\r\n|\r|\n)/g,""));else buf.push(node.nodeValue);else if(node.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)buf.push(goog.dom.PREDEFINED_TAG_VALUES_[node.nodeName]);else{var child=node.firstChild;while(child){goog.dom.getTextContent_(child,buf,normalizeWhitespace);child=child.nextSibling}}};
goog.dom.getNodeTextLength=function(node){return goog.dom.getTextContent(node).length};goog.dom.getNodeTextOffset=function(node,opt_offsetParent){var root=opt_offsetParent||goog.dom.getOwnerDocument(node).body;var buf=[];while(node&&node!=root){var cur=node;while(cur=cur.previousSibling)buf.unshift(goog.dom.getTextContent(cur));node=node.parentNode}return goog.string.trimLeft(buf.join("")).replace(/ +/g," ").length};
goog.dom.getNodeAtOffset=function(parent,offset,opt_result){var stack=[parent],pos=0,cur;while(stack.length>0&&pos<offset){cur=stack.pop();if(cur.nodeName in goog.dom.TAGS_TO_IGNORE_);else if(cur.nodeType==goog.dom.NodeType.TEXT){var text=cur.nodeValue.replace(/(\r\n|\r|\n)/g,"").replace(/ +/g," ");pos+=text.length}else if(cur.nodeName in goog.dom.PREDEFINED_TAG_VALUES_)pos+=goog.dom.PREDEFINED_TAG_VALUES_[cur.nodeName].length;else for(var i=cur.childNodes.length-1;i>=0;i--)stack.push(cur.childNodes[i])}if(goog.isObject(opt_result)){opt_result.remainder=
cur?cur.nodeValue.length+offset-pos-1:0;opt_result.node=cur}return cur};goog.dom.isNodeList=function(val){if(val&&typeof val.length=="number")if(goog.isObject(val))return typeof val.item=="function"||typeof val.item=="string";else if(goog.isFunction(val))return typeof val.item=="function";return false};
goog.dom.getAncestorByTagNameAndClass=function(element,opt_tag,opt_class){var tagName=opt_tag?opt_tag.toUpperCase():null;return goog.dom.getAncestor(element,function(node){return(!tagName||node.nodeName==tagName)&&(!opt_class||goog.dom.classes.has(node,opt_class))},true)};
goog.dom.getAncestor=function(element,matcher,opt_includeNode,opt_maxSearchSteps){if(!opt_includeNode)element=element.parentNode;var ignoreSearchSteps=opt_maxSearchSteps==null;var steps=0;while(element&&(ignoreSearchSteps||steps<=opt_maxSearchSteps)){if(matcher(element))return element;element=element.parentNode;steps++}return null};goog.dom.DomHelper=function(opt_document){this.document_=opt_document||goog.global.document||document};goog.dom.DomHelper.prototype.getDomHelper=goog.dom.getDomHelper;
goog.dom.DomHelper.prototype.setDocument=function(document){this.document_=document};goog.dom.DomHelper.prototype.getDocument=function(){return this.document_};goog.dom.DomHelper.prototype.getElement=function(element){if(goog.isString(element))return this.document_.getElementById(element);else return element};goog.dom.DomHelper.prototype.$=goog.dom.DomHelper.prototype.getElement;
goog.dom.DomHelper.prototype.getElementsByTagNameAndClass=function(opt_tag,opt_class,opt_el){return goog.dom.getElementsByTagNameAndClass_(this.document_,opt_tag,opt_class,opt_el)};goog.dom.DomHelper.prototype.getElementsByClass=function(className,opt_el){var doc=opt_el||this.document_;return goog.dom.getElementsByClass(className,doc)};goog.dom.DomHelper.prototype.getElementByClass=function(className,opt_el){var doc=opt_el||this.document_;return goog.dom.getElementByClass(className,doc)};
goog.dom.DomHelper.prototype.$$=goog.dom.DomHelper.prototype.getElementsByTagNameAndClass;goog.dom.DomHelper.prototype.setProperties=goog.dom.setProperties;goog.dom.DomHelper.prototype.getViewportSize=function(opt_window){return goog.dom.getViewportSize(opt_window||this.getWindow())};goog.dom.DomHelper.prototype.getDocumentHeight=function(){return goog.dom.getDocumentHeight_(this.getWindow())};goog.dom.Appendable;
goog.dom.DomHelper.prototype.createDom=function(tagName,opt_attributes,var_args){return goog.dom.createDom_(this.document_,arguments)};goog.dom.DomHelper.prototype.$dom=goog.dom.DomHelper.prototype.createDom;goog.dom.DomHelper.prototype.createElement=function(name){return this.document_.createElement(name)};goog.dom.DomHelper.prototype.createTextNode=function(content){return this.document_.createTextNode(content)};
goog.dom.DomHelper.prototype.createTable=function(rows,columns,opt_fillWithNbsp){return goog.dom.createTable_(this.document_,rows,columns,!!opt_fillWithNbsp)};goog.dom.DomHelper.prototype.htmlToDocumentFragment=function(htmlString){return goog.dom.htmlToDocumentFragment_(this.document_,htmlString)};goog.dom.DomHelper.prototype.getCompatMode=function(){return this.isCss1CompatMode()?"CSS1Compat":"BackCompat"};goog.dom.DomHelper.prototype.isCss1CompatMode=function(){return goog.dom.isCss1CompatMode_(this.document_)};
goog.dom.DomHelper.prototype.getWindow=function(){return goog.dom.getWindow_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScrollElement=function(){return goog.dom.getDocumentScrollElement_(this.document_)};goog.dom.DomHelper.prototype.getDocumentScroll=function(){return goog.dom.getDocumentScroll_(this.document_)};goog.dom.DomHelper.prototype.appendChild=goog.dom.appendChild;goog.dom.DomHelper.prototype.append=goog.dom.append;goog.dom.DomHelper.prototype.removeChildren=goog.dom.removeChildren;
goog.dom.DomHelper.prototype.insertSiblingBefore=goog.dom.insertSiblingBefore;goog.dom.DomHelper.prototype.insertSiblingAfter=goog.dom.insertSiblingAfter;goog.dom.DomHelper.prototype.removeNode=goog.dom.removeNode;goog.dom.DomHelper.prototype.replaceNode=goog.dom.replaceNode;goog.dom.DomHelper.prototype.flattenElement=goog.dom.flattenElement;goog.dom.DomHelper.prototype.getFirstElementChild=goog.dom.getFirstElementChild;goog.dom.DomHelper.prototype.getLastElementChild=goog.dom.getLastElementChild;
goog.dom.DomHelper.prototype.getNextElementSibling=goog.dom.getNextElementSibling;goog.dom.DomHelper.prototype.getPreviousElementSibling=goog.dom.getPreviousElementSibling;goog.dom.DomHelper.prototype.getNextNode=goog.dom.getNextNode;goog.dom.DomHelper.prototype.getPreviousNode=goog.dom.getPreviousNode;goog.dom.DomHelper.prototype.isNodeLike=goog.dom.isNodeLike;goog.dom.DomHelper.prototype.contains=goog.dom.contains;goog.dom.DomHelper.prototype.getOwnerDocument=goog.dom.getOwnerDocument;
goog.dom.DomHelper.prototype.getFrameContentDocument=goog.dom.getFrameContentDocument;goog.dom.DomHelper.prototype.getFrameContentWindow=goog.dom.getFrameContentWindow;goog.dom.DomHelper.prototype.setTextContent=goog.dom.setTextContent;goog.dom.DomHelper.prototype.findNode=goog.dom.findNode;goog.dom.DomHelper.prototype.findNodes=goog.dom.findNodes;goog.dom.DomHelper.prototype.getTextContent=goog.dom.getTextContent;goog.dom.DomHelper.prototype.getNodeTextLength=goog.dom.getNodeTextLength;
goog.dom.DomHelper.prototype.getNodeTextOffset=goog.dom.getNodeTextOffset;goog.dom.DomHelper.prototype.getAncestorByTagNameAndClass=goog.dom.getAncestorByTagNameAndClass;goog.dom.DomHelper.prototype.getAncestor=goog.dom.getAncestor;goog.provide("goog.math.Box");goog.require("goog.math.Coordinate");goog.math.Box=function(top,right,bottom,left){this.top=top;this.right=right;this.bottom=bottom;this.left=left};
goog.math.Box.boundingBox=function(var_args){var box=new goog.math.Box(arguments[0].y,arguments[0].x,arguments[0].y,arguments[0].x);for(var i=1;i<arguments.length;i++){var coord=arguments[i];box.top=Math.min(box.top,coord.y);box.right=Math.max(box.right,coord.x);box.bottom=Math.max(box.bottom,coord.y);box.left=Math.min(box.left,coord.x)}return box};goog.math.Box.prototype.clone=function(){return new goog.math.Box(this.top,this.right,this.bottom,this.left)};
if(goog.DEBUG)goog.math.Box.prototype.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};goog.math.Box.prototype.contains=function(other){return goog.math.Box.contains(this,other)};goog.math.Box.prototype.expand=function(top,opt_right,opt_bottom,opt_left){if(goog.isObject(top)){this.top-=top.top;this.right+=top.right;this.bottom+=top.bottom;this.left-=top.left}else{this.top-=top;this.right+=opt_right;this.bottom+=opt_bottom;this.left-=opt_left}return this};
goog.math.Box.prototype.expandToInclude=function(box){this.left=Math.min(this.left,box.left);this.top=Math.min(this.top,box.top);this.right=Math.max(this.right,box.right);this.bottom=Math.max(this.bottom,box.bottom)};goog.math.Box.equals=function(a,b){if(a==b)return true;if(!a||!b)return false;return a.top==b.top&&a.right==b.right&&a.bottom==b.bottom&&a.left==b.left};
goog.math.Box.contains=function(box,other){if(!box||!other)return false;if(other instanceof goog.math.Box)return other.left>=box.left&&other.right<=box.right&&other.top>=box.top&&other.bottom<=box.bottom;return other.x>=box.left&&other.x<=box.right&&other.y>=box.top&&other.y<=box.bottom};
goog.math.Box.distance=function(box,coord){if(coord.x>=box.left&&coord.x<=box.right){if(coord.y>=box.top&&coord.y<=box.bottom)return 0;return coord.y<box.top?box.top-coord.y:coord.y-box.bottom}if(coord.y>=box.top&&coord.y<=box.bottom)return coord.x<box.left?box.left-coord.x:coord.x-box.right;return goog.math.Coordinate.distance(coord,new goog.math.Coordinate(coord.x<box.left?box.left:box.right,coord.y<box.top?box.top:box.bottom))};
goog.math.Box.intersects=function(a,b){return a.left<=b.right&&b.left<=a.right&&a.top<=b.bottom&&b.top<=a.bottom};goog.provide("goog.math.Rect");goog.require("goog.math.Box");goog.require("goog.math.Size");goog.math.Rect=function(x,y,w,h){this.left=x;this.top=y;this.width=w;this.height=h};goog.math.Rect.prototype.clone=function(){return new goog.math.Rect(this.left,this.top,this.width,this.height)};goog.math.Rect.prototype.toBox=function(){var right=this.left+this.width;var bottom=this.top+this.height;return new goog.math.Box(this.top,right,bottom,this.left)};
goog.math.Rect.createFromBox=function(box){return new goog.math.Rect(box.left,box.top,box.right-box.left,box.bottom-box.top)};if(goog.DEBUG)goog.math.Rect.prototype.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};goog.math.Rect.equals=function(a,b){if(a==b)return true;if(!a||!b)return false;return a.left==b.left&&a.width==b.width&&a.top==b.top&&a.height==b.height};
goog.math.Rect.prototype.intersection=function(rect){var x0=Math.max(this.left,rect.left);var x1=Math.min(this.left+this.width,rect.left+rect.width);if(x0<=x1){var y0=Math.max(this.top,rect.top);var y1=Math.min(this.top+this.height,rect.top+rect.height);if(y0<=y1){this.left=x0;this.top=y0;this.width=x1-x0;this.height=y1-y0;return true}}return false};
goog.math.Rect.intersection=function(a,b){var x0=Math.max(a.left,b.left);var x1=Math.min(a.left+a.width,b.left+b.width);if(x0<=x1){var y0=Math.max(a.top,b.top);var y1=Math.min(a.top+a.height,b.top+b.height);if(y0<=y1)return new goog.math.Rect(x0,y0,x1-x0,y1-y0)}return null};goog.math.Rect.intersects=function(a,b){return a.left<=b.left+b.width&&b.left<=a.left+a.width&&a.top<=b.top+b.height&&b.top<=a.top+a.height};
goog.math.Rect.prototype.intersects=function(rect){return goog.math.Rect.intersects(this,rect)};
goog.math.Rect.difference=function(a,b){var intersection=goog.math.Rect.intersection(a,b);if(!intersection||!intersection.height||!intersection.width)return[a.clone()];var result=[];var top=a.top;var height=a.height;var ar=a.left+a.width;var ab=a.top+a.height;var br=b.left+b.width;var bb=b.top+b.height;if(b.top>a.top){result.push(new goog.math.Rect(a.left,a.top,a.width,b.top-a.top));top=b.top;height-=b.top-a.top}if(bb<ab){result.push(new goog.math.Rect(a.left,bb,a.width,ab-bb));height=bb-top}if(b.left>
a.left)result.push(new goog.math.Rect(a.left,top,b.left-a.left,height));if(br<ar)result.push(new goog.math.Rect(br,top,ar-br,height));return result};goog.math.Rect.prototype.difference=function(rect){return goog.math.Rect.difference(this,rect)};
goog.math.Rect.prototype.boundingRect=function(rect){var right=Math.max(this.left+this.width,rect.left+rect.width);var bottom=Math.max(this.top+this.height,rect.top+rect.height);this.left=Math.min(this.left,rect.left);this.top=Math.min(this.top,rect.top);this.width=right-this.left;this.height=bottom-this.top};goog.math.Rect.boundingRect=function(a,b){if(!a||!b)return null;var clone=a.clone();clone.boundingRect(b);return clone};
goog.math.Rect.prototype.contains=function(another){if(another instanceof goog.math.Rect)return this.left<=another.left&&this.left+this.width>=another.left+another.width&&this.top<=another.top&&this.top+this.height>=another.top+another.height;else return another.x>=this.left&&another.x<=this.left+this.width&&another.y>=this.top&&another.y<=this.top+this.height};goog.math.Rect.prototype.getSize=function(){return new goog.math.Size(this.width,this.height)};goog.provide("goog.style");goog.require("goog.array");goog.require("goog.dom");goog.require("goog.math.Box");goog.require("goog.math.Coordinate");goog.require("goog.math.Rect");goog.require("goog.math.Size");goog.require("goog.object");goog.require("goog.userAgent");goog.style.setStyle=function(element,style,opt_value){if(goog.isString(style))goog.style.setStyle_(element,opt_value,style);else goog.object.forEach(style,goog.partial(goog.style.setStyle_,element))};
goog.style.setStyle_=function(element,value,style){element.style[goog.style.toCamelCase(style)]=value};goog.style.getStyle=function(element,property){return element.style[goog.style.toCamelCase(property)]||""};goog.style.getComputedStyle=function(element,property){var doc=goog.dom.getOwnerDocument(element);if(doc.defaultView&&doc.defaultView.getComputedStyle){var styles=doc.defaultView.getComputedStyle(element,null);if(styles)return styles[property]||styles.getPropertyValue(property)}return""};
goog.style.getCascadedStyle=function(element,style){return element.currentStyle?element.currentStyle[style]:null};goog.style.getStyle_=function(element,style){return goog.style.getComputedStyle(element,style)||goog.style.getCascadedStyle(element,style)||element.style[style]};goog.style.getComputedPosition=function(element){return goog.style.getStyle_(element,"position")};goog.style.getBackgroundColor=function(element){return goog.style.getStyle_(element,"backgroundColor")};
goog.style.getComputedOverflowX=function(element){return goog.style.getStyle_(element,"overflowX")};goog.style.getComputedOverflowY=function(element){return goog.style.getStyle_(element,"overflowY")};goog.style.getComputedZIndex=function(element){return goog.style.getStyle_(element,"zIndex")};goog.style.getComputedTextAlign=function(element){return goog.style.getStyle_(element,"textAlign")};goog.style.getComputedCursor=function(element){return goog.style.getStyle_(element,"cursor")};
goog.style.setPosition=function(el,arg1,opt_arg2){var x,y;var buggyGeckoSubPixelPos=goog.userAgent.GECKO&&(goog.userAgent.MAC||goog.userAgent.X11)&&goog.userAgent.isVersion("1.9");if(arg1 instanceof goog.math.Coordinate){x=arg1.x;y=arg1.y}else{x=arg1;y=opt_arg2}el.style.left=goog.style.getPixelStyleValue_(x,buggyGeckoSubPixelPos);el.style.top=goog.style.getPixelStyleValue_(y,buggyGeckoSubPixelPos)};goog.style.getPosition=function(element){return new goog.math.Coordinate(element.offsetLeft,element.offsetTop)};
goog.style.getClientViewportElement=function(opt_node){var doc;if(opt_node)if(opt_node.nodeType==goog.dom.NodeType.DOCUMENT)doc=opt_node;else doc=goog.dom.getOwnerDocument(opt_node);else doc=goog.dom.getDocument();if(goog.userAgent.IE&&!goog.dom.getDomHelper(doc).isCss1CompatMode())return doc.body;return doc.documentElement};
goog.style.getBoundingClientRect_=function(el){var rect=el.getBoundingClientRect();if(goog.userAgent.IE){var doc=el.ownerDocument;rect.left-=doc.documentElement.clientLeft+doc.body.clientLeft;rect.top-=doc.documentElement.clientTop+doc.body.clientTop}return rect};
goog.style.getOffsetParent=function(element){if(goog.userAgent.IE)return element.offsetParent;var doc=goog.dom.getOwnerDocument(element);var positionStyle=goog.style.getStyle_(element,"position");var skipStatic=positionStyle=="fixed"||positionStyle=="absolute";for(var parent=element.parentNode;parent&&parent!=doc;parent=parent.parentNode){positionStyle=goog.style.getStyle_(parent,"position");skipStatic=skipStatic&&positionStyle=="static"&&parent!=doc.documentElement&&parent!=doc.body;if(!skipStatic&&
(parent.scrollWidth>parent.clientWidth||parent.scrollHeight>parent.clientHeight||positionStyle=="fixed"||positionStyle=="absolute"))return parent}return null};
goog.style.getVisibleRectForElement=function(element){var visibleRect=new goog.math.Box(0,Infinity,Infinity,0);var dom=goog.dom.getDomHelper(element);var body=dom.getDocument().body;var scrollEl=dom.getDocumentScrollElement();var inContainer;for(var el=element;el=goog.style.getOffsetParent(el);)if((!goog.userAgent.IE||el.clientWidth!=0)&&(!goog.userAgent.WEBKIT||el.clientHeight!=0||el!=body)&&(el.scrollWidth!=el.clientWidth||el.scrollHeight!=el.clientHeight)&&goog.style.getStyle_(el,"overflow")!=
"visible"){var pos=goog.style.getPageOffset(el);var client=goog.style.getClientLeftTop(el);pos.x+=client.x;pos.y+=client.y;visibleRect.top=Math.max(visibleRect.top,pos.y);visibleRect.right=Math.min(visibleRect.right,pos.x+el.clientWidth);visibleRect.bottom=Math.min(visibleRect.bottom,pos.y+el.clientHeight);visibleRect.left=Math.max(visibleRect.left,pos.x);inContainer=inContainer||el!=scrollEl}var scrollX=scrollEl.scrollLeft,scrollY=scrollEl.scrollTop;if(goog.userAgent.WEBKIT){visibleRect.left+=scrollX;
visibleRect.top+=scrollY}else{visibleRect.left=Math.max(visibleRect.left,scrollX);visibleRect.top=Math.max(visibleRect.top,scrollY)}if(!inContainer||goog.userAgent.WEBKIT){visibleRect.right+=scrollX;visibleRect.bottom+=scrollY}var winSize=dom.getViewportSize();visibleRect.right=Math.min(visibleRect.right,scrollX+winSize.width);visibleRect.bottom=Math.min(visibleRect.bottom,scrollY+winSize.height);return visibleRect.top>=0&&visibleRect.left>=0&&visibleRect.bottom>visibleRect.top&&visibleRect.right>
visibleRect.left?visibleRect:null};
goog.style.scrollIntoContainerView=function(element,container,opt_center){var elementPos=goog.style.getPageOffset(element);var containerPos=goog.style.getPageOffset(container);var containerBorder=goog.style.getBorderBox(container);var relX=elementPos.x-containerPos.x-containerBorder.left;var relY=elementPos.y-containerPos.y-containerBorder.top;var spaceX=container.clientWidth-element.offsetWidth;var spaceY=container.clientHeight-element.offsetHeight;if(opt_center){container.scrollLeft+=relX-spaceX/
2;container.scrollTop+=relY-spaceY/2}else{container.scrollLeft+=Math.min(relX,Math.max(relX-spaceX,0));container.scrollTop+=Math.min(relY,Math.max(relY-spaceY,0))}};
goog.style.getClientLeftTop=function(el){if(goog.userAgent.GECKO&&!goog.userAgent.isVersion("1.9")){var left=parseFloat(goog.style.getComputedStyle(el,"borderLeftWidth"));if(goog.style.isRightToLeft(el)){var scrollbarWidth=el.offsetWidth-el.clientWidth-left-parseFloat(goog.style.getComputedStyle(el,"borderRightWidth"));left+=scrollbarWidth}return new goog.math.Coordinate(left,parseFloat(goog.style.getComputedStyle(el,"borderTopWidth")))}return new goog.math.Coordinate(el.clientLeft,el.clientTop)};
goog.style.getPageOffset=function(el){var box,doc=goog.dom.getOwnerDocument(el);var positionStyle=goog.style.getStyle_(el,"position");var BUGGY_GECKO_BOX_OBJECT=goog.userAgent.GECKO&&doc.getBoxObjectFor&&!el.getBoundingClientRect&&positionStyle=="absolute"&&(box=doc.getBoxObjectFor(el))&&(box.screenX<0||box.screenY<0);var pos=new goog.math.Coordinate(0,0);var viewportElement=goog.style.getClientViewportElement(doc);if(el==viewportElement)return pos;if(el.getBoundingClientRect){box=goog.style.getBoundingClientRect_(el);
var scrollCoord=goog.dom.getDomHelper(doc).getDocumentScroll();pos.x=box.left+scrollCoord.x;pos.y=box.top+scrollCoord.y}else if(doc.getBoxObjectFor&&!BUGGY_GECKO_BOX_OBJECT){box=doc.getBoxObjectFor(el);var vpBox=doc.getBoxObjectFor(viewportElement);pos.x=box.screenX-vpBox.screenX;pos.y=box.screenY-vpBox.screenY}else{var parent=el;do{pos.x+=parent.offsetLeft;pos.y+=parent.offsetTop;if(parent!=el){pos.x+=parent.clientLeft||0;pos.y+=parent.clientTop||0}if(goog.userAgent.WEBKIT&&goog.style.getComputedPosition(parent)==
"fixed"){pos.x+=doc.body.scrollLeft;pos.y+=doc.body.scrollTop;break}parent=parent.offsetParent}while(parent&&parent!=el);if(goog.userAgent.OPERA||goog.userAgent.WEBKIT&&positionStyle=="absolute")pos.y-=doc.body.offsetTop;for(parent=el;(parent=goog.style.getOffsetParent(parent))&&parent!=doc.body&&parent!=viewportElement;){pos.x-=parent.scrollLeft;if(!goog.userAgent.OPERA||parent.tagName!="TR")pos.y-=parent.scrollTop}}return pos};goog.style.getPageOffsetLeft=function(el){return goog.style.getPageOffset(el).x};
goog.style.getPageOffsetTop=function(el){return goog.style.getPageOffset(el).y};
goog.style.getFramedPageOffset=function(el,relativeWin){var position=new goog.math.Coordinate(0,0);var currentWin=goog.dom.getWindow(goog.dom.getOwnerDocument(el));var currentEl=el;do{var offset=currentWin==relativeWin?goog.style.getPageOffset(currentEl):goog.style.getClientPosition(currentEl);position.x+=offset.x;position.y+=offset.y}while(currentWin&&currentWin!=relativeWin&&(currentEl=currentWin.frameElement)&&(currentWin=currentWin.parent));return position};
goog.style.translateRectForAnotherFrame=function(rect,origBase,newBase){if(origBase.getDocument()!=newBase.getDocument()){var body=origBase.getDocument().body;var pos=goog.style.getFramedPageOffset(body,newBase.getWindow());pos=goog.math.Coordinate.difference(pos,goog.style.getPageOffset(body));if(goog.userAgent.IE&&!origBase.isCss1CompatMode())pos=goog.math.Coordinate.difference(pos,origBase.getDocumentScroll());rect.left+=pos.x;rect.top+=pos.y}};
goog.style.getRelativePosition=function(a,b){var ap=goog.style.getClientPosition(a);var bp=goog.style.getClientPosition(b);return new goog.math.Coordinate(ap.x-bp.x,ap.y-bp.y)};
goog.style.getClientPosition=function(el){var pos=new goog.math.Coordinate;if(el.nodeType==goog.dom.NodeType.ELEMENT)if(el.getBoundingClientRect){var box=goog.style.getBoundingClientRect_(el);pos.x=box.left;pos.y=box.top}else{var scrollCoord=goog.dom.getDomHelper(el).getDocumentScroll();var pageCoord=goog.style.getPageOffset(el);pos.x=pageCoord.x-scrollCoord.x;pos.y=pageCoord.y-scrollCoord.y}else{pos.x=el.clientX;pos.y=el.clientY}return pos};
goog.style.setPageOffset=function(el,x,opt_y){var cur=goog.style.getPageOffset(el);if(x instanceof goog.math.Coordinate){opt_y=x.y;x=x.x}var dx=x-cur.x;var dy=opt_y-cur.y;goog.style.setPosition(el,el.offsetLeft+dx,el.offsetTop+dy)};goog.style.setSize=function(element,w,opt_h){var h;if(w instanceof goog.math.Size){h=w.height;w=w.width}else{if(opt_h==undefined)throw Error("missing height argument");h=opt_h}goog.style.setWidth(element,w);goog.style.setHeight(element,h)};
goog.style.getPixelStyleValue_=function(value,round){if(typeof value=="number")value=(round?Math.round(value):value)+"px";return value};goog.style.setHeight=function(element,height){element.style.height=goog.style.getPixelStyleValue_(height,true)};goog.style.setWidth=function(element,width){element.style.width=goog.style.getPixelStyleValue_(width,true)};
goog.style.getSize=function(element){var hasOperaBug=goog.userAgent.OPERA&&!goog.userAgent.isVersion("10");if(goog.style.getStyle_(element,"display")!="none")if(hasOperaBug)return new goog.math.Size(element.offsetWidth||element.clientWidth,element.offsetHeight||element.clientHeight);else return new goog.math.Size(element.offsetWidth,element.offsetHeight);var style=element.style;var originalDisplay=style.display;var originalVisibility=style.visibility;var originalPosition=style.position;style.visibility=
"hidden";style.position="absolute";style.display="inline";var originalWidth,originalHeight;if(hasOperaBug){originalWidth=element.offsetWidth||element.clientWidth;originalHeight=element.offsetHeight||element.clientHeight}else{originalWidth=element.offsetWidth;originalHeight=element.offsetHeight}style.display=originalDisplay;style.position=originalPosition;style.visibility=originalVisibility;return new goog.math.Size(originalWidth,originalHeight)};
goog.style.getBounds=function(element){var o=goog.style.getPageOffset(element);var s=goog.style.getSize(element);return new goog.math.Rect(o.x,o.y,s.width,s.height)};goog.style.toCamelCaseCache_={};goog.style.toCamelCase=function(selector){return goog.style.toCamelCaseCache_[selector]||(goog.style.toCamelCaseCache_[selector]=String(selector).replace(/\-([a-z])/g,function(all,match){return match.toUpperCase()}))};goog.style.toSelectorCaseCache_={};
goog.style.toSelectorCase=function(selector){return goog.style.toSelectorCaseCache_[selector]||(goog.style.toSelectorCaseCache_[selector]=selector.replace(/([A-Z])/g,"-$1").toLowerCase())};goog.style.getOpacity=function(el){var style=el.style;var result="";if("opacity"in style)result=style.opacity;else if("MozOpacity"in style)result=style.MozOpacity;else if("filter"in style){var match=style.filter.match(/alpha\(opacity=([\d.]+)\)/);if(match)result=String(match[1]/100)}return result==""?result:Number(result)};
goog.style.setOpacity=function(el,alpha){var style=el.style;if("opacity"in style)style.opacity=alpha;else if("MozOpacity"in style)style.MozOpacity=alpha;else if("filter"in style)if(alpha==="")style.filter="";else style.filter="alpha(opacity="+alpha*100+")"};
goog.style.setTransparentBackgroundImage=function(el,src){var style=el.style;if(goog.userAgent.IE&&!goog.userAgent.isVersion("8"))style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader("+'src="'+src+'", sizingMethod="crop")';else{style.backgroundImage="url("+src+")";style.backgroundPosition="top left";style.backgroundRepeat="no-repeat"}};goog.style.clearTransparentBackgroundImage=function(el){var style=el.style;if("filter"in style)style.filter="";else style.backgroundImage="none"};
goog.style.showElement=function(el,display){el.style.display=display?"":"none"};goog.style.isElementShown=function(el){return el.style.display!="none"};
goog.style.installStyles=function(stylesString,opt_node){var dh=goog.dom.getDomHelper(opt_node);var styleSheet=null;if(goog.userAgent.IE){styleSheet=dh.getDocument().createStyleSheet();goog.style.setStyles(styleSheet,stylesString)}else{var head=dh.getElementsByTagNameAndClass("head")[0];if(!head){var body=dh.getElementsByTagNameAndClass("body")[0];head=dh.createDom("head");body.parentNode.insertBefore(head,body)}styleSheet=dh.createDom("style");goog.style.setStyles(styleSheet,stylesString);dh.appendChild(head,
styleSheet)}return styleSheet};goog.style.uninstallStyles=function(styleSheet){var node=styleSheet.ownerNode||styleSheet.owningElement||styleSheet;goog.dom.removeNode(node)};goog.style.setStyles=function(element,stylesString){if(goog.userAgent.IE)element.cssText=stylesString;else{var propToSet=goog.userAgent.WEBKIT?"innerText":"innerHTML";element[propToSet]=stylesString}};
goog.style.setPreWrap=function(el){var style=el.style;if(goog.userAgent.IE&&!goog.userAgent.isVersion("8")){style.whiteSpace="pre";style.wordWrap="break-word"}else if(goog.userAgent.GECKO)style.whiteSpace="-moz-pre-wrap";else if(goog.userAgent.OPERA)style.whiteSpace="-o-pre-wrap";else style.whiteSpace="pre-wrap"};
goog.style.setInlineBlock=function(el){var style=el.style;style.position="relative";if(goog.userAgent.IE&&!goog.userAgent.isVersion("8")){style.zoom="1";style.display="inline"}else if(goog.userAgent.GECKO)style.display=goog.userAgent.isVersion("1.9a")?"inline-block":"-moz-inline-box";else style.display="inline-block"};goog.style.isRightToLeft=function(el){return"rtl"==goog.style.getStyle_(el,"direction")};
goog.style.unselectableStyle_=goog.userAgent.GECKO?"MozUserSelect":goog.userAgent.WEBKIT?"WebkitUserSelect":null;goog.style.isUnselectable=function(el){if(goog.style.unselectableStyle_)return el.style[goog.style.unselectableStyle_].toLowerCase()=="none";else if(goog.userAgent.IE||goog.userAgent.OPERA)return el.getAttribute("unselectable")=="on";return false};
goog.style.setUnselectable=function(el,unselectable,opt_noRecurse){var descendants=!opt_noRecurse?el.getElementsByTagName("*"):null;var name=goog.style.unselectableStyle_;if(name){var value=unselectable?"none":"";el.style[name]=value;if(descendants)for(var i=0,descendant;descendant=descendants[i];i++)descendant.style[name]=value}else if(goog.userAgent.IE||goog.userAgent.OPERA){var value=unselectable?"on":"";el.setAttribute("unselectable",value);if(descendants)for(var i=0,descendant;descendant=descendants[i];i++)descendant.setAttribute("unselectable",
value)}};goog.style.getBorderBoxSize=function(element){return new goog.math.Size(element.offsetWidth,element.offsetHeight)};
goog.style.setBorderBoxSize=function(element,size){var doc=goog.dom.getOwnerDocument(element);var isCss1CompatMode=goog.dom.getDomHelper(doc).isCss1CompatMode();if(goog.userAgent.IE&&(!isCss1CompatMode||!goog.userAgent.isVersion("8"))){var style=element.style;if(isCss1CompatMode){var paddingBox=goog.style.getPaddingBox(element);var borderBox=goog.style.getBorderBox(element);style.pixelWidth=size.width-borderBox.left-paddingBox.left-paddingBox.right-borderBox.right;style.pixelHeight=size.height-borderBox.top-
paddingBox.top-paddingBox.bottom-borderBox.bottom}else{style.pixelWidth=size.width;style.pixelHeight=size.height}}else goog.style.setBoxSizingSize_(element,size,"border-box")};
goog.style.getContentBoxSize=function(element){var doc=goog.dom.getOwnerDocument(element);var ieCurrentStyle=goog.userAgent.IE&&element.currentStyle;if(ieCurrentStyle&&goog.dom.getDomHelper(doc).isCss1CompatMode()&&ieCurrentStyle.width!="auto"&&ieCurrentStyle.height!="auto"&&!ieCurrentStyle.boxSizing){var width=goog.style.getIePixelValue_(element,ieCurrentStyle.width,"width","pixelWidth");var height=goog.style.getIePixelValue_(element,ieCurrentStyle.height,"height","pixelHeight");return new goog.math.Size(width,
height)}else{var borderBoxSize=goog.style.getBorderBoxSize(element);var paddingBox=goog.style.getPaddingBox(element);var borderBox=goog.style.getBorderBox(element);return new goog.math.Size(borderBoxSize.width-borderBox.left-paddingBox.left-paddingBox.right-borderBox.right,borderBoxSize.height-borderBox.top-paddingBox.top-paddingBox.bottom-borderBox.bottom)}};
goog.style.setContentBoxSize=function(element,size){var doc=goog.dom.getOwnerDocument(element);var isCss1CompatMode=goog.dom.getDomHelper(doc).isCss1CompatMode();if(goog.userAgent.IE&&(!isCss1CompatMode||!goog.userAgent.isVersion("8"))){var style=element.style;if(isCss1CompatMode){style.pixelWidth=size.width;style.pixelHeight=size.height}else{var paddingBox=goog.style.getPaddingBox(element);var borderBox=goog.style.getBorderBox(element);style.pixelWidth=size.width+borderBox.left+paddingBox.left+paddingBox.right+
borderBox.right;style.pixelHeight=size.height+borderBox.top+paddingBox.top+paddingBox.bottom+borderBox.bottom}}else goog.style.setBoxSizingSize_(element,size,"content-box")};
goog.style.setBoxSizingSize_=function(element,size,boxSizing){var style=element.style;if(goog.userAgent.GECKO)style.MozBoxSizing=boxSizing;else if(goog.userAgent.WEBKIT)style.WebkitBoxSizing=boxSizing;else if(goog.userAgent.OPERA&&!goog.userAgent.isVersion("9.50"))if(boxSizing)style.setProperty("box-sizing",boxSizing);else style.removeProperty("box-sizing");else style.boxSizing=boxSizing;style.width=size.width+"px";style.height=size.height+"px"};
goog.style.getIePixelValue_=function(element,value,name,pixelName){if(/^\d+px?$/.test(value))return parseInt(value,10);else{var oldStyleValue=element.style[name];var oldRuntimeValue=element.runtimeStyle[name];element.runtimeStyle[name]=element.currentStyle[name];element.style[name]=value;var pixelValue=element.style[pixelName];element.style[name]=oldStyleValue;element.runtimeStyle[name]=oldRuntimeValue;return pixelValue}};
goog.style.getIePixelDistance_=function(element,propName){return goog.style.getIePixelValue_(element,goog.style.getCascadedStyle(element,propName),"left","pixelLeft")};
goog.style.getBox_=function(element,stylePrefix){if(goog.userAgent.IE){var left=goog.style.getIePixelDistance_(element,stylePrefix+"Left");var right=goog.style.getIePixelDistance_(element,stylePrefix+"Right");var top=goog.style.getIePixelDistance_(element,stylePrefix+"Top");var bottom=goog.style.getIePixelDistance_(element,stylePrefix+"Bottom");return new goog.math.Box(top,right,bottom,left)}else{var left=goog.style.getComputedStyle(element,stylePrefix+"Left");var right=goog.style.getComputedStyle(element,
stylePrefix+"Right");var top=goog.style.getComputedStyle(element,stylePrefix+"Top");var bottom=goog.style.getComputedStyle(element,stylePrefix+"Bottom");return new goog.math.Box(parseFloat(top),parseFloat(right),parseFloat(bottom),parseFloat(left))}};goog.style.getPaddingBox=function(element){return goog.style.getBox_(element,"padding")};goog.style.getMarginBox=function(element){return goog.style.getBox_(element,"margin")};goog.style.ieBorderWidthKeywords_={thin:2,medium:4,thick:6};
goog.style.getIePixelBorder_=function(element,prop){if(goog.style.getCascadedStyle(element,prop+"Style")=="none")return 0;var width=goog.style.getCascadedStyle(element,prop+"Width");if(width in goog.style.ieBorderWidthKeywords_)return goog.style.ieBorderWidthKeywords_[width];return goog.style.getIePixelValue_(element,width,"left","pixelLeft")};
goog.style.getBorderBox=function(element){if(goog.userAgent.IE){var left=goog.style.getIePixelBorder_(element,"borderLeft");var right=goog.style.getIePixelBorder_(element,"borderRight");var top=goog.style.getIePixelBorder_(element,"borderTop");var bottom=goog.style.getIePixelBorder_(element,"borderBottom");return new goog.math.Box(top,right,bottom,left)}else{var left=goog.style.getComputedStyle(element,"borderLeftWidth");var right=goog.style.getComputedStyle(element,"borderRightWidth");var top=goog.style.getComputedStyle(element,
"borderTopWidth");var bottom=goog.style.getComputedStyle(element,"borderBottomWidth");return new goog.math.Box(parseFloat(top),parseFloat(right),parseFloat(bottom),parseFloat(left))}};
goog.style.getFontFamily=function(el){var doc=goog.dom.getOwnerDocument(el);var font="";if(doc.body.createTextRange){var range=doc.body.createTextRange();range.moveToElementText(el);try{font=range.queryCommandValue("FontName")}catch(e){font=""}}if(!font){font=goog.style.getStyle_(el,"fontFamily");if(goog.userAgent.OPERA&&goog.userAgent.LINUX)font=font.replace(/ \[[^\]]*\]/,"")}var fontsArray=font.split(",");if(fontsArray.length>1)font=fontsArray[0];return goog.string.stripQuotes(font,"\"'")};
goog.style.lengthUnitRegex_=/[^\d]+$/;goog.style.getLengthUnits=function(value){var units=value.match(goog.style.lengthUnitRegex_);return units&&units[0]||null};goog.style.ABSOLUTE_CSS_LENGTH_UNITS_={cm:1,"in":1,mm:1,pc:1,pt:1};goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_={em:1,ex:1};
goog.style.getFontSize=function(el){var fontSize=goog.style.getStyle_(el,"fontSize");var sizeUnits=goog.style.getLengthUnits(fontSize);if(fontSize&&"px"==sizeUnits)return parseInt(fontSize,10);if(goog.userAgent.IE)if(sizeUnits in goog.style.ABSOLUTE_CSS_LENGTH_UNITS_)return goog.style.getIePixelValue_(el,fontSize,"left","pixelLeft");else if(el.parentNode&&el.parentNode.nodeType==goog.dom.NodeType.ELEMENT&&sizeUnits in goog.style.CONVERTIBLE_RELATIVE_CSS_UNITS_){var parentElement=el.parentNode;var parentSize=
goog.style.getStyle_(parentElement,"fontSize");return goog.style.getIePixelValue_(parentElement,fontSize==parentSize?"1em":fontSize,"left","pixelLeft")}var sizeElement=goog.dom.createDom("span",{style:"visibility:hidden;position:absolute;"+"line-height:0;padding:0;margin:0;border:0;height:1em;"});goog.dom.appendChild(el,sizeElement);fontSize=sizeElement.offsetHeight;goog.dom.removeNode(sizeElement);return fontSize};
goog.style.parseStyleAttribute=function(value){var result={};goog.array.forEach(value.split(/\s*;\s*/),function(pair){var keyValue=pair.split(/\s*:\s*/);if(keyValue.length==2)result[goog.style.toCamelCase(keyValue[0].toLowerCase())]=keyValue[1]});return result};goog.style.toStyleAttribute=function(obj){var buffer=[];goog.object.forEach(obj,function(value,key){buffer.push(goog.style.toSelectorCase(key),":",value,";")});return buffer.join("")};
goog.style.setFloat=function(el,value){el.style[goog.userAgent.IE?"styleFloat":"cssFloat"]=value};goog.style.getFloat=function(el){return el.style[goog.userAgent.IE?"styleFloat":"cssFloat"]||""};
goog.style.getScrollbarWidth=function(){var mockElement=goog.dom.createElement("div");mockElement.style.cssText="visibility:hidden;overflow:scroll;"+"position:absolute;top:0;width:100px;height:100px";goog.dom.appendChild(goog.dom.getDocument().body,mockElement);var width=mockElement.offsetWidth-mockElement.clientWidth;goog.dom.removeNode(mockElement);return width};goog.provide("goog.debug.DivConsole");goog.require("goog.debug.HtmlFormatter");goog.require("goog.debug.LogManager");goog.require("goog.style");goog.debug.DivConsole=function(element){this.publishHandler_=goog.bind(this.addLogRecord,this);this.formatter_=new goog.debug.HtmlFormatter;this.formatter_.showAbsoluteTime=false;this.isCapturing_=false;this.element_=element;this.elementOwnerDocument_=this.element_.ownerDocument||this.element_.document;this.installStyles()};
goog.debug.DivConsole.prototype.installStyles=function(){goog.style.installStyles(".dbg-sev{color:#F00}"+".dbg-w{color:#C40}"+".dbg-sh{font-weight:bold;color:#000}"+".dbg-i{color:#444}"+".dbg-f{color:#999}"+".dbg-ev{color:#0A0}"+".dbg-m{color:#990}"+".logmsg{border-bottom:1px solid #CCC;padding:2px}"+".logsep{background-color: #8C8;}"+".logdiv{border:1px solid #CCC;background-color:#FCFCFC;"+"font:medium monospace}",this.element_);this.element_.className+=" logdiv"};
goog.debug.DivConsole.prototype.setCapturing=function(capturing){if(capturing==this.isCapturing_)return;var rootLogger=goog.debug.LogManager.getRoot();if(capturing)rootLogger.addHandler(this.publishHandler_);else{rootLogger.removeHandler(this.publishHandler_);this.logBuffer=""}this.isCapturing_=capturing};
goog.debug.DivConsole.prototype.addLogRecord=function(logRecord){var scroll=this.element_.scrollHeight-this.element_.scrollTop-this.element_.clientHeight<=100;var div=this.elementOwnerDocument_.createElement("div");div.className="logmsg";div.innerHTML=this.formatter_.formatRecord(logRecord);this.element_.appendChild(div);if(scroll)this.element_.scrollTop=this.element_.scrollHeight};goog.debug.DivConsole.prototype.getFormatter=function(){return this.formatter_};
goog.debug.DivConsole.prototype.setFormatter=function(formatter){this.formatter_=formatter};goog.debug.DivConsole.prototype.addSeparator=function(){var div=this.elementOwnerDocument_.createElement("div");div.className="logmsg logsep";this.element_.appendChild(div)};goog.debug.DivConsole.prototype.clear=function(){this.element_.innerHTML=""};goog.provide("goog.Disposable");goog.provide("goog.dispose");goog.Disposable=function(){};goog.Disposable.prototype.disposed_=false;goog.Disposable.prototype.isDisposed=function(){return this.disposed_};goog.Disposable.prototype.getDisposed=goog.Disposable.prototype.isDisposed;goog.Disposable.prototype.dispose=function(){if(!this.disposed_){this.disposed_=true;this.disposeInternal()}};goog.Disposable.prototype.disposeInternal=function(){};goog.dispose=function(obj){if(obj&&typeof obj.dispose=="function")obj.dispose()};goog.provide("goog.events.Event");goog.require("goog.Disposable");goog.events.Event=function(type,opt_target){goog.Disposable.call(this);this.type=type;this.target=opt_target;this.currentTarget=this.target};goog.inherits(goog.events.Event,goog.Disposable);goog.events.Event.prototype.disposeInternal=function(){delete this.type;delete this.target;delete this.currentTarget};goog.events.Event.prototype.propagationStopped_=false;goog.events.Event.prototype.returnValue_=true;
goog.events.Event.prototype.stopPropagation=function(){this.propagationStopped_=true};goog.events.Event.prototype.preventDefault=function(){this.returnValue_=false};goog.events.Event.stopPropagation=function(e){e.stopPropagation()};goog.events.Event.preventDefault=function(e){e.preventDefault()};goog.provide("goog.events.EventType");goog.require("goog.userAgent");
goog.events.EventType={CLICK:"click",DBLCLICK:"dblclick",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEMOVE:"mousemove",SELECTSTART:"selectstart",KEYPRESS:"keypress",KEYDOWN:"keydown",KEYUP:"keyup",BLUR:"blur",FOCUS:"focus",DEACTIVATE:"deactivate",FOCUSIN:goog.userAgent.IE?"focusin":"DOMFocusIn",FOCUSOUT:goog.userAgent.IE?"focusout":"DOMFocusOut",CHANGE:"change",SELECT:"select",SUBMIT:"submit",INPUT:"input",PROPERTYCHANGE:"propertychange",DRAGSTART:"dragstart",
DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",TOUCHSTART:"touchstart",TOUCHMOVE:"touchmove",TOUCHEND:"touchend",TOUCHCANCEL:"touchcancel",CONTEXTMENU:"contextmenu",ERROR:"error",HELP:"help",LOAD:"load",LOSECAPTURE:"losecapture",READYSTATECHANGE:"readystatechange",RESIZE:"resize",SCROLL:"scroll",UNLOAD:"unload",HASHCHANGE:"hashchange",POPSTATE:"popstate"};goog.provide("goog.events.KeyCodes");goog.require("goog.userAgent");
goog.events.KeyCodes={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,CONTEXT_MENU:93,NUM_ZERO:96,
NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,PHANTOM:255};
goog.events.KeyCodes.isTextModifyingKeyEvent=function(e){if(e.altKey&&!e.ctrlKey||e.metaKey||e.keyCode>=goog.events.KeyCodes.F1&&e.keyCode<=goog.events.KeyCodes.F12)return false;switch(e.keyCode){case goog.events.KeyCodes.ALT:case goog.events.KeyCodes.CAPS_LOCK:case goog.events.KeyCodes.CONTEXT_MENU:case goog.events.KeyCodes.CTRL:case goog.events.KeyCodes.DOWN:case goog.events.KeyCodes.END:case goog.events.KeyCodes.ESC:case goog.events.KeyCodes.HOME:case goog.events.KeyCodes.INSERT:case goog.events.KeyCodes.LEFT:case goog.events.KeyCodes.MAC_FF_META:case goog.events.KeyCodes.META:case goog.events.KeyCodes.NUMLOCK:case goog.events.KeyCodes.NUM_CENTER:case goog.events.KeyCodes.PAGE_DOWN:case goog.events.KeyCodes.PAGE_UP:case goog.events.KeyCodes.PAUSE:case goog.events.KeyCodes.PHANTOM:case goog.events.KeyCodes.PRINT_SCREEN:case goog.events.KeyCodes.RIGHT:case goog.events.KeyCodes.SHIFT:case goog.events.KeyCodes.UP:case goog.events.KeyCodes.WIN_KEY:return false;
default:return true}};
goog.events.KeyCodes.firesKeyPressEvent=function(keyCode,opt_heldKeyCode,opt_shiftKey,opt_ctrlKey,opt_altKey){if(!goog.userAgent.IE&&!(goog.userAgent.WEBKIT&&goog.userAgent.isVersion("525")))return true;if(goog.userAgent.MAC&&opt_altKey)return goog.events.KeyCodes.isCharacterKey(keyCode);if(opt_altKey&&!opt_ctrlKey)return false;if(!opt_shiftKey&&(opt_heldKeyCode==goog.events.KeyCodes.CTRL||opt_heldKeyCode==goog.events.KeyCodes.ALT))return false;if(goog.userAgent.IE&&opt_ctrlKey&&opt_heldKeyCode==
keyCode)return false;switch(keyCode){case goog.events.KeyCodes.ENTER:return true;case goog.events.KeyCodes.ESC:return!goog.userAgent.WEBKIT}return goog.events.KeyCodes.isCharacterKey(keyCode)};
goog.events.KeyCodes.isCharacterKey=function(keyCode){if(keyCode>=goog.events.KeyCodes.ZERO&&keyCode<=goog.events.KeyCodes.NINE)return true;if(keyCode>=goog.events.KeyCodes.NUM_ZERO&&keyCode<=goog.events.KeyCodes.NUM_MULTIPLY)return true;if(keyCode>=goog.events.KeyCodes.A&&keyCode<=goog.events.KeyCodes.Z)return true;if(goog.userAgent.WEBKIT&&keyCode==0)return true;switch(keyCode){case goog.events.KeyCodes.SPACE:case goog.events.KeyCodes.QUESTION_MARK:case goog.events.KeyCodes.NUM_PLUS:case goog.events.KeyCodes.NUM_MINUS:case goog.events.KeyCodes.NUM_PERIOD:case goog.events.KeyCodes.NUM_DIVISION:case goog.events.KeyCodes.SEMICOLON:case goog.events.KeyCodes.DASH:case goog.events.KeyCodes.EQUALS:case goog.events.KeyCodes.COMMA:case goog.events.KeyCodes.PERIOD:case goog.events.KeyCodes.SLASH:case goog.events.KeyCodes.APOSTROPHE:case goog.events.KeyCodes.SINGLE_QUOTE:case goog.events.KeyCodes.OPEN_SQUARE_BRACKET:case goog.events.KeyCodes.BACKSLASH:case goog.events.KeyCodes.CLOSE_SQUARE_BRACKET:return true;
default:return false}};goog.provide("goog.debug.EntryPointMonitor");goog.provide("goog.debug.entryPointRegistry");goog.debug.EntryPointMonitor=function(){};goog.debug.EntryPointMonitor.prototype.wrap;goog.debug.EntryPointMonitor.prototype.unwrap;goog.debug.entryPointRegistry.refList_=[];goog.debug.entryPointRegistry.register=function(callback){goog.debug.entryPointRegistry.refList_[goog.debug.entryPointRegistry.refList_.length]=callback};
goog.debug.entryPointRegistry.monitorAll=function(monitor){var transformer=goog.bind(monitor.wrap,monitor);for(var i=0;i<goog.debug.entryPointRegistry.refList_.length;i++)goog.debug.entryPointRegistry.refList_[i](transformer)};goog.debug.entryPointRegistry.unmonitorAllIfPossible=function(monitor){var transformer=goog.bind(monitor.unwrap,monitor);for(var i=0;i<goog.debug.entryPointRegistry.refList_.length;i++)goog.debug.entryPointRegistry.refList_[i](transformer)};goog.provide("goog.debug.errorHandlerWeakDep");goog.debug.errorHandlerWeakDep={protectEntryPoint:function(fn,opt_tracers){return fn}};goog.provide("goog.events.BrowserFeature");goog.require("goog.userAgent");goog.events.BrowserFeature={HAS_W3C_BUTTON:!goog.userAgent.IE||goog.userAgent.isVersion("9"),SET_KEY_CODE_TO_PREVENT_DEFAULT:goog.userAgent.IE&&!goog.userAgent.isVersion("8")};goog.provide("goog.events.BrowserEvent");goog.provide("goog.events.BrowserEvent.MouseButton");goog.require("goog.events.BrowserFeature");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.userAgent");goog.events.BrowserEvent=function(opt_e,opt_currentTarget){if(opt_e)this.init(opt_e,opt_currentTarget)};goog.inherits(goog.events.BrowserEvent,goog.events.Event);goog.events.BrowserEvent.MouseButton={LEFT:0,MIDDLE:1,RIGHT:2};
goog.events.BrowserEvent.IEButtonMap_=[1,4,2];goog.events.BrowserEvent.prototype.target=null;goog.events.BrowserEvent.prototype.currentTarget;goog.events.BrowserEvent.prototype.relatedTarget=null;goog.events.BrowserEvent.prototype.offsetX=0;goog.events.BrowserEvent.prototype.offsetY=0;goog.events.BrowserEvent.prototype.clientX=0;goog.events.BrowserEvent.prototype.clientY=0;goog.events.BrowserEvent.prototype.screenX=0;goog.events.BrowserEvent.prototype.screenY=0;
goog.events.BrowserEvent.prototype.button=0;goog.events.BrowserEvent.prototype.keyCode=0;goog.events.BrowserEvent.prototype.charCode=0;goog.events.BrowserEvent.prototype.ctrlKey=false;goog.events.BrowserEvent.prototype.altKey=false;goog.events.BrowserEvent.prototype.shiftKey=false;goog.events.BrowserEvent.prototype.metaKey=false;goog.events.BrowserEvent.prototype.state;goog.events.BrowserEvent.prototype.platformModifierKey=false;goog.events.BrowserEvent.prototype.event_=null;
goog.events.BrowserEvent.prototype.init=function(e,opt_currentTarget){var type=this.type=e.type;this.target=e.target||e.srcElement;this.currentTarget=opt_currentTarget;var relatedTarget=e.relatedTarget;if(relatedTarget){if(goog.userAgent.GECKO)try{relatedTarget=relatedTarget.nodeName&&relatedTarget}catch(err){relatedTarget=null}}else if(type==goog.events.EventType.MOUSEOVER)relatedTarget=e.fromElement;else if(type==goog.events.EventType.MOUSEOUT)relatedTarget=e.toElement;this.relatedTarget=relatedTarget;
this.offsetX=e.offsetX!==undefined?e.offsetX:e.layerX;this.offsetY=e.offsetY!==undefined?e.offsetY:e.layerY;this.clientX=e.clientX!==undefined?e.clientX:e.pageX;this.clientY=e.clientY!==undefined?e.clientY:e.pageY;this.screenX=e.screenX||0;this.screenY=e.screenY||0;this.button=e.button;this.keyCode=e.keyCode||0;this.charCode=e.charCode||(type=="keypress"?e.keyCode:0);this.ctrlKey=e.ctrlKey;this.altKey=e.altKey;this.shiftKey=e.shiftKey;this.metaKey=e.metaKey;this.platformModifierKey=goog.userAgent.MAC?
e.metaKey:e.ctrlKey;this.state=e.state;this.event_=e;delete this.returnValue_;delete this.propagationStopped_};goog.events.BrowserEvent.prototype.isButton=function(button){if(!goog.events.BrowserFeature.HAS_W3C_BUTTON)if(this.type=="click")return button==goog.events.BrowserEvent.MouseButton.LEFT;else return!!(this.event_.button&goog.events.BrowserEvent.IEButtonMap_[button]);else return this.event_.button==button};
goog.events.BrowserEvent.prototype.stopPropagation=function(){goog.events.BrowserEvent.superClass_.stopPropagation.call(this);if(this.event_.stopPropagation)this.event_.stopPropagation();else this.event_.cancelBubble=true};
goog.events.BrowserEvent.prototype.preventDefault=function(){goog.events.BrowserEvent.superClass_.preventDefault.call(this);var be=this.event_;if(!be.preventDefault){be.returnValue=false;if(goog.events.BrowserFeature.SET_KEY_CODE_TO_PREVENT_DEFAULT)try{var VK_F1=112;var VK_F12=123;if(be.ctrlKey||be.keyCode>=VK_F1&&be.keyCode<=VK_F12)be.keyCode=-1}catch(ex){}}else be.preventDefault()};goog.events.BrowserEvent.prototype.getBrowserEvent=function(){return this.event_};
goog.events.BrowserEvent.prototype.disposeInternal=function(){goog.events.BrowserEvent.superClass_.disposeInternal.call(this);this.event_=null;this.target=null;this.currentTarget=null;this.relatedTarget=null};goog.provide("goog.events.EventWrapper");goog.events.EventWrapper=function(){};goog.events.EventWrapper.prototype.listen=function(src,listener,opt_capt,opt_scope,opt_eventHandler){};goog.events.EventWrapper.prototype.unlisten=function(src,listener,opt_capt,opt_scope,opt_eventHandler){};goog.provide("goog.events.Listener");goog.events.Listener=function(){};goog.events.Listener.counter_=0;goog.events.Listener.prototype.isFunctionListener_;goog.events.Listener.prototype.listener;goog.events.Listener.prototype.proxy;goog.events.Listener.prototype.src;goog.events.Listener.prototype.type;goog.events.Listener.prototype.capture;goog.events.Listener.prototype.handler;goog.events.Listener.prototype.key=0;goog.events.Listener.prototype.removed=false;
goog.events.Listener.prototype.callOnce=false;
goog.events.Listener.prototype.init=function(listener,proxy,src,type,capture,opt_handler){if(goog.isFunction(listener))this.isFunctionListener_=true;else if(listener&&listener.handleEvent&&goog.isFunction(listener.handleEvent))this.isFunctionListener_=false;else throw Error("Invalid listener argument");this.listener=listener;this.proxy=proxy;this.src=src;this.type=type;this.capture=!!capture;this.handler=opt_handler;this.callOnce=false;this.key=++goog.events.Listener.counter_;this.removed=false};
goog.events.Listener.prototype.handleEvent=function(eventObject){if(this.isFunctionListener_)return this.listener.call(this.handler||this.src,eventObject);return this.listener.handleEvent.call(this.listener,eventObject)};goog.provide("goog.structs.SimplePool");goog.require("goog.Disposable");goog.structs.SimplePool=function(initialCount,maxCount){goog.Disposable.call(this);this.maxCount_=maxCount;this.freeQueue_=[];this.createInitial_(initialCount)};goog.inherits(goog.structs.SimplePool,goog.Disposable);goog.structs.SimplePool.prototype.createObjectFn_=null;goog.structs.SimplePool.prototype.disposeObjectFn_=null;goog.structs.SimplePool.prototype.setCreateObjectFn=function(createObjectFn){this.createObjectFn_=createObjectFn};
goog.structs.SimplePool.prototype.setDisposeObjectFn=function(disposeObjectFn){this.disposeObjectFn_=disposeObjectFn};goog.structs.SimplePool.prototype.getObject=function(){if(this.freeQueue_.length)return this.freeQueue_.pop();return this.createObject()};goog.structs.SimplePool.prototype.releaseObject=function(obj){if(this.freeQueue_.length<this.maxCount_)this.freeQueue_.push(obj);else this.disposeObject(obj)};
goog.structs.SimplePool.prototype.createInitial_=function(initialCount){if(initialCount>this.maxCount_)throw Error("[goog.structs.SimplePool] Initial cannot be greater than max");for(var i=0;i<initialCount;i++)this.freeQueue_.push(this.createObject())};goog.structs.SimplePool.prototype.createObject=function(){if(this.createObjectFn_)return this.createObjectFn_();else return{}};
goog.structs.SimplePool.prototype.disposeObject=function(obj){if(this.disposeObjectFn_)this.disposeObjectFn_(obj);else if(goog.isObject(obj))if(goog.isFunction(obj.dispose))obj.dispose();else for(var i in obj)delete obj[i]};goog.structs.SimplePool.prototype.disposeInternal=function(){goog.structs.SimplePool.superClass_.disposeInternal.call(this);var freeQueue=this.freeQueue_;while(freeQueue.length)this.disposeObject(freeQueue.pop());delete this.freeQueue_};goog.provide("goog.userAgent.jscript");goog.require("goog.string");goog.userAgent.jscript.ASSUME_NO_JSCRIPT=false;
goog.userAgent.jscript.init_=function(){var hasScriptEngine="ScriptEngine"in goog.global;goog.userAgent.jscript.DETECTED_HAS_JSCRIPT_=hasScriptEngine&&goog.global["ScriptEngine"]()=="JScript";goog.userAgent.jscript.DETECTED_VERSION_=goog.userAgent.jscript.DETECTED_HAS_JSCRIPT_?goog.global["ScriptEngineMajorVersion"]()+"."+goog.global["ScriptEngineMinorVersion"]()+"."+goog.global["ScriptEngineBuildVersion"]():"0"};if(!goog.userAgent.jscript.ASSUME_NO_JSCRIPT)goog.userAgent.jscript.init_();
goog.userAgent.jscript.HAS_JSCRIPT=goog.userAgent.jscript.ASSUME_NO_JSCRIPT?false:goog.userAgent.jscript.DETECTED_HAS_JSCRIPT_;goog.userAgent.jscript.VERSION=goog.userAgent.jscript.ASSUME_NO_JSCRIPT?"0":goog.userAgent.jscript.DETECTED_VERSION_;goog.userAgent.jscript.isVersion=function(version){return goog.string.compareVersions(goog.userAgent.jscript.VERSION,version)>=0};goog.provide("goog.events.pools");goog.require("goog.events.BrowserEvent");goog.require("goog.events.Listener");goog.require("goog.structs.SimplePool");goog.require("goog.userAgent.jscript");goog.events.pools.getObject;goog.events.pools.releaseObject;goog.events.pools.getArray;goog.events.pools.releaseArray;goog.events.pools.getProxy;goog.events.pools.setProxyCallbackFunction;goog.events.pools.releaseProxy;goog.events.pools.getListener;goog.events.pools.releaseListener;goog.events.pools.getEvent;
goog.events.pools.releaseEvent;
(function(){var BAD_GC=goog.userAgent.jscript.HAS_JSCRIPT&&!goog.userAgent.jscript.isVersion("5.7");function getObject(){return{count_:0,remaining_:0}}function getArray(){return[]}var proxyCallbackFunction;goog.events.pools.setProxyCallbackFunction=function(cb){proxyCallbackFunction=cb};function getProxy(){var f=function(eventObject){return proxyCallbackFunction.call(f.src,f.key,eventObject)};return f}function getListener(){return new goog.events.Listener}function getEvent(){return new goog.events.BrowserEvent}if(!BAD_GC){goog.events.pools.getObject=
getObject;goog.events.pools.releaseObject=goog.nullFunction;goog.events.pools.getArray=getArray;goog.events.pools.releaseArray=goog.nullFunction;goog.events.pools.getProxy=getProxy;goog.events.pools.releaseProxy=goog.nullFunction;goog.events.pools.getListener=getListener;goog.events.pools.releaseListener=goog.nullFunction;goog.events.pools.getEvent=getEvent;goog.events.pools.releaseEvent=goog.nullFunction}else{goog.events.pools.getObject=function(){return objectPool.getObject()};goog.events.pools.releaseObject=
function(obj){objectPool.releaseObject(obj)};goog.events.pools.getArray=function(){return arrayPool.getObject()};goog.events.pools.releaseArray=function(obj){arrayPool.releaseObject(obj)};goog.events.pools.getProxy=function(){return proxyPool.getObject()};goog.events.pools.releaseProxy=function(obj){proxyPool.releaseObject(getProxy())};goog.events.pools.getListener=function(){return listenerPool.getObject()};goog.events.pools.releaseListener=function(obj){listenerPool.releaseObject(obj)};goog.events.pools.getEvent=
function(){return eventPool.getObject()};goog.events.pools.releaseEvent=function(obj){eventPool.releaseObject(obj)};var OBJECT_POOL_INITIAL_COUNT=0;var OBJECT_POOL_MAX_COUNT=600;var objectPool=new goog.structs.SimplePool(OBJECT_POOL_INITIAL_COUNT,OBJECT_POOL_MAX_COUNT);objectPool.setCreateObjectFn(getObject);var ARRAY_POOL_INITIAL_COUNT=0;var ARRAY_POOL_MAX_COUNT=600;var arrayPool=new goog.structs.SimplePool(ARRAY_POOL_INITIAL_COUNT,ARRAY_POOL_MAX_COUNT);arrayPool.setCreateObjectFn(getArray);var HANDLE_EVENT_PROXY_POOL_INITIAL_COUNT=
0;var HANDLE_EVENT_PROXY_POOL_MAX_COUNT=600;var proxyPool=new goog.structs.SimplePool(HANDLE_EVENT_PROXY_POOL_INITIAL_COUNT,HANDLE_EVENT_PROXY_POOL_MAX_COUNT);proxyPool.setCreateObjectFn(getProxy);var LISTENER_POOL_INITIAL_COUNT=0;var LISTENER_POOL_MAX_COUNT=600;var listenerPool=new goog.structs.SimplePool(LISTENER_POOL_INITIAL_COUNT,LISTENER_POOL_MAX_COUNT);listenerPool.setCreateObjectFn(getListener);var EVENT_POOL_INITIAL_COUNT=0;var EVENT_POOL_MAX_COUNT=600;var eventPool=new goog.structs.SimplePool(EVENT_POOL_INITIAL_COUNT,
EVENT_POOL_MAX_COUNT);eventPool.setCreateObjectFn(getEvent)}})();goog.provide("goog.events");goog.require("goog.array");goog.require("goog.debug.entryPointRegistry");goog.require("goog.debug.errorHandlerWeakDep");goog.require("goog.events.BrowserEvent");goog.require("goog.events.Event");goog.require("goog.events.EventWrapper");goog.require("goog.events.pools");goog.require("goog.object");goog.require("goog.userAgent");goog.events.listeners_={};goog.events.listenerTree_={};goog.events.sources_={};goog.events.onString_="on";goog.events.onStringMap_={};
goog.events.keySeparator_="_";goog.events.requiresSyntheticEventPropagation_;goog.events.RETURN_VALUE_="marked_closure";
goog.events.listen=function(src,type,listener,opt_capt,opt_handler){if(!type)throw Error("Invalid event type");else if(goog.isArray(type)){for(var i=0;i<type.length;i++)goog.events.listen(src,type[i],listener,opt_capt,opt_handler);return null}else{var capture=!!opt_capt;var map=goog.events.listenerTree_;if(!(type in map))map[type]=goog.events.pools.getObject();map=map[type];if(!(capture in map)){map[capture]=goog.events.pools.getObject();map.count_++}map=map[capture];var srcUid=goog.getUid(src);var listenerArray,
listenerObj;map.remaining_++;if(!map[srcUid]){listenerArray=map[srcUid]=goog.events.pools.getArray();map.count_++}else{listenerArray=map[srcUid];for(var i=0;i<listenerArray.length;i++){listenerObj=listenerArray[i];if(listenerObj.listener==listener&&listenerObj.handler==opt_handler){if(listenerObj.removed)break;return listenerArray[i].key}}}var proxy=goog.events.pools.getProxy();proxy.src=src;listenerObj=goog.events.pools.getListener();listenerObj.init(listener,proxy,src,type,capture,opt_handler);
var key=listenerObj.key;proxy.key=key;listenerArray.push(listenerObj);goog.events.listeners_[key]=listenerObj;if(!goog.events.sources_[srcUid])goog.events.sources_[srcUid]=goog.events.pools.getArray();goog.events.sources_[srcUid].push(listenerObj);if(src.addEventListener){if(src==goog.global||!src.customEvent_)src.addEventListener(type,proxy,capture)}else src.attachEvent(goog.events.getOnString_(type),proxy);return key}};
goog.events.listenOnce=function(src,type,listener,opt_capt,opt_handler){if(goog.isArray(type)){for(var i=0;i<type.length;i++)goog.events.listenOnce(src,type[i],listener,opt_capt,opt_handler);return null}var key=goog.events.listen(src,type,listener,opt_capt,opt_handler);var listenerObj=goog.events.listeners_[key];listenerObj.callOnce=true;return key};goog.events.listenWithWrapper=function(src,wrapper,listener,opt_capt,opt_handler){wrapper.listen(src,listener,opt_capt,opt_handler)};
goog.events.unlisten=function(src,type,listener,opt_capt,opt_handler){if(goog.isArray(type)){for(var i=0;i<type.length;i++)goog.events.unlisten(src,type[i],listener,opt_capt,opt_handler);return null}var capture=!!opt_capt;var listenerArray=goog.events.getListeners_(src,type,capture);if(!listenerArray)return false;for(var i=0;i<listenerArray.length;i++)if(listenerArray[i].listener==listener&&listenerArray[i].capture==capture&&listenerArray[i].handler==opt_handler)return goog.events.unlistenByKey(listenerArray[i].key);
return false};
goog.events.unlistenByKey=function(key){if(!goog.events.listeners_[key])return false;var listener=goog.events.listeners_[key];if(listener.removed)return false;var src=listener.src;var type=listener.type;var proxy=listener.proxy;var capture=listener.capture;if(src.removeEventListener){if(src==goog.global||!src.customEvent_)src.removeEventListener(type,proxy,capture)}else if(src.detachEvent)src.detachEvent(goog.events.getOnString_(type),proxy);var srcUid=goog.getUid(src);var listenerArray=goog.events.listenerTree_[type][capture][srcUid];
if(goog.events.sources_[srcUid]){var sourcesArray=goog.events.sources_[srcUid];goog.array.remove(sourcesArray,listener);if(sourcesArray.length==0)delete goog.events.sources_[srcUid]}listener.removed=true;listenerArray.needsCleanup_=true;goog.events.cleanUp_(type,capture,srcUid,listenerArray);delete goog.events.listeners_[key];return true};goog.events.unlistenWithWrapper=function(src,wrapper,listener,opt_capt,opt_handler){wrapper.unlisten(src,listener,opt_capt,opt_handler)};
goog.events.cleanUp_=function(type,capture,srcUid,listenerArray){if(!listenerArray.locked_)if(listenerArray.needsCleanup_){for(var oldIndex=0,newIndex=0;oldIndex<listenerArray.length;oldIndex++){if(listenerArray[oldIndex].removed){var proxy=listenerArray[oldIndex].proxy;proxy.src=null;goog.events.pools.releaseProxy(proxy);goog.events.pools.releaseListener(listenerArray[oldIndex]);continue}if(oldIndex!=newIndex)listenerArray[newIndex]=listenerArray[oldIndex];newIndex++}listenerArray.length=newIndex;
listenerArray.needsCleanup_=false;if(newIndex==0){goog.events.pools.releaseArray(listenerArray);delete goog.events.listenerTree_[type][capture][srcUid];goog.events.listenerTree_[type][capture].count_--;if(goog.events.listenerTree_[type][capture].count_==0){goog.events.pools.releaseObject(goog.events.listenerTree_[type][capture]);delete goog.events.listenerTree_[type][capture];goog.events.listenerTree_[type].count_--}if(goog.events.listenerTree_[type].count_==0){goog.events.pools.releaseObject(goog.events.listenerTree_[type]);
delete goog.events.listenerTree_[type]}}}};
goog.events.removeAll=function(opt_obj,opt_type,opt_capt){var count=0;var noObj=opt_obj==null;var noType=opt_type==null;var noCapt=opt_capt==null;opt_capt=!!opt_capt;if(!noObj){var srcUid=goog.getUid(opt_obj);if(goog.events.sources_[srcUid]){var sourcesArray=goog.events.sources_[srcUid];for(var i=sourcesArray.length-1;i>=0;i--){var listener=sourcesArray[i];if((noType||opt_type==listener.type)&&(noCapt||opt_capt==listener.capture)){goog.events.unlistenByKey(listener.key);count++}}}}else goog.object.forEach(goog.events.sources_,
function(listeners){for(var i=listeners.length-1;i>=0;i--){var listener=listeners[i];if((noType||opt_type==listener.type)&&(noCapt||opt_capt==listener.capture)){goog.events.unlistenByKey(listener.key);count++}}});return count};goog.events.getListeners=function(obj,type,capture){return goog.events.getListeners_(obj,type,capture)||[]};
goog.events.getListeners_=function(obj,type,capture){var map=goog.events.listenerTree_;if(type in map){map=map[type];if(capture in map){map=map[capture];var objUid=goog.getUid(obj);if(map[objUid])return map[objUid]}}return null};
goog.events.getListener=function(src,type,listener,opt_capt,opt_handler){var capture=!!opt_capt;var listenerArray=goog.events.getListeners_(src,type,capture);if(listenerArray)for(var i=0;i<listenerArray.length;i++)if(listenerArray[i].listener==listener&&listenerArray[i].capture==capture&&listenerArray[i].handler==opt_handler)return listenerArray[i];return null};
goog.events.hasListener=function(obj,opt_type,opt_capture){var objUid=goog.getUid(obj);var listeners=goog.events.sources_[objUid];if(listeners){var hasType=goog.isDef(opt_type);var hasCapture=goog.isDef(opt_capture);if(hasType&&hasCapture){var map=goog.events.listenerTree_[opt_type];return!!map&&!!map[opt_capture]&&objUid in map[opt_capture]}else if(!(hasType||hasCapture))return true;else return goog.array.some(listeners,function(listener){return hasType&&listener.type==opt_type||hasCapture&&listener.capture==
opt_capture})}return false};goog.events.expose=function(e){var str=[];for(var key in e)if(e[key]&&e[key].id)str.push(key+" = "+e[key]+" ("+e[key].id+")");else str.push(key+" = "+e[key]);return str.join("\n")};goog.events.getOnString_=function(type){if(type in goog.events.onStringMap_)return goog.events.onStringMap_[type];return goog.events.onStringMap_[type]=goog.events.onString_+type};
goog.events.fireListeners=function(obj,type,capture,eventObject){var map=goog.events.listenerTree_;if(type in map){map=map[type];if(capture in map)return goog.events.fireListeners_(map[capture],obj,type,capture,eventObject)}return true};
goog.events.fireListeners_=function(map,obj,type,capture,eventObject){var retval=1;var objUid=goog.getUid(obj);if(map[objUid]){map.remaining_--;var listenerArray=map[objUid];if(!listenerArray.locked_)listenerArray.locked_=1;else listenerArray.locked_++;try{var length=listenerArray.length;for(var i=0;i<length;i++){var listener=listenerArray[i];if(listener&&!listener.removed)retval&=goog.events.fireListener(listener,eventObject)!==false}}finally{listenerArray.locked_--;goog.events.cleanUp_(type,capture,
objUid,listenerArray)}}return Boolean(retval)};goog.events.fireListener=function(listener,eventObject){var rv=listener.handleEvent(eventObject);if(listener.callOnce)goog.events.unlistenByKey(listener.key);return rv};goog.events.getTotalListenerCount=function(){return goog.object.getCount(goog.events.listeners_)};
goog.events.dispatchEvent=function(src,e){if(goog.isString(e))e=new goog.events.Event(e,src);else if(!(e instanceof goog.events.Event)){var oldEvent=e;e=new goog.events.Event(e.type,src);goog.object.extend(e,oldEvent)}else e.target=e.target||src;var rv=1,ancestors;var type=e.type;var map=goog.events.listenerTree_;if(!(type in map))return true;map=map[type];var hasCapture=true in map;var targetsMap;if(hasCapture){ancestors=[];for(var parent=src;parent;parent=parent.getParentEventTarget())ancestors.push(parent);
targetsMap=map[true];targetsMap.remaining_=targetsMap.count_;for(var i=ancestors.length-1;!e.propagationStopped_&&i>=0&&targetsMap.remaining_;i--){e.currentTarget=ancestors[i];rv&=goog.events.fireListeners_(targetsMap,ancestors[i],e.type,true,e)&&e.returnValue_!=false}}var hasBubble=false in map;if(hasBubble){targetsMap=map[false];targetsMap.remaining_=targetsMap.count_;if(hasCapture)for(var i=0;!e.propagationStopped_&&i<ancestors.length&&targetsMap.remaining_;i++){e.currentTarget=ancestors[i];rv&=
goog.events.fireListeners_(targetsMap,ancestors[i],e.type,false,e)&&e.returnValue_!=false}else for(var current=src;!e.propagationStopped_&&current&&targetsMap.remaining_;current=current.getParentEventTarget()){e.currentTarget=current;rv&=goog.events.fireListeners_(targetsMap,current,e.type,false,e)&&e.returnValue_!=false}}return Boolean(rv)};
goog.events.protectBrowserEventEntryPoint=function(errorHandler){goog.events.handleBrowserEvent_=errorHandler.protectEntryPoint(goog.events.handleBrowserEvent_);goog.events.pools.setProxyCallbackFunction(goog.events.handleBrowserEvent_)};
goog.events.handleBrowserEvent_=function(key,opt_evt){if(!goog.events.listeners_[key])return true;var listener=goog.events.listeners_[key];var type=listener.type;var map=goog.events.listenerTree_;if(!(type in map))return true;map=map[type];var retval,targetsMap;if(goog.events.synthesizeEventPropagation_()){var ieEvent=opt_evt||goog.getObjectByName("window.event");var hasCapture=true in map;var hasBubble=false in map;if(hasCapture){if(goog.events.isMarkedIeEvent_(ieEvent))return true;goog.events.markIeEvent_(ieEvent)}var evt=
goog.events.pools.getEvent();evt.init(ieEvent,this);retval=true;try{if(hasCapture){var ancestors=goog.events.pools.getArray();for(var parent=evt.currentTarget;parent;parent=parent.parentNode)ancestors.push(parent);targetsMap=map[true];targetsMap.remaining_=targetsMap.count_;for(var i=ancestors.length-1;!evt.propagationStopped_&&i>=0&&targetsMap.remaining_;i--){evt.currentTarget=ancestors[i];retval&=goog.events.fireListeners_(targetsMap,ancestors[i],type,true,evt)}if(hasBubble){targetsMap=map[false];
targetsMap.remaining_=targetsMap.count_;for(var i=0;!evt.propagationStopped_&&i<ancestors.length&&targetsMap.remaining_;i++){evt.currentTarget=ancestors[i];retval&=goog.events.fireListeners_(targetsMap,ancestors[i],type,false,evt)}}}else retval=goog.events.fireListener(listener,evt)}finally{if(ancestors){ancestors.length=0;goog.events.pools.releaseArray(ancestors)}evt.dispose();goog.events.pools.releaseEvent(evt)}return retval}var be=new goog.events.BrowserEvent(opt_evt,this);try{retval=goog.events.fireListener(listener,
be)}finally{be.dispose()}return retval};goog.events.pools.setProxyCallbackFunction(goog.events.handleBrowserEvent_);goog.events.markIeEvent_=function(e){var useReturnValue=false;if(e.keyCode==0)try{e.keyCode=-1;return}catch(ex){useReturnValue=true}if(useReturnValue||e.returnValue!=goog.events.RETURN_VALUE_)e.returnValue=goog.events.RETURN_VALUE_};goog.events.isMarkedIeEvent_=function(e){return e.keyCode<0||e.returnValue==goog.events.RETURN_VALUE_};goog.events.uniqueIdCounter_=0;
goog.events.getUniqueId=function(identifier){return identifier+"_"+goog.events.uniqueIdCounter_++};goog.events.synthesizeEventPropagation_=function(){if(goog.events.requiresSyntheticEventPropagation_===undefined)goog.events.requiresSyntheticEventPropagation_=goog.userAgent.IE&&!goog.global["addEventListener"];return goog.events.requiresSyntheticEventPropagation_};
goog.debug.entryPointRegistry.register(function(transformer){goog.events.handleBrowserEvent_=transformer(goog.events.handleBrowserEvent_);goog.events.pools.setProxyCallbackFunction(goog.events.handleBrowserEvent_)});goog.provide("goog.events.EventTarget");goog.require("goog.Disposable");goog.require("goog.events");goog.events.EventTarget=function(){goog.Disposable.call(this)};goog.inherits(goog.events.EventTarget,goog.Disposable);goog.events.EventTarget.prototype.customEvent_=true;goog.events.EventTarget.prototype.parentEventTarget_=null;goog.events.EventTarget.prototype.getParentEventTarget=function(){return this.parentEventTarget_};
goog.events.EventTarget.prototype.setParentEventTarget=function(parent){this.parentEventTarget_=parent};goog.events.EventTarget.prototype.addEventListener=function(type,handler,opt_capture,opt_handlerScope){goog.events.listen(this,type,handler,opt_capture,opt_handlerScope)};goog.events.EventTarget.prototype.removeEventListener=function(type,handler,opt_capture,opt_handlerScope){goog.events.unlisten(this,type,handler,opt_capture,opt_handlerScope)};
goog.events.EventTarget.prototype.dispatchEvent=function(e){return goog.events.dispatchEvent(this,e)};goog.events.EventTarget.prototype.disposeInternal=function(){goog.events.EventTarget.superClass_.disposeInternal.call(this);goog.events.removeAll(this);this.parentEventTarget_=null};goog.provide("goog.events.KeyEvent");goog.provide("goog.events.KeyHandler");goog.provide("goog.events.KeyHandler.EventType");goog.require("goog.events");goog.require("goog.events.BrowserEvent");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.events.KeyCodes");goog.require("goog.userAgent");goog.events.KeyHandler=function(opt_element,opt_capture){goog.events.EventTarget.call(this);if(opt_element)this.attach(opt_element,opt_capture)};
goog.inherits(goog.events.KeyHandler,goog.events.EventTarget);goog.events.KeyHandler.prototype.element_=null;goog.events.KeyHandler.prototype.keyPressKey_=null;goog.events.KeyHandler.prototype.keyDownKey_=null;goog.events.KeyHandler.prototype.keyUpKey_=null;goog.events.KeyHandler.prototype.lastKey_=-1;goog.events.KeyHandler.prototype.keyCode_=-1;goog.events.KeyHandler.EventType={KEY:"key"};
goog.events.KeyHandler.safariKey_={"3":goog.events.KeyCodes.ENTER,"12":goog.events.KeyCodes.NUMLOCK,"63232":goog.events.KeyCodes.UP,"63233":goog.events.KeyCodes.DOWN,"63234":goog.events.KeyCodes.LEFT,"63235":goog.events.KeyCodes.RIGHT,"63236":goog.events.KeyCodes.F1,"63237":goog.events.KeyCodes.F2,"63238":goog.events.KeyCodes.F3,"63239":goog.events.KeyCodes.F4,"63240":goog.events.KeyCodes.F5,"63241":goog.events.KeyCodes.F6,"63242":goog.events.KeyCodes.F7,"63243":goog.events.KeyCodes.F8,"63244":goog.events.KeyCodes.F9,
"63245":goog.events.KeyCodes.F10,"63246":goog.events.KeyCodes.F11,"63247":goog.events.KeyCodes.F12,"63248":goog.events.KeyCodes.PRINT_SCREEN,"63272":goog.events.KeyCodes.DELETE,"63273":goog.events.KeyCodes.HOME,"63275":goog.events.KeyCodes.END,"63276":goog.events.KeyCodes.PAGE_UP,"63277":goog.events.KeyCodes.PAGE_DOWN,"63289":goog.events.KeyCodes.NUMLOCK,"63302":goog.events.KeyCodes.INSERT};
goog.events.KeyHandler.keyIdentifier_={Up:goog.events.KeyCodes.UP,Down:goog.events.KeyCodes.DOWN,Left:goog.events.KeyCodes.LEFT,Right:goog.events.KeyCodes.RIGHT,Enter:goog.events.KeyCodes.ENTER,F1:goog.events.KeyCodes.F1,F2:goog.events.KeyCodes.F2,F3:goog.events.KeyCodes.F3,F4:goog.events.KeyCodes.F4,F5:goog.events.KeyCodes.F5,F6:goog.events.KeyCodes.F6,F7:goog.events.KeyCodes.F7,F8:goog.events.KeyCodes.F8,F9:goog.events.KeyCodes.F9,F10:goog.events.KeyCodes.F10,F11:goog.events.KeyCodes.F11,F12:goog.events.KeyCodes.F12,
"U+007F":goog.events.KeyCodes.DELETE,Home:goog.events.KeyCodes.HOME,End:goog.events.KeyCodes.END,PageUp:goog.events.KeyCodes.PAGE_UP,PageDown:goog.events.KeyCodes.PAGE_DOWN,Insert:goog.events.KeyCodes.INSERT};goog.events.KeyHandler.mozKeyCodeToKeyCodeMap_={61:187,59:186};goog.events.KeyHandler.USES_KEYDOWN_=goog.userAgent.IE||goog.userAgent.WEBKIT&&goog.userAgent.isVersion("525");
goog.events.KeyHandler.prototype.handleKeyDown_=function(e){if(goog.userAgent.WEBKIT&&(this.lastKey_==goog.events.KeyCodes.CTRL&&!e.ctrlKey||this.lastKey_==goog.events.KeyCodes.ALT&&!e.altKey)){this.lastKey_=-1;this.keyCode_=-1}if(goog.events.KeyHandler.USES_KEYDOWN_&&!goog.events.KeyCodes.firesKeyPressEvent(e.keyCode,this.lastKey_,e.shiftKey,e.ctrlKey,e.altKey))this.handleEvent(e);else if(goog.userAgent.GECKO&&e.keyCode in goog.events.KeyHandler.mozKeyCodeToKeyCodeMap_)this.keyCode_=goog.events.KeyHandler.mozKeyCodeToKeyCodeMap_[e.keyCode];
else this.keyCode_=e.keyCode};goog.events.KeyHandler.prototype.handleKeyup_=function(e){this.lastKey_=-1;this.keyCode_=-1};
goog.events.KeyHandler.prototype.handleEvent=function(e){var be=e.getBrowserEvent();var keyCode,charCode;if(goog.userAgent.IE&&e.type==goog.events.EventType.KEYPRESS){keyCode=this.keyCode_;charCode=keyCode!=goog.events.KeyCodes.ENTER&&keyCode!=goog.events.KeyCodes.ESC?be.keyCode:0}else if(goog.userAgent.WEBKIT&&e.type==goog.events.EventType.KEYPRESS){keyCode=this.keyCode_;charCode=be.charCode>=0&&be.charCode<63232&&goog.events.KeyCodes.isCharacterKey(keyCode)?be.charCode:0}else if(goog.userAgent.OPERA){keyCode=
this.keyCode_;charCode=goog.events.KeyCodes.isCharacterKey(keyCode)?be.keyCode:0}else{keyCode=be.keyCode||this.keyCode_;charCode=be.charCode||0;if(goog.userAgent.MAC&&charCode==goog.events.KeyCodes.QUESTION_MARK&&!keyCode)keyCode=goog.events.KeyCodes.SLASH}var key=keyCode;var keyIdentifier=be.keyIdentifier;if(keyCode)if(keyCode>=63232&&keyCode in goog.events.KeyHandler.safariKey_)key=goog.events.KeyHandler.safariKey_[keyCode];else{if(keyCode==25&&e.shiftKey)key=9}else if(keyIdentifier&&keyIdentifier in
goog.events.KeyHandler.keyIdentifier_)key=goog.events.KeyHandler.keyIdentifier_[keyIdentifier];var repeat=key==this.lastKey_;this.lastKey_=key;var event=new goog.events.KeyEvent(key,charCode,repeat,be);try{this.dispatchEvent(event)}finally{event.dispose()}};goog.events.KeyHandler.prototype.getElement=function(){return this.element_};
goog.events.KeyHandler.prototype.attach=function(element,opt_capture){if(this.keyUpKey_)this.detach();this.element_=element;this.keyPressKey_=goog.events.listen(this.element_,goog.events.EventType.KEYPRESS,this,opt_capture);this.keyDownKey_=goog.events.listen(this.element_,goog.events.EventType.KEYDOWN,this.handleKeyDown_,opt_capture,this);this.keyUpKey_=goog.events.listen(this.element_,goog.events.EventType.KEYUP,this.handleKeyup_,opt_capture,this)};
goog.events.KeyHandler.prototype.detach=function(){if(this.keyPressKey_){goog.events.unlistenByKey(this.keyPressKey_);goog.events.unlistenByKey(this.keyDownKey_);goog.events.unlistenByKey(this.keyUpKey_);this.keyPressKey_=null;this.keyDownKey_=null;this.keyUpKey_=null}this.element_=null;this.lastKey_=-1;this.keyCode_=-1};goog.events.KeyHandler.prototype.disposeInternal=function(){goog.events.KeyHandler.superClass_.disposeInternal.call(this);this.detach()};
goog.events.KeyEvent=function(keyCode,charCode,repeat,browserEvent){goog.events.BrowserEvent.call(this,browserEvent);this.type=goog.events.KeyHandler.EventType.KEY;this.keyCode=keyCode;this.charCode=charCode;this.repeat=repeat};goog.inherits(goog.events.KeyEvent,goog.events.BrowserEvent);goog.provide("goog.events.EventHandler");goog.require("goog.Disposable");goog.require("goog.events");goog.require("goog.events.EventWrapper");goog.require("goog.object");goog.require("goog.structs.SimplePool");goog.events.EventHandler=function(opt_handler){this.handler_=opt_handler};goog.inherits(goog.events.EventHandler,goog.Disposable);goog.events.EventHandler.KEY_POOL_INITIAL_COUNT=0;goog.events.EventHandler.KEY_POOL_MAX_COUNT=100;
goog.events.EventHandler.keyPool_=new goog.structs.SimplePool(goog.events.EventHandler.KEY_POOL_INITIAL_COUNT,goog.events.EventHandler.KEY_POOL_MAX_COUNT);goog.events.EventHandler.keys_=null;goog.events.EventHandler.key_=null;
goog.events.EventHandler.prototype.listen=function(src,type,opt_fn,opt_capture,opt_handler){if(goog.isArray(type))for(var i=0;i<type.length;i++)this.listen(src,type[i],opt_fn,opt_capture,opt_handler);else{var key=goog.events.listen(src,type,opt_fn||this,opt_capture||false,opt_handler||this.handler_||this);this.recordListenerKey_(key)}return this};
goog.events.EventHandler.prototype.listenOnce=function(src,type,opt_fn,opt_capture,opt_handler){if(goog.isArray(type))for(var i=0;i<type.length;i++)this.listenOnce(src,type[i],opt_fn,opt_capture,opt_handler);else{var key=goog.events.listenOnce(src,type,opt_fn||this,opt_capture||false,opt_handler||this.handler_||this);this.recordListenerKey_(key)}return this};
goog.events.EventHandler.prototype.listenWithWrapper=function(src,wrapper,listener,opt_capt,opt_handler){wrapper.listen(src,listener,opt_capt,opt_handler||this.handler_,this);return this};goog.events.EventHandler.prototype.recordListenerKey_=function(key){if(this.keys_)this.keys_[key]=true;else if(this.key_){this.keys_=goog.events.EventHandler.keyPool_.getObject();this.keys_[this.key_]=true;this.key_=null;this.keys_[key]=true}else this.key_=key};
goog.events.EventHandler.prototype.unlisten=function(src,type,opt_fn,opt_capture,opt_handler){if(this.key_||this.keys_)if(goog.isArray(type))for(var i=0;i<type.length;i++)this.unlisten(src,type[i],opt_fn,opt_capture,opt_handler);else{var listener=goog.events.getListener(src,type,opt_fn||this,opt_capture||false,opt_handler||this.handler_||this);if(listener){var key=listener.key;goog.events.unlistenByKey(key);if(this.keys_)goog.object.remove(this.keys_,key);else if(this.key_==key)this.key_=null}}return this};
goog.events.EventHandler.prototype.unlistenWithWrapper=function(src,wrapper,listener,opt_capt,opt_handler){wrapper.unlisten(src,listener,opt_capt,opt_handler||this.handler_,this);return this};goog.events.EventHandler.prototype.removeAll=function(){if(this.keys_){for(var key in this.keys_){goog.events.unlistenByKey(key);delete this.keys_[key]}goog.events.EventHandler.keyPool_.releaseObject(this.keys_);this.keys_=null}else if(this.key_)goog.events.unlistenByKey(this.key_)};
goog.events.EventHandler.prototype.disposeInternal=function(){goog.events.EventHandler.superClass_.disposeInternal.call(this);this.removeAll()};goog.events.EventHandler.prototype.handleEvent=function(e){throw Error("EventHandler.handleEvent not implemented");};goog.provide("goog.ui.IdGenerator");goog.ui.IdGenerator=function(){};goog.addSingletonGetter(goog.ui.IdGenerator);goog.ui.IdGenerator.prototype.nextId_=0;goog.ui.IdGenerator.prototype.getNextUniqueId=function(){return":"+(this.nextId_++).toString(36)};goog.ui.IdGenerator.instance=goog.ui.IdGenerator.getInstance();goog.provide("goog.ui.Component");goog.provide("goog.ui.Component.Error");goog.provide("goog.ui.Component.EventType");goog.provide("goog.ui.Component.State");goog.require("goog.array");goog.require("goog.dom");goog.require("goog.dom.DomHelper");goog.require("goog.events");goog.require("goog.events.Event");goog.require("goog.events.EventHandler");goog.require("goog.events.EventTarget");goog.require("goog.object");goog.require("goog.style");goog.require("goog.ui.IdGenerator");
goog.ui.Component=function(opt_domHelper){goog.events.EventTarget.call(this);this.dom_=opt_domHelper||goog.dom.getDomHelper();this.rightToLeft_=goog.ui.Component.defaultRightToLeft_};goog.inherits(goog.ui.Component,goog.events.EventTarget);goog.ui.Component.prototype.idGenerator_=goog.ui.IdGenerator.getInstance();goog.ui.Component.defaultRightToLeft_=null;
goog.ui.Component.EventType={BEFORE_SHOW:"beforeshow",SHOW:"show",HIDE:"hide",DISABLE:"disable",ENABLE:"enable",HIGHLIGHT:"highlight",UNHIGHLIGHT:"unhighlight",ACTIVATE:"activate",DEACTIVATE:"deactivate",SELECT:"select",UNSELECT:"unselect",CHECK:"check",UNCHECK:"uncheck",FOCUS:"focus",BLUR:"blur",OPEN:"open",CLOSE:"close",ENTER:"enter",LEAVE:"leave",ACTION:"action",CHANGE:"change"};
goog.ui.Component.Error={NOT_SUPPORTED:"Method not supported",DECORATE_INVALID:"Invalid element to decorate",ALREADY_RENDERED:"Component already rendered",PARENT_UNABLE_TO_BE_SET:"Unable to set parent component",CHILD_INDEX_OUT_OF_BOUNDS:"Child component index out of bounds",NOT_OUR_CHILD:"Child is not in parent component",NOT_IN_DOCUMENT:"Operation not supported while component is not in document",STATE_INVALID:"Invalid component state"};
goog.ui.Component.State={ALL:255,DISABLED:1,HOVER:2,ACTIVE:4,SELECTED:8,CHECKED:16,FOCUSED:32,OPENED:64};
goog.ui.Component.getStateTransitionEvent=function(state,isEntering){switch(state){case goog.ui.Component.State.DISABLED:return isEntering?goog.ui.Component.EventType.DISABLE:goog.ui.Component.EventType.ENABLE;case goog.ui.Component.State.HOVER:return isEntering?goog.ui.Component.EventType.HIGHLIGHT:goog.ui.Component.EventType.UNHIGHLIGHT;case goog.ui.Component.State.ACTIVE:return isEntering?goog.ui.Component.EventType.ACTIVATE:goog.ui.Component.EventType.DEACTIVATE;case goog.ui.Component.State.SELECTED:return isEntering?
goog.ui.Component.EventType.SELECT:goog.ui.Component.EventType.UNSELECT;case goog.ui.Component.State.CHECKED:return isEntering?goog.ui.Component.EventType.CHECK:goog.ui.Component.EventType.UNCHECK;case goog.ui.Component.State.FOCUSED:return isEntering?goog.ui.Component.EventType.FOCUS:goog.ui.Component.EventType.BLUR;case goog.ui.Component.State.OPENED:return isEntering?goog.ui.Component.EventType.OPEN:goog.ui.Component.EventType.CLOSE;default:}throw Error(goog.ui.Component.Error.STATE_INVALID);};
goog.ui.Component.setDefaultRightToLeft=function(rightToLeft){goog.ui.Component.defaultRightToLeft_=rightToLeft};goog.ui.Component.prototype.id_=null;goog.ui.Component.prototype.dom_;goog.ui.Component.prototype.inDocument_=false;goog.ui.Component.prototype.element_=null;goog.ui.Component.prototype.googUiComponentHandler_;goog.ui.Component.prototype.rightToLeft_=null;goog.ui.Component.prototype.model_=null;goog.ui.Component.prototype.parent_=null;goog.ui.Component.prototype.children_=null;
goog.ui.Component.prototype.childIndex_=null;goog.ui.Component.prototype.wasDecorated_=false;goog.ui.Component.prototype.getId=function(){return this.id_||(this.id_=this.idGenerator_.getNextUniqueId())};goog.ui.Component.prototype.setId=function(id){if(this.parent_&&this.parent_.childIndex_){goog.object.remove(this.parent_.childIndex_,this.id_);goog.object.add(this.parent_.childIndex_,id,this)}this.id_=id};goog.ui.Component.prototype.getElement=function(){return this.element_};
goog.ui.Component.prototype.setElementInternal=function(element){this.element_=element};goog.ui.Component.prototype.getHandler=function(){return this.googUiComponentHandler_||(this.googUiComponentHandler_=new goog.events.EventHandler(this))};
goog.ui.Component.prototype.setParent=function(parent){if(this==parent)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);if(parent&&this.parent_&&this.id_&&this.parent_.getChild(this.id_)&&this.parent_!=parent)throw Error(goog.ui.Component.Error.PARENT_UNABLE_TO_BE_SET);this.parent_=parent;goog.ui.Component.superClass_.setParentEventTarget.call(this,parent)};goog.ui.Component.prototype.getParent=function(){return this.parent_};
goog.ui.Component.prototype.setParentEventTarget=function(parent){if(this.parent_&&this.parent_!=parent)throw Error(goog.ui.Component.Error.NOT_SUPPORTED);goog.ui.Component.superClass_.setParentEventTarget.call(this,parent)};goog.ui.Component.prototype.getDomHelper=function(){return this.dom_};goog.ui.Component.prototype.isInDocument=function(){return this.inDocument_};goog.ui.Component.prototype.createDom=function(){this.element_=this.dom_.createElement("div")};
goog.ui.Component.prototype.render=function(opt_parentElement){this.render_(opt_parentElement)};goog.ui.Component.prototype.renderBefore=function(siblingElement){this.render_(siblingElement.parentNode,siblingElement)};
goog.ui.Component.prototype.render_=function(opt_parentElement,opt_beforeElement){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(!this.element_)this.createDom();if(opt_parentElement)opt_parentElement.insertBefore(this.element_,opt_beforeElement||null);else this.dom_.getDocument().body.appendChild(this.element_);if(!this.parent_||this.parent_.isInDocument())this.enterDocument()};
goog.ui.Component.prototype.decorate=function(element){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);else if(element&&this.canDecorate(element)){this.wasDecorated_=true;if(!this.dom_||this.dom_.getDocument()!=goog.dom.getOwnerDocument(element))this.dom_=goog.dom.getDomHelper(element);this.decorateInternal(element);this.enterDocument()}else throw Error(goog.ui.Component.Error.DECORATE_INVALID);};goog.ui.Component.prototype.canDecorate=function(element){return true};
goog.ui.Component.prototype.wasDecorated=function(){return this.wasDecorated_};goog.ui.Component.prototype.decorateInternal=function(element){this.element_=element};goog.ui.Component.prototype.enterDocument=function(){this.inDocument_=true;this.forEachChild(function(child){if(!child.isInDocument()&&child.getElement())child.enterDocument()})};
goog.ui.Component.prototype.exitDocument=function(){this.forEachChild(function(child){if(child.isInDocument())child.exitDocument()});if(this.googUiComponentHandler_)this.googUiComponentHandler_.removeAll();this.inDocument_=false};
goog.ui.Component.prototype.disposeInternal=function(){goog.ui.Component.superClass_.disposeInternal.call(this);if(this.inDocument_)this.exitDocument();if(this.googUiComponentHandler_){this.googUiComponentHandler_.dispose();delete this.googUiComponentHandler_}this.forEachChild(function(child){child.dispose()});if(!this.wasDecorated_&&this.element_)goog.dom.removeNode(this.element_);this.children_=null;this.childIndex_=null;this.element_=null;this.model_=null;this.parent_=null};
goog.ui.Component.prototype.makeId=function(idFragment){return this.getId()+"."+idFragment};goog.ui.Component.prototype.getModel=function(){return this.model_};goog.ui.Component.prototype.setModel=function(obj){this.model_=obj};goog.ui.Component.prototype.getFragmentFromId=function(id){return id.substring(this.getId().length+1)};goog.ui.Component.prototype.getElementByFragment=function(idFragment){if(!this.inDocument_)throw Error(goog.ui.Component.Error.NOT_IN_DOCUMENT);return this.dom_.getElement(this.makeId(idFragment))};
goog.ui.Component.prototype.addChild=function(child,opt_render){this.addChildAt(child,this.getChildCount(),opt_render)};
goog.ui.Component.prototype.addChildAt=function(child,index,opt_render){if(child.inDocument_&&(opt_render||!this.inDocument_))throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(index<0||index>this.getChildCount())throw Error(goog.ui.Component.Error.CHILD_INDEX_OUT_OF_BOUNDS);if(!this.childIndex_||!this.children_){this.childIndex_={};this.children_=[]}if(child.getParent()==this){goog.object.set(this.childIndex_,child.getId(),child);goog.array.remove(this.children_,child)}else goog.object.add(this.childIndex_,
child.getId(),child);child.setParent(this);goog.array.insertAt(this.children_,child,index);if(child.inDocument_&&this.inDocument_&&child.getParent()==this){var contentElement=this.getContentElement();contentElement.insertBefore(child.getElement(),contentElement.childNodes[index]||null)}else if(opt_render){if(!this.element_)this.createDom();var sibling=this.getChildAt(index+1);child.render_(this.getContentElement(),sibling?sibling.element_:null)}else if(this.inDocument_&&!child.inDocument_&&child.element_)child.enterDocument()};
goog.ui.Component.prototype.getContentElement=function(){return this.element_};goog.ui.Component.prototype.isRightToLeft=function(){if(this.rightToLeft_==null)this.rightToLeft_=goog.style.isRightToLeft(this.inDocument_?this.element_:this.dom_.getDocument().body);return this.rightToLeft_};goog.ui.Component.prototype.setRightToLeft=function(rightToLeft){if(this.inDocument_)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);this.rightToLeft_=rightToLeft};
goog.ui.Component.prototype.hasChildren=function(){return!!this.children_&&this.children_.length!=0};goog.ui.Component.prototype.getChildCount=function(){return this.children_?this.children_.length:0};goog.ui.Component.prototype.getChildIds=function(){var ids=[];this.forEachChild(function(child){ids.push(child.getId())});return ids};goog.ui.Component.prototype.getChild=function(id){return this.childIndex_&&id?goog.object.get(this.childIndex_,id)||null:null};
goog.ui.Component.prototype.getChildAt=function(index){return this.children_?this.children_[index]||null:null};goog.ui.Component.prototype.forEachChild=function(f,opt_obj){if(this.children_)goog.array.forEach(this.children_,f,opt_obj)};goog.ui.Component.prototype.indexOfChild=function(child){return this.children_&&child?goog.array.indexOf(this.children_,child):-1};
goog.ui.Component.prototype.removeChild=function(child,opt_unrender){if(child){var id=goog.isString(child)?child:child.getId();child=this.getChild(id);if(id&&child){goog.object.remove(this.childIndex_,id);goog.array.remove(this.children_,child);if(opt_unrender){child.exitDocument();if(child.element_)goog.dom.removeNode(child.element_)}child.setParent(null)}}if(!child)throw Error(goog.ui.Component.Error.NOT_OUR_CHILD);return child};
goog.ui.Component.prototype.removeChildAt=function(index,opt_unrender){return this.removeChild(this.getChildAt(index),opt_unrender)};goog.ui.Component.prototype.removeChildren=function(opt_unrender){while(this.hasChildren())this.removeChildAt(0,opt_unrender)};goog.provide("goog.ui.ControlContent");goog.ui.ControlContent;goog.provide("goog.dom.a11y");goog.provide("goog.dom.a11y.Role");goog.provide("goog.dom.a11y.State");goog.require("goog.dom");goog.require("goog.userAgent");goog.dom.a11y.State={ACTIVEDESCENDANT:"activedescendant",AUTOCOMPLETE:"autocomplete",CHECKED:"checked",DISABLED:"disabled",EXPANDED:"expanded",HASPOPUP:"haspopup",LABELLEDBY:"labelledby",LEVEL:"level",PRESSED:"pressed",SELECTED:"selected",VALUEMAX:"valuemax",VALUEMIN:"valuemin",VALUENOW:"valuenow",VALUETEXT:"valuetext"};
goog.dom.a11y.Role={BUTTON:"button",CHECKBOX:"checkbox",COMBOBOX:"combobox",DIALOG:"dialog",LINK:"link",LISTBOX:"listbox",MAIN:"main",MENU:"menu",MENUBAR:"menubar",MENU_ITEM:"menuitem",MENU_ITEM_CHECKBOX:"menuitemcheckbox",MENU_ITEM_RADIO:"menuitemradio",NAVIGATION:"navigation",OPTION:"option",GROUP:"group",SLIDER:"slider",TAB:"tab",TAB_LIST:"tablist",TAB_PANEL:"tabpanel",TOOLBAR:"toolbar"};goog.dom.a11y.noBrowserCheck_;
goog.dom.a11y.setRole=function(element,roleName){if(goog.userAgent.GECKO||goog.dom.a11y.noBrowserCheck_){element.setAttribute("role",roleName);element.roleName=roleName}};goog.dom.a11y.getRole=function(element){return element.roleName||""};goog.dom.a11y.setState=function(element,state,value){if(goog.userAgent.GECKO||goog.dom.a11y.noBrowserCheck_)element.setAttribute("aria-"+state,value)};goog.dom.a11y.getState=function(element,stateName){return element.getAttribute("aria-"+stateName)||""};
goog.dom.a11y.getNoBrowserCheck=function(){return!!goog.dom.a11y.noBrowserCheck_};goog.dom.a11y.setNoBrowserCheck=function(noBrowserCheck){goog.dom.a11y.noBrowserCheck_=noBrowserCheck};goog.dom.a11y.getActiveDescendant=function(element){var id=goog.dom.a11y.getState(element,goog.dom.a11y.State.ACTIVEDESCENDANT);return goog.dom.getOwnerDocument(element).getElementById(id)};
goog.dom.a11y.setActiveDescendant=function(element,activeElement){goog.dom.a11y.setState(element,goog.dom.a11y.State.ACTIVEDESCENDANT,activeElement?activeElement.id:"")};goog.provide("goog.ui.ControlRenderer");goog.require("goog.array");goog.require("goog.dom");goog.require("goog.dom.a11y");goog.require("goog.dom.a11y.State");goog.require("goog.dom.classes");goog.require("goog.object");goog.require("goog.style");goog.require("goog.ui.Component.State");goog.require("goog.ui.ControlContent");goog.require("goog.userAgent");goog.ui.ControlRenderer=function(){};goog.addSingletonGetter(goog.ui.ControlRenderer);
goog.ui.ControlRenderer.getCustomRenderer=function(ctor,cssClassName){var renderer=new ctor;renderer.getCssClass=function(){return cssClassName};return renderer};goog.ui.ControlRenderer.CSS_CLASS=goog.getCssName("goog-control");goog.ui.ControlRenderer.IE6_CLASS_COMBINATIONS=[];goog.ui.ControlRenderer.ARIA_STATE_MAP_;goog.ui.ControlRenderer.prototype.getAriaRole=function(){return undefined};
goog.ui.ControlRenderer.prototype.createDom=function(control){return control.getDomHelper().createDom("div",this.getClassNames(control).join(" "),control.getContent())};goog.ui.ControlRenderer.prototype.getContentElement=function(element){return element};
goog.ui.ControlRenderer.prototype.enableClassName=function(control,className,enable){var element=control.getElement?control.getElement():control;if(element)if(goog.userAgent.IE&&!goog.userAgent.isVersion("7")){var combinedClasses=this.getAppliedCombinedClassNames_(goog.dom.classes.get(element),className);combinedClasses.push(className);var f=enable?goog.dom.classes.add:goog.dom.classes.remove;goog.partial(f,element).apply(null,combinedClasses)}else goog.dom.classes.enable(element,className,enable)};
goog.ui.ControlRenderer.prototype.enableExtraClassName=function(control,className,enable){this.enableClassName(control,className,enable)};goog.ui.ControlRenderer.prototype.canDecorate=function(element){return true};
goog.ui.ControlRenderer.prototype.decorate=function(control,element){if(element.id)control.setId(element.id);var contentElem=this.getContentElement(element);if(contentElem&&contentElem.firstChild)control.setContentInternal(contentElem.firstChild.nextSibling?goog.array.clone(contentElem.childNodes):contentElem.firstChild);else control.setContentInternal(null);var state=0;var rendererClassName=this.getCssClass();var structuralClassName=this.getStructuralCssClass();var hasRendererClassName=false;var hasStructuralClassName=
false;var hasCombinedClassName=false;var classNames=goog.dom.classes.get(element);goog.array.forEach(classNames,function(className){if(!hasRendererClassName&&className==rendererClassName){hasRendererClassName=true;if(structuralClassName==rendererClassName)hasStructuralClassName=true}else if(!hasStructuralClassName&&className==structuralClassName)hasStructuralClassName=true;else state|=this.getStateFromClass(className)},this);control.setStateInternal(state);if(!hasRendererClassName){classNames.push(rendererClassName);
if(structuralClassName==rendererClassName)hasStructuralClassName=true}if(!hasStructuralClassName)classNames.push(structuralClassName);var extraClassNames=control.getExtraClassNames();if(extraClassNames)classNames.push.apply(classNames,extraClassNames);if(goog.userAgent.IE&&!goog.userAgent.isVersion("7")){var combinedClasses=this.getAppliedCombinedClassNames_(classNames);if(combinedClasses.length>0){classNames.push.apply(classNames,combinedClasses);hasCombinedClassName=true}}if(!hasRendererClassName||
!hasStructuralClassName||extraClassNames||hasCombinedClassName)goog.dom.classes.set(element,classNames.join(" "));return element};goog.ui.ControlRenderer.prototype.initializeDom=function(control){if(control.isRightToLeft())this.setRightToLeft(control.getElement(),true);if(control.isEnabled())this.setFocusable(control,control.isVisible())};
goog.ui.ControlRenderer.prototype.setAriaRole=function(element){if(goog.userAgent.GECKO){var ariaRole=this.getAriaRole();if(ariaRole)goog.dom.a11y.setRole(element,ariaRole)}};goog.ui.ControlRenderer.prototype.setAllowTextSelection=function(element,allow){goog.style.setUnselectable(element,!allow,!goog.userAgent.IE&&!goog.userAgent.OPERA)};
goog.ui.ControlRenderer.prototype.setRightToLeft=function(element,rightToLeft){this.enableClassName(element,goog.getCssName(this.getStructuralCssClass(),"rtl"),rightToLeft)};goog.ui.ControlRenderer.prototype.isFocusable=function(control){var keyTarget;if(control.isSupportedState(goog.ui.Component.State.FOCUSED)&&(keyTarget=control.getKeyEventTarget()))return goog.dom.isFocusableTabIndex(keyTarget);return false};
goog.ui.ControlRenderer.prototype.setFocusable=function(control,focusable){var keyTarget;if(control.isSupportedState(goog.ui.Component.State.FOCUSED)&&(keyTarget=control.getKeyEventTarget())){if(!focusable&&control.isFocused()){try{keyTarget.blur()}catch(e){}if(control.isFocused())control.handleBlur(null)}if(goog.dom.isFocusableTabIndex(keyTarget)!=focusable)goog.dom.setFocusableTabIndex(keyTarget,focusable)}};
goog.ui.ControlRenderer.prototype.setVisible=function(element,visible){goog.style.showElement(element,visible)};goog.ui.ControlRenderer.prototype.setState=function(control,state,enable){var element=control.getElement();if(element){var className=this.getClassForState(state);if(className)this.enableClassName(control,className,enable);this.updateAriaState(element,state,enable)}};
goog.ui.ControlRenderer.prototype.updateAriaState=function(element,state,enable){if(goog.userAgent.GECKO){if(!goog.ui.ControlRenderer.ARIA_STATE_MAP_)goog.ui.ControlRenderer.ARIA_STATE_MAP_=goog.object.create(goog.ui.Component.State.DISABLED,goog.dom.a11y.State.DISABLED,goog.ui.Component.State.ACTIVE,goog.dom.a11y.State.PRESSED,goog.ui.Component.State.SELECTED,goog.dom.a11y.State.SELECTED,goog.ui.Component.State.CHECKED,goog.dom.a11y.State.CHECKED,goog.ui.Component.State.OPENED,goog.dom.a11y.State.EXPANDED);
var ariaState=goog.ui.ControlRenderer.ARIA_STATE_MAP_[state];if(ariaState)goog.dom.a11y.setState(element,ariaState,enable)}};
goog.ui.ControlRenderer.prototype.setContent=function(element,content){var contentElem=this.getContentElement(element);if(contentElem){goog.dom.removeChildren(contentElem);if(content)if(goog.isString(content))goog.dom.setTextContent(contentElem,content);else{var childHandler=function(child){if(child){var doc=goog.dom.getOwnerDocument(contentElem);contentElem.appendChild(goog.isString(child)?doc.createTextNode(child):child)}};if(goog.isArray(content))goog.array.forEach(content,childHandler);else if(goog.isArrayLike(content)&&
!("nodeType"in content))goog.array.forEach(goog.array.clone(content),childHandler);else childHandler(content)}}};goog.ui.ControlRenderer.prototype.getKeyEventTarget=function(control){return control.getElement()};goog.ui.ControlRenderer.prototype.getCssClass=function(){return goog.ui.ControlRenderer.CSS_CLASS};goog.ui.ControlRenderer.prototype.getIe6ClassCombinations=function(){return[]};goog.ui.ControlRenderer.prototype.getStructuralCssClass=function(){return this.getCssClass()};
goog.ui.ControlRenderer.prototype.getClassNames=function(control){var cssClass=this.getCssClass();var classNames=[cssClass];var structuralCssClass=this.getStructuralCssClass();if(structuralCssClass!=cssClass)classNames.push(structuralCssClass);var classNamesForState=this.getClassNamesForState(control.getState());classNames.push.apply(classNames,classNamesForState);var extraClassNames=control.getExtraClassNames();if(extraClassNames)classNames.push.apply(classNames,extraClassNames);if(goog.userAgent.IE&&
!goog.userAgent.isVersion("7"))classNames.push.apply(classNames,this.getAppliedCombinedClassNames_(classNames));return classNames};
goog.ui.ControlRenderer.prototype.getAppliedCombinedClassNames_=function(classes,opt_includedClass){var toAdd=[];if(opt_includedClass)classes=classes.concat([opt_includedClass]);goog.array.forEach(this.getIe6ClassCombinations(),function(combo){if(goog.array.every(combo,goog.partial(goog.array.contains,classes))&&(!opt_includedClass||goog.array.contains(combo,opt_includedClass)))toAdd.push(combo.join("_"))});return toAdd};
goog.ui.ControlRenderer.prototype.getClassNamesForState=function(state){var classNames=[];while(state){var mask=state&-state;classNames.push(this.getClassForState(mask));state&=~mask}return classNames};goog.ui.ControlRenderer.prototype.getClassForState=function(state){if(!this.classByState_)this.createClassByStateMap_();return this.classByState_[state]};
goog.ui.ControlRenderer.prototype.getStateFromClass=function(className){if(!this.stateByClass_)this.createStateByClassMap_();var state=parseInt(this.stateByClass_[className],10);return isNaN(state)?0:state};
goog.ui.ControlRenderer.prototype.createClassByStateMap_=function(){var baseClass=this.getStructuralCssClass();this.classByState_=goog.object.create(goog.ui.Component.State.DISABLED,goog.getCssName(baseClass,"disabled"),goog.ui.Component.State.HOVER,goog.getCssName(baseClass,"hover"),goog.ui.Component.State.ACTIVE,goog.getCssName(baseClass,"active"),goog.ui.Component.State.SELECTED,goog.getCssName(baseClass,"selected"),goog.ui.Component.State.CHECKED,goog.getCssName(baseClass,"checked"),goog.ui.Component.State.FOCUSED,
goog.getCssName(baseClass,"focused"),goog.ui.Component.State.OPENED,goog.getCssName(baseClass,"open"))};goog.ui.ControlRenderer.prototype.createStateByClassMap_=function(){if(!this.classByState_)this.createClassByStateMap_();this.stateByClass_=goog.object.transpose(this.classByState_)};goog.provide("goog.ui.registry");goog.require("goog.dom.classes");goog.ui.registry.getDefaultRenderer=function(componentCtor){var key;var rendererCtor;while(componentCtor){key=goog.getUid(componentCtor);if(rendererCtor=goog.ui.registry.defaultRenderers_[key])break;componentCtor=componentCtor.superClass_?componentCtor.superClass_.constructor:null}if(rendererCtor)return goog.isFunction(rendererCtor.getInstance)?rendererCtor.getInstance():new rendererCtor;return null};
goog.ui.registry.setDefaultRenderer=function(componentCtor,rendererCtor){if(!goog.isFunction(componentCtor))throw Error("Invalid component class "+componentCtor);if(!goog.isFunction(rendererCtor))throw Error("Invalid renderer class "+rendererCtor);var key=goog.getUid(componentCtor);goog.ui.registry.defaultRenderers_[key]=rendererCtor};
goog.ui.registry.getDecoratorByClassName=function(className){return className in goog.ui.registry.decoratorFunctions_?goog.ui.registry.decoratorFunctions_[className]():null};goog.ui.registry.setDecoratorByClassName=function(className,decoratorFn){if(!className)throw Error("Invalid class name "+className);if(!goog.isFunction(decoratorFn))throw Error("Invalid decorator function "+decoratorFn);goog.ui.registry.decoratorFunctions_[className]=decoratorFn};
goog.ui.registry.getDecorator=function(element){var decorator;var classNames=goog.dom.classes.get(element);for(var i=0,len=classNames.length;i<len;i++)if(decorator=goog.ui.registry.getDecoratorByClassName(classNames[i]))return decorator;return null};goog.ui.registry.reset=function(){goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={}};goog.ui.registry.defaultRenderers_={};goog.ui.registry.decoratorFunctions_={};goog.provide("goog.ui.decorate");goog.require("goog.ui.registry");goog.ui.decorate=function(element){var decorator=goog.ui.registry.getDecorator(element);if(decorator)decorator.decorate(element);return decorator};goog.provide("goog.ui.Control");goog.require("goog.array");goog.require("goog.dom");goog.require("goog.events.BrowserEvent.MouseButton");goog.require("goog.events.Event");goog.require("goog.events.EventType");goog.require("goog.events.KeyCodes");goog.require("goog.events.KeyHandler");goog.require("goog.events.KeyHandler.EventType");goog.require("goog.string");goog.require("goog.ui.Component");goog.require("goog.ui.Component.Error");goog.require("goog.ui.Component.EventType");goog.require("goog.ui.Component.State");
goog.require("goog.ui.ControlContent");goog.require("goog.ui.ControlRenderer");goog.require("goog.ui.decorate");goog.require("goog.ui.registry");goog.require("goog.userAgent");goog.ui.Control=function(content,opt_renderer,opt_domHelper){goog.ui.Component.call(this,opt_domHelper);this.renderer_=opt_renderer||goog.ui.registry.getDefaultRenderer(this.constructor);this.setContentInternal(content)};goog.inherits(goog.ui.Control,goog.ui.Component);goog.ui.Control.registerDecorator=goog.ui.registry.setDecoratorByClassName;
goog.ui.Control.getDecorator=goog.ui.registry.getDecorator;goog.ui.Control.decorate=goog.ui.decorate;goog.ui.Control.prototype.renderer_;goog.ui.Control.prototype.content_=null;goog.ui.Control.prototype.state_=0;goog.ui.Control.prototype.supportedStates_=goog.ui.Component.State.DISABLED|goog.ui.Component.State.HOVER|goog.ui.Component.State.ACTIVE|goog.ui.Component.State.FOCUSED;goog.ui.Control.prototype.autoStates_=goog.ui.Component.State.ALL;
goog.ui.Control.prototype.statesWithTransitionEvents_=0;goog.ui.Control.prototype.visible_=true;goog.ui.Control.prototype.keyHandler_;goog.ui.Control.prototype.extraClassNames_=null;goog.ui.Control.prototype.handleMouseEvents_=true;goog.ui.Control.prototype.allowTextSelection_=false;goog.ui.Control.prototype.isHandleMouseEvents=function(){return this.handleMouseEvents_};
goog.ui.Control.prototype.setHandleMouseEvents=function(enable){if(this.isInDocument()&&enable!=this.handleMouseEvents_)this.enableMouseEventHandling_(enable);this.handleMouseEvents_=enable};goog.ui.Control.prototype.getKeyEventTarget=function(){return this.renderer_.getKeyEventTarget(this)};goog.ui.Control.prototype.getKeyHandler=function(){return this.keyHandler_||(this.keyHandler_=new goog.events.KeyHandler)};goog.ui.Control.prototype.getRenderer=function(){return this.renderer_};
goog.ui.Control.prototype.setRenderer=function(renderer){if(this.isInDocument())throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(this.getElement())this.setElementInternal(null);this.renderer_=renderer};goog.ui.Control.prototype.getExtraClassNames=function(){return this.extraClassNames_};
goog.ui.Control.prototype.addClassName=function(className){if(className){if(this.extraClassNames_){if(!goog.array.contains(this.extraClassNames_,className))this.extraClassNames_.push(className)}else this.extraClassNames_=[className];this.renderer_.enableExtraClassName(this,className,true)}};
goog.ui.Control.prototype.removeClassName=function(className){if(className&&this.extraClassNames_){goog.array.remove(this.extraClassNames_,className);if(this.extraClassNames_.length==0)this.extraClassNames_=null;this.renderer_.enableExtraClassName(this,className,false)}};goog.ui.Control.prototype.enableClassName=function(className,enable){if(enable)this.addClassName(className);else this.removeClassName(className)};
goog.ui.Control.prototype.createDom=function(){var element=this.renderer_.createDom(this);this.setElementInternal(element);this.renderer_.setAriaRole(element);if(!this.isAllowTextSelection())this.renderer_.setAllowTextSelection(element,false);if(!this.isVisible())this.renderer_.setVisible(element,false)};goog.ui.Control.prototype.getContentElement=function(){return this.renderer_.getContentElement(this.getElement())};goog.ui.Control.prototype.canDecorate=function(element){return this.renderer_.canDecorate(element)};
goog.ui.Control.prototype.decorateInternal=function(element){element=this.renderer_.decorate(this,element);this.setElementInternal(element);this.renderer_.setAriaRole(element);if(!this.isAllowTextSelection())this.renderer_.setAllowTextSelection(element,false);this.visible_=element.style.display!="none"};
goog.ui.Control.prototype.enterDocument=function(){goog.ui.Control.superClass_.enterDocument.call(this);this.renderer_.initializeDom(this);if(this.supportedStates_&~goog.ui.Component.State.DISABLED){if(this.isHandleMouseEvents())this.enableMouseEventHandling_(true);if(this.isSupportedState(goog.ui.Component.State.FOCUSED)){var keyTarget=this.getKeyEventTarget();if(keyTarget){var keyHandler=this.getKeyHandler();keyHandler.attach(keyTarget);this.getHandler().listen(keyHandler,goog.events.KeyHandler.EventType.KEY,
this.handleKeyEvent).listen(keyTarget,goog.events.EventType.FOCUS,this.handleFocus).listen(keyTarget,goog.events.EventType.BLUR,this.handleBlur)}}}};
goog.ui.Control.prototype.enableMouseEventHandling_=function(enable){var handler=this.getHandler();var element=this.getElement();if(enable){handler.listen(element,goog.events.EventType.MOUSEOVER,this.handleMouseOver).listen(element,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).listen(element,goog.events.EventType.MOUSEUP,this.handleMouseUp).listen(element,goog.events.EventType.MOUSEOUT,this.handleMouseOut);if(goog.userAgent.IE)handler.listen(element,goog.events.EventType.DBLCLICK,this.handleDblClick)}else{handler.unlisten(element,
goog.events.EventType.MOUSEOVER,this.handleMouseOver).unlisten(element,goog.events.EventType.MOUSEDOWN,this.handleMouseDown).unlisten(element,goog.events.EventType.MOUSEUP,this.handleMouseUp).unlisten(element,goog.events.EventType.MOUSEOUT,this.handleMouseOut);if(goog.userAgent.IE)handler.unlisten(element,goog.events.EventType.DBLCLICK,this.handleDblClick)}};
goog.ui.Control.prototype.exitDocument=function(){goog.ui.Control.superClass_.exitDocument.call(this);if(this.keyHandler_)this.keyHandler_.detach();if(this.isVisible()&&this.isEnabled())this.renderer_.setFocusable(this,false)};goog.ui.Control.prototype.disposeInternal=function(){goog.ui.Control.superClass_.disposeInternal.call(this);if(this.keyHandler_){this.keyHandler_.dispose();delete this.keyHandler_}delete this.renderer_;this.content_=null;this.extraClassNames_=null};
goog.ui.Control.prototype.getContent=function(){return this.content_};goog.ui.Control.prototype.setContent=function(content){this.renderer_.setContent(this.getElement(),content);this.setContentInternal(content)};goog.ui.Control.prototype.setContentInternal=function(content){this.content_=content};
goog.ui.Control.prototype.getCaptionInternal=function(getChildElementContent){var content=this.getContent();if(!content||goog.isString(content))return content;var caption=goog.isArray(content)?goog.array.map(content,getChildElementContent).join(""):goog.dom.getTextContent(content);return caption&&goog.string.trim(caption)};goog.ui.Control.prototype.getCaption=function(){return this.getCaptionInternal(goog.dom.getTextContent)};goog.ui.Control.prototype.setCaption=function(caption){this.setContent(caption)};
goog.ui.Control.prototype.setRightToLeft=function(rightToLeft){goog.ui.Control.superClass_.setRightToLeft.call(this,rightToLeft);var element=this.getElement();if(element)this.renderer_.setRightToLeft(element,rightToLeft)};goog.ui.Control.prototype.isAllowTextSelection=function(){return this.allowTextSelection_};goog.ui.Control.prototype.setAllowTextSelection=function(allow){this.allowTextSelection_=allow;var element=this.getElement();if(element)this.renderer_.setAllowTextSelection(element,allow)};
goog.ui.Control.prototype.isVisible=function(){return this.visible_};goog.ui.Control.prototype.setVisible=function(visible,opt_force){if(opt_force||this.visible_!=visible&&this.dispatchEvent(visible?goog.ui.Component.EventType.SHOW:goog.ui.Component.EventType.HIDE)){var element=this.getElement();if(element)this.renderer_.setVisible(element,visible);if(this.isEnabled())this.renderer_.setFocusable(this,visible);this.visible_=visible;return true}return false};goog.ui.Control.prototype.isEnabled=function(){return!this.hasState(goog.ui.Component.State.DISABLED)};
goog.ui.Control.prototype.isParentDisabled_=function(){var parent=this.getParent();return!!parent&&typeof parent.isEnabled=="function"&&!parent.isEnabled()};goog.ui.Control.prototype.setEnabled=function(enable){if(!this.isParentDisabled_()&&this.isTransitionAllowed(goog.ui.Component.State.DISABLED,!enable)){if(!enable){this.setActive(false);this.setHighlighted(false)}if(this.isVisible())this.renderer_.setFocusable(this,enable);this.setState(goog.ui.Component.State.DISABLED,!enable)}};
goog.ui.Control.prototype.isHighlighted=function(){return this.hasState(goog.ui.Component.State.HOVER)};goog.ui.Control.prototype.setHighlighted=function(highlight){if(this.isTransitionAllowed(goog.ui.Component.State.HOVER,highlight))this.setState(goog.ui.Component.State.HOVER,highlight)};goog.ui.Control.prototype.isActive=function(){return this.hasState(goog.ui.Component.State.ACTIVE)};
goog.ui.Control.prototype.setActive=function(active){if(this.isTransitionAllowed(goog.ui.Component.State.ACTIVE,active))this.setState(goog.ui.Component.State.ACTIVE,active)};goog.ui.Control.prototype.isSelected=function(){return this.hasState(goog.ui.Component.State.SELECTED)};goog.ui.Control.prototype.setSelected=function(select){if(this.isTransitionAllowed(goog.ui.Component.State.SELECTED,select))this.setState(goog.ui.Component.State.SELECTED,select)};goog.ui.Control.prototype.isChecked=function(){return this.hasState(goog.ui.Component.State.CHECKED)};
goog.ui.Control.prototype.setChecked=function(check){if(this.isTransitionAllowed(goog.ui.Component.State.CHECKED,check))this.setState(goog.ui.Component.State.CHECKED,check)};goog.ui.Control.prototype.isFocused=function(){return this.hasState(goog.ui.Component.State.FOCUSED)};goog.ui.Control.prototype.setFocused=function(focused){if(this.isTransitionAllowed(goog.ui.Component.State.FOCUSED,focused))this.setState(goog.ui.Component.State.FOCUSED,focused)};goog.ui.Control.prototype.isOpen=function(){return this.hasState(goog.ui.Component.State.OPENED)};
goog.ui.Control.prototype.setOpen=function(open){if(this.isTransitionAllowed(goog.ui.Component.State.OPENED,open))this.setState(goog.ui.Component.State.OPENED,open)};goog.ui.Control.prototype.getState=function(){return this.state_};goog.ui.Control.prototype.hasState=function(state){return!!(this.state_&state)};
goog.ui.Control.prototype.setState=function(state,enable){if(this.isSupportedState(state)&&enable!=this.hasState(state)){this.renderer_.setState(this,state,enable);this.state_=enable?this.state_|state:this.state_&~state}};goog.ui.Control.prototype.setStateInternal=function(state){this.state_=state};goog.ui.Control.prototype.isSupportedState=function(state){return!!(this.supportedStates_&state)};
goog.ui.Control.prototype.setSupportedState=function(state,support){if(this.isInDocument()&&this.hasState(state)&&!support)throw Error(goog.ui.Component.Error.ALREADY_RENDERED);if(!support&&this.hasState(state))this.setState(state,false);this.supportedStates_=support?this.supportedStates_|state:this.supportedStates_&~state};goog.ui.Control.prototype.isAutoState=function(state){return!!(this.autoStates_&state)&&this.isSupportedState(state)};
goog.ui.Control.prototype.setAutoStates=function(states,enable){this.autoStates_=enable?this.autoStates_|states:this.autoStates_&~states};goog.ui.Control.prototype.isDispatchTransitionEvents=function(state){return!!(this.statesWithTransitionEvents_&state)&&this.isSupportedState(state)};goog.ui.Control.prototype.setDispatchTransitionEvents=function(states,enable){this.statesWithTransitionEvents_=enable?this.statesWithTransitionEvents_|states:this.statesWithTransitionEvents_&~states};
goog.ui.Control.prototype.isTransitionAllowed=function(state,enable){return this.isSupportedState(state)&&this.hasState(state)!=enable&&(!(this.statesWithTransitionEvents_&state)||this.dispatchEvent(goog.ui.Component.getStateTransitionEvent(state,enable)))&&!this.isDisposed()};goog.ui.Control.prototype.handleMouseOver=function(e){if(!goog.ui.Control.isMouseEventWithinElement_(e,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.ENTER)&&this.isEnabled()&&this.isAutoState(goog.ui.Component.State.HOVER))this.setHighlighted(true)};
goog.ui.Control.prototype.handleMouseOut=function(e){if(!goog.ui.Control.isMouseEventWithinElement_(e,this.getElement())&&this.dispatchEvent(goog.ui.Component.EventType.LEAVE)){if(this.isAutoState(goog.ui.Component.State.ACTIVE))this.setActive(false);if(this.isAutoState(goog.ui.Component.State.HOVER))this.setHighlighted(false)}};goog.ui.Control.isMouseEventWithinElement_=function(e,elem){return!!e.relatedTarget&&goog.dom.contains(elem,e.relatedTarget)};
goog.ui.Control.prototype.handleMouseDown=function(e){if(this.isEnabled()){if(this.isAutoState(goog.ui.Component.State.HOVER))this.setHighlighted(true);if(e.isButton(goog.events.BrowserEvent.MouseButton.LEFT)){if(this.isAutoState(goog.ui.Component.State.ACTIVE))this.setActive(true);if(this.renderer_.isFocusable(this))this.getKeyEventTarget().focus()}}if(!this.isAllowTextSelection()&&e.isButton(goog.events.BrowserEvent.MouseButton.LEFT))e.preventDefault()};
goog.ui.Control.prototype.handleMouseUp=function(e){if(this.isEnabled()){if(this.isAutoState(goog.ui.Component.State.HOVER))this.setHighlighted(true);if(this.isActive()&&this.performActionInternal(e)&&this.isAutoState(goog.ui.Component.State.ACTIVE))this.setActive(false)}};goog.ui.Control.prototype.handleDblClick=function(e){if(this.isEnabled())this.performActionInternal(e)};
goog.ui.Control.prototype.performActionInternal=function(e){if(this.isAutoState(goog.ui.Component.State.CHECKED))this.setChecked(!this.isChecked());if(this.isAutoState(goog.ui.Component.State.SELECTED))this.setSelected(true);if(this.isAutoState(goog.ui.Component.State.OPENED))this.setOpen(!this.isOpen());var actionEvent=new goog.events.Event(goog.ui.Component.EventType.ACTION,this);if(e){var properties=["altKey","ctrlKey","metaKey","shiftKey","platformModifierKey"];for(var property,i=0;property=properties[i];i++)actionEvent[property]=
e[property]}return this.dispatchEvent(actionEvent)};goog.ui.Control.prototype.handleFocus=function(e){if(this.isAutoState(goog.ui.Component.State.FOCUSED))this.setFocused(true)};goog.ui.Control.prototype.handleBlur=function(e){if(this.isAutoState(goog.ui.Component.State.ACTIVE))this.setActive(false);if(this.isAutoState(goog.ui.Component.State.FOCUSED))this.setFocused(false)};
goog.ui.Control.prototype.handleKeyEvent=function(e){if(this.isVisible()&&this.isEnabled()&&this.handleKeyEventInternal(e)){e.preventDefault();e.stopPropagation();return true}return false};goog.ui.Control.prototype.handleKeyEventInternal=function(e){return e.keyCode==goog.events.KeyCodes.ENTER&&this.performActionInternal(e)};goog.ui.registry.setDefaultRenderer(goog.ui.Control,goog.ui.ControlRenderer);goog.ui.registry.setDecoratorByClassName(goog.ui.ControlRenderer.CSS_CLASS,function(){return new goog.ui.Control(null)});goog.provide("goog.ui.Checkbox");goog.provide("goog.ui.Checkbox.State");goog.require("goog.array");goog.require("goog.dom.classes");goog.require("goog.events.EventType");goog.require("goog.events.KeyCodes");goog.require("goog.events.KeyHandler.EventType");goog.require("goog.object");goog.require("goog.ui.Component.EventType");goog.require("goog.ui.Control");goog.require("goog.ui.registry");
goog.ui.Checkbox=function(opt_checked,opt_domHelper){var checkboxRenderer=goog.ui.ControlRenderer.getCustomRenderer(goog.ui.ControlRenderer,goog.ui.Checkbox.CSS_CLASS);goog.ui.Control.call(this,null,checkboxRenderer,opt_domHelper);this.setSupportedState(goog.ui.Component.State.ACTIVE,false);this.checked_=goog.isDef(opt_checked)?opt_checked:goog.ui.Checkbox.State.UNCHECKED};goog.inherits(goog.ui.Checkbox,goog.ui.Control);goog.ui.Checkbox.State={CHECKED:true,UNCHECKED:false,UNDETERMINED:null};
goog.ui.Checkbox.CSS_CLASS=goog.getCssName("goog-checkbox");goog.ui.Checkbox.Css={CHECKED:goog.getCssName(goog.ui.Checkbox.CSS_CLASS,"checked"),UNCHECKED:goog.getCssName(goog.ui.Checkbox.CSS_CLASS,"unchecked"),UNDETERMINED:goog.getCssName(goog.ui.Checkbox.CSS_CLASS,"undetermined")};goog.ui.Checkbox.classByState_=goog.object.create(goog.ui.Checkbox.State.CHECKED,goog.ui.Checkbox.Css.CHECKED,goog.ui.Checkbox.State.UNCHECKED,goog.ui.Checkbox.Css.UNCHECKED,goog.ui.Checkbox.State.UNDETERMINED,goog.ui.Checkbox.Css.UNDETERMINED);
goog.ui.Checkbox.prototype.label_=null;goog.ui.Checkbox.prototype.getChecked=function(){return this.checked_};goog.ui.Checkbox.prototype.isChecked=function(){return this.checked_==goog.ui.Checkbox.State.CHECKED};goog.ui.Checkbox.prototype.isUnchecked=function(){return this.checked_==goog.ui.Checkbox.State.UNCHECKED};goog.ui.Checkbox.prototype.isUndetermined=function(){return this.checked_==goog.ui.Checkbox.State.UNDETERMINED};
goog.ui.Checkbox.prototype.setChecked=function(checked){if(checked!=this.checked_){this.checked_=checked;this.updateView()}};goog.ui.Checkbox.prototype.setLabel=function(label){if(this.isInDocument()){this.exitDocument();this.label_=label;this.enterDocument()}else this.label_=label};goog.ui.Checkbox.prototype.toggle=function(){this.checked_=this.checked_?goog.ui.Checkbox.State.UNCHECKED:goog.ui.Checkbox.State.CHECKED;this.updateView()};goog.ui.Checkbox.prototype.createDom=function(){this.decorateInternal(this.getDomHelper().createElement("span"))};
goog.ui.Checkbox.prototype.decorateInternal=function(element){goog.ui.Checkbox.superClass_.decorateInternal.call(this,element);var classes=goog.dom.classes.get(element);if(goog.array.contains(classes,goog.ui.Checkbox.Css.UNDETERMINED))this.checked_=goog.ui.Checkbox.State.UNDETERMINED;else if(goog.array.contains(classes,goog.ui.Checkbox.Css.CHECKED))this.checked_=goog.ui.Checkbox.State.CHECKED;else if(goog.array.contains(classes,goog.ui.Checkbox.Css.UNCHECKED))this.checked_=goog.ui.Checkbox.State.UNCHECKED;
else this.updateView()};goog.ui.Checkbox.prototype.enterDocument=function(){goog.ui.Checkbox.superClass_.enterDocument.call(this);if(this.isHandleMouseEvents())this.getHandler().listen(this.label_||this.getElement(),goog.events.EventType.CLICK,this.handleClickOrSpace_)};
goog.ui.Checkbox.prototype.updateView=function(){var el=this.getElement();if(el){var classToAdd=goog.ui.Checkbox.classByState_[this.checked_];var elementClassNames=goog.dom.classes.get(el);if(goog.array.contains(elementClassNames,classToAdd))return;var classesToAssign=[classToAdd];var checkStateClasses=goog.object.getValues(goog.ui.Checkbox.Css);goog.array.forEach(elementClassNames,function(name){if(!goog.array.contains(checkStateClasses,name))classesToAssign.push(name)});goog.dom.classes.set(el,
classesToAssign.join(" "))}};goog.ui.Checkbox.prototype.setEnabled=function(enabled){goog.ui.Checkbox.superClass_.setEnabled.call(this,enabled);var el=this.getElement();if(el)el.tabIndex=this.isEnabled()?0:-1};goog.ui.Checkbox.prototype.handleClickOrSpace_=function(e){e.stopPropagation();var eventType=this.checked_?goog.ui.Component.EventType.UNCHECK:goog.ui.Component.EventType.CHECK;if(this.isEnabled()&&this.dispatchEvent(eventType)){this.toggle();this.dispatchEvent(goog.ui.Component.EventType.CHANGE)}};
goog.ui.Checkbox.prototype.handleKeyEventInternal=function(e){if(e.keyCode==goog.events.KeyCodes.SPACE)this.handleClickOrSpace_(e);return false};goog.ui.registry.setDecoratorByClassName(goog.ui.Checkbox.CSS_CLASS,function(){return new goog.ui.Checkbox});goog.provide("lanyard.demo.StatusBar");lanyard.demo.StatusBar=function(latElement,lonElement,eleElement){this.eventSource=null;this.latDisplay=latElement;this.lonDisplay=lonElement;this.eleDisplay=eleElement};lanyard.demo.StatusBar.prototype.setEventSource=function(newEventSource){if(!newEventSource)this._logger.severe("Attempted to use an invalid event source.");if(newEventSource)newEventSource.getInputHandler().addPositionListener(this);this.eventSource=newEventSource};
lanyard.demo.StatusBar.prototype.getEventSource=function(){return this.eventSource};lanyard.demo.StatusBar.prototype.moved=function(positionEvent){this.handleCursorPositionChange(positionEvent)};
lanyard.demo.StatusBar.prototype.handleCursorPositionChange=function(positionEvent){var newPos=positionEvent.getPosition();if(newPos){this.latDisplay.innerHTML=newPos.getLatitude().getDegrees();this.lonDisplay.innerHTML=newPos.getLongitude().getDegrees();this.eleDisplay.innerHTML=newPos.getElevation()}else{this.latDisplay.innerHTML="Off globe";this.lonDisplay.innerHTML="Off globe";this.eleDisplay.innerHTML="Off globe"}};goog.provide("goog.math");goog.require("goog.array");goog.math.randomInt=function(a){return Math.floor(Math.random()*a)};goog.math.uniformRandom=function(a,b){return a+Math.random()*(b-a)};goog.math.clamp=function(value,min,max){return Math.min(Math.max(value,min),max)};goog.math.modulo=function(a,b){var r=a%b;return r*b<0?r+b:r};goog.math.lerp=function(a,b,x){return a+x*(b-a)};goog.math.nearlyEquals=function(a,b,opt_tolerance){return Math.abs(a-b)<=(opt_tolerance||1.0E-6)};
goog.math.standardAngle=function(angle){return goog.math.modulo(angle,360)};goog.math.toRadians=function(angleDegrees){return angleDegrees*Math.PI/180};goog.math.toDegrees=function(angleRadians){return angleRadians*180/Math.PI};goog.math.angleDx=function(degrees,radius){return radius*Math.cos(goog.math.toRadians(degrees))};goog.math.angleDy=function(degrees,radius){return radius*Math.sin(goog.math.toRadians(degrees))};
goog.math.angle=function(x1,y1,x2,y2){return goog.math.standardAngle(goog.math.toDegrees(Math.atan2(y2-y1,x2-x1)))};goog.math.angleDifference=function(startAngle,endAngle){var d=goog.math.standardAngle(endAngle)-goog.math.standardAngle(startAngle);if(d>180)d=d-360;else if(d<=-180)d=360+d;return d};goog.math.sign=function(x){return x==0?0:x<0?-1:1};
goog.math.longestCommonSubsequence=function(array1,array2,opt_compareFn,opt_collectorFn){var compare=opt_compareFn||function(a,b){return a==b};var collect=opt_collectorFn||function(i1,i2){return array1[i1]};var length1=array1.length;var length2=array2.length;var arr=[];for(var i=0;i<length1+1;i++){arr[i]=[];arr[i][0]=0}for(var j=0;j<length2+1;j++)arr[0][j]=0;for(i=1;i<=length1;i++)for(j=1;j<=length1;j++)if(compare(array1[i-1],array2[j-1]))arr[i][j]=arr[i-1][j-1]+1;else arr[i][j]=Math.max(arr[i-1][j],
arr[i][j-1]);var result=[];var i=length1,j=length2;while(i>0&&j>0)if(compare(array1[i-1],array2[j-1])){result.unshift(collect(i-1,j-1));i--;j--}else if(arr[i-1][j]>arr[i][j-1])i--;else j--;return result};goog.math.sum=function(var_args){return goog.array.reduce(arguments,function(sum,value){return sum+value},0)};goog.math.average=function(var_args){return goog.math.sum.apply(null,arguments)/arguments.length};
goog.math.standardDeviation=function(var_args){var sampleSize=arguments.length;if(sampleSize<2)return 0;var mean=goog.math.average.apply(null,arguments);var variance=goog.math.sum.apply(null,goog.array.map(arguments,function(val){return Math.pow(val-mean,2)}))/(sampleSize-1);return Math.sqrt(variance)};goog.math.isInt=function(num){return isFinite(num)&&num%1==0};goog.math.isFiniteNumber=function(num){return isFinite(num)&&!isNaN(num)};goog.provide("goog.events.MouseWheelEvent");goog.provide("goog.events.MouseWheelHandler");goog.provide("goog.events.MouseWheelHandler.EventType");goog.require("goog.events");goog.require("goog.events.BrowserEvent");goog.require("goog.events.EventTarget");goog.require("goog.math");goog.require("goog.userAgent");
goog.events.MouseWheelHandler=function(element){goog.events.EventTarget.call(this);this.element_=element;var type=goog.userAgent.GECKO?"DOMMouseScroll":"mousewheel";this.listenKey_=goog.events.listen(this.element_,type,this)};goog.inherits(goog.events.MouseWheelHandler,goog.events.EventTarget);goog.events.MouseWheelHandler.EventType={MOUSEWHEEL:"mousewheel"};goog.events.MouseWheelHandler.prototype.maxDeltaX_;goog.events.MouseWheelHandler.prototype.maxDeltaY_;
goog.events.MouseWheelHandler.prototype.setMaxDeltaX=function(maxDeltaX){this.maxDeltaX_=maxDeltaX};goog.events.MouseWheelHandler.prototype.setMaxDeltaY=function(maxDeltaY){this.maxDeltaY_=maxDeltaY};
goog.events.MouseWheelHandler.prototype.handleEvent=function(e){var deltaX=0;var deltaY=0;var detail=0;var be=e.getBrowserEvent();if(be.type=="mousewheel"){var wheelDeltaScaleFactor=1;if(goog.userAgent.IE||goog.userAgent.WEBKIT&&(goog.userAgent.WINDOWS||goog.userAgent.isVersion("532.0")))wheelDeltaScaleFactor=40;detail=-be.wheelDelta/wheelDeltaScaleFactor;if(goog.isDef(be.wheelDeltaX)){deltaX=-be.wheelDeltaX/wheelDeltaScaleFactor;deltaY=-be.wheelDeltaY/wheelDeltaScaleFactor}else deltaY=detail}else{detail=
be.detail;if(detail>100)detail=3;else if(detail<-100)detail=-3;if(goog.isDef(be.axis)&&be.axis===be.HORIZONTAL_AXIS)deltaX=detail;else deltaY=detail}if(goog.isNumber(this.maxDeltaX_))deltaX=goog.math.clamp(deltaX,-this.maxDeltaX_,this.maxDeltaX_);if(goog.isNumber(this.maxDeltaY_))deltaY=goog.math.clamp(deltaY,-this.maxDeltaY_,this.maxDeltaY_);var newEvent=new goog.events.MouseWheelEvent(detail,be,deltaX,deltaY);try{this.dispatchEvent(newEvent)}finally{newEvent.dispose()}};
goog.events.MouseWheelHandler.prototype.disposeInternal=function(){goog.events.MouseWheelHandler.superClass_.disposeInternal.call(this);goog.events.unlistenByKey(this.listenKey_);delete this.listenKey_};goog.events.MouseWheelEvent=function(detail,browserEvent,deltaX,deltaY){goog.events.BrowserEvent.call(this,browserEvent);this.type=goog.events.MouseWheelHandler.EventType.MOUSEWHEEL;this.detail=detail;this.deltaX=deltaX;this.deltaY=deltaY};goog.inherits(goog.events.MouseWheelEvent,goog.events.BrowserEvent);goog.provide("goog.fx.DragEvent");goog.provide("goog.fx.Dragger");goog.provide("goog.fx.Dragger.EventType");goog.require("goog.dom");goog.require("goog.events");goog.require("goog.events.BrowserEvent.MouseButton");goog.require("goog.events.Event");goog.require("goog.events.EventHandler");goog.require("goog.events.EventTarget");goog.require("goog.events.EventType");goog.require("goog.math.Coordinate");goog.require("goog.math.Rect");goog.require("goog.userAgent");
goog.fx.Dragger=function(target,opt_handle,opt_limits){this.target=target;this.handle=opt_handle||target;this.limits=opt_limits||new goog.math.Rect(NaN,NaN,NaN,NaN);this.document_=goog.dom.getOwnerDocument(target);this.eventHandler_=new goog.events.EventHandler(this);goog.events.listen(this.handle,goog.events.EventType.MOUSEDOWN,this.startDrag,false,this)};goog.inherits(goog.fx.Dragger,goog.events.EventTarget);goog.fx.Dragger.HAS_SET_CAPTURE_=goog.userAgent.IE||goog.userAgent.GECKO&&goog.userAgent.isVersion("1.9.3");
goog.fx.Dragger.EventType={START:"start",BEFOREDRAG:"beforedrag",DRAG:"drag",END:"end"};goog.fx.Dragger.prototype.target;goog.fx.Dragger.prototype.handle;goog.fx.Dragger.prototype.limits;goog.fx.Dragger.prototype.screenX=0;goog.fx.Dragger.prototype.screenY=0;goog.fx.Dragger.prototype.startX=0;goog.fx.Dragger.prototype.startY=0;goog.fx.Dragger.prototype.deltaX=0;goog.fx.Dragger.prototype.deltaY=0;goog.fx.Dragger.prototype.pageScroll;goog.fx.Dragger.prototype.enabled_=true;
goog.fx.Dragger.prototype.dragging_=false;goog.fx.Dragger.prototype.hysteresisDistanceSquared_=0;goog.fx.Dragger.prototype.mouseDownTime_=0;goog.fx.Dragger.prototype.document_;goog.fx.Dragger.prototype.eventHandler_;goog.fx.Dragger.prototype.scrollTarget_;goog.fx.Dragger.prototype.ieDragStartCancellingOn_=false;goog.fx.Dragger.prototype.getHandler=function(){return this.eventHandler_};goog.fx.Dragger.prototype.setLimits=function(limits){this.limits=limits||new goog.math.Rect(NaN,NaN,NaN,NaN)};
goog.fx.Dragger.prototype.setHysteresis=function(distance){this.hysteresisDistanceSquared_=Math.pow(distance,2)};goog.fx.Dragger.prototype.getHysteresis=function(){return Math.sqrt(this.hysteresisDistanceSquared_)};goog.fx.Dragger.prototype.setScrollTarget=function(scrollTarget){this.scrollTarget_=scrollTarget};goog.fx.Dragger.prototype.setCancelIeDragStart=function(cancelIeDragStart){this.ieDragStartCancellingOn_=cancelIeDragStart};goog.fx.Dragger.prototype.getEnabled=function(){return this.enabled_};
goog.fx.Dragger.prototype.setEnabled=function(enabled){this.enabled_=enabled};goog.fx.Dragger.prototype.disposeInternal=function(){goog.fx.Dragger.superClass_.disposeInternal.call(this);goog.events.unlisten(this.handle,goog.events.EventType.MOUSEDOWN,this.startDrag,false,this);this.eventHandler_.dispose();delete this.target;delete this.handle;delete this.eventHandler_};
goog.fx.Dragger.prototype.startDrag=function(e){if(this.enabled_&&!this.dragging_&&(e.type!=goog.events.EventType.MOUSEDOWN||e.isButton(goog.events.BrowserEvent.MouseButton.LEFT))){if(this.hysteresisDistanceSquared_==0){this.initializeDrag_(e);if(this.dragging_)e.preventDefault();else return}else e.preventDefault();this.setupDragHandlers();this.screenX=this.startX=e.screenX;this.screenY=this.startY=e.screenY;this.deltaX=this.target.offsetLeft;this.deltaY=this.target.offsetTop;this.pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll();
this.mouseDownTime_=goog.now()}};
goog.fx.Dragger.prototype.setupDragHandlers=function(){var doc=this.document_;var docEl=doc.documentElement;var useCapture=!goog.fx.Dragger.HAS_SET_CAPTURE_;this.eventHandler_.listen(doc,goog.events.EventType.MOUSEMOVE,this.mouseMoved_,useCapture);this.eventHandler_.listen(doc,goog.events.EventType.MOUSEUP,this.endDrag,useCapture);if(goog.fx.Dragger.HAS_SET_CAPTURE_){docEl.setCapture(false);this.eventHandler_.listen(docEl,goog.events.EventType.LOSECAPTURE,this.endDrag)}else this.eventHandler_.listen(goog.dom.getWindow(doc),goog.events.EventType.BLUR,
this.endDrag);if(goog.userAgent.IE&&this.ieDragStartCancellingOn_)this.eventHandler_.listen(doc,goog.events.EventType.DRAGSTART,goog.events.Event.preventDefault);if(this.scrollTarget_)this.eventHandler_.listen(this.scrollTarget_,goog.events.EventType.SCROLL,this.onScroll_,useCapture)};goog.fx.Dragger.prototype.initializeDrag_=function(e){var rv=this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.START,this,e.clientX,e.clientY,e));if(rv!==false)this.dragging_=true};
goog.fx.Dragger.prototype.endDrag=function(e,opt_dragCanceled){this.eventHandler_.removeAll();if(goog.fx.Dragger.HAS_SET_CAPTURE_)this.document_.releaseCapture();if(this.dragging_){this.dragging_=false;var x=this.limitX(this.deltaX);var y=this.limitY(this.deltaY);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.END,this,e.clientX,e.clientY,e,x,y,opt_dragCanceled))}};goog.fx.Dragger.prototype.endDragCancel=function(e){this.endDrag(e,true)};
goog.fx.Dragger.prototype.mouseMoved_=function(e){if(this.enabled_){var dx=e.screenX-this.screenX;var dy=e.screenY-this.screenY;this.screenX=e.screenX;this.screenY=e.screenY;if(!this.dragging_){var diffX=this.startX-this.screenX;var diffY=this.startY-this.screenY;var distance=diffX*diffX+diffY*diffY;if(distance>this.hysteresisDistanceSquared_){this.initializeDrag_(e);if(!this.dragging_){this.endDrag(e);return}}}var pos=this.calculatePosition_(dx,dy);var x=pos.x;var y=pos.y;if(this.dragging_){var rv=
this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.BEFOREDRAG,this,e.clientX,e.clientY,e,x,y));if(rv!==false){this.doDrag(e,x,y,false);e.preventDefault()}}}};
goog.fx.Dragger.prototype.calculatePosition_=function(dx,dy){var pageScroll=goog.dom.getDomHelper(this.document_).getDocumentScroll();dx+=pageScroll.x-this.pageScroll.x;dy+=pageScroll.y-this.pageScroll.y;this.pageScroll=pageScroll;this.deltaX+=dx;this.deltaY+=dy;var x=this.limitX(this.deltaX);var y=this.limitY(this.deltaY);return new goog.math.Coordinate(x,y)};
goog.fx.Dragger.prototype.onScroll_=function(e){var pos=this.calculatePosition_(0,0);e.clientX=this.pageScroll.x-this.screenX;e.clientY=this.pageScroll.x-this.screenY;this.doDrag(e,pos.x,pos.y,true)};goog.fx.Dragger.prototype.doDrag=function(e,x,y,dragFromScroll){this.defaultAction(x,y);this.dispatchEvent(new goog.fx.DragEvent(goog.fx.Dragger.EventType.DRAG,this,e.clientX,e.clientY,e,x,y))};
goog.fx.Dragger.prototype.limitX=function(x){var rect=this.limits;var left=!isNaN(rect.left)?rect.left:null;var width=!isNaN(rect.width)?rect.width:0;var maxX=left!=null?left+width:Infinity;var minX=left!=null?left:-Infinity;return Math.min(maxX,Math.max(minX,x))};
goog.fx.Dragger.prototype.limitY=function(y){var rect=this.limits;var top=!isNaN(rect.top)?rect.top:null;var height=!isNaN(rect.height)?rect.height:0;var maxY=top!=null?top+height:Infinity;var minY=top!=null?top:-Infinity;return Math.min(maxY,Math.max(minY,y))};goog.fx.Dragger.prototype.defaultAction=function(x,y){this.target.style.left=x+"px";this.target.style.top=y+"px"};
goog.fx.DragEvent=function(type,dragobj,clientX,clientY,browserEvent,opt_actX,opt_actY,opt_dragCanceled){goog.events.Event.call(this,type);this.clientX=clientX;this.clientY=clientY;this.browserEvent=browserEvent;this.left=goog.isDef(opt_actX)?opt_actX:dragobj.deltaX;this.top=goog.isDef(opt_actY)?opt_actY:dragobj.deltaY;this.dragger=dragobj;this.dragCanceled=!!opt_dragCanceled};goog.inherits(goog.fx.DragEvent,goog.events.Event);goog.provide("lanyard.dom.PositionEvent");lanyard.dom.PositionEvent=function(source,mouseEvent,previousPosition,position){this._logger=goog.debug.Logger.getLogger("lanyard.dom.PositionEvent");this.source=source;this.mouseEvent=mouseEvent;this.previousPosition=previousPosition;this.position=position};lanyard.dom.PositionEvent.prototype.getPosition=function(){return this.position};lanyard.dom.PositionEvent.prototype.getPreviousPosition=function(){return this.previousPosition};
lanyard.dom.PositionEvent.prototype.getMouseEvent=function(){return this.mouseEvent};lanyard.dom.PositionEvent.prototype.toString=function(){var val="A position event: "+this.previousPosition?this.previousPosition:"null"+" --\> "+this.position?this.position:"null";return val};goog.provide("lanyard.dom.ViewProperties");goog.require("goog.debug.Logger");lanyard.dom.ViewProperties=function(){this.latLon=null;this.heading=null;this.pitch=null;this.zoom=null};goog.provide("lanyard.dom.InputHandler");goog.require("goog.debug.Logger");goog.require("goog.events.MouseWheelHandler");goog.require("goog.events.EventType");goog.require("goog.fx.Dragger");goog.require("goog.fx.Dragger.EventType");goog.require("lanyard.dom.PositionEvent");goog.require("lanyard.dom.ViewProperties");
lanyard.dom.InputHandler=function(){this._logger=goog.debug.Logger.getLogger("lanyard.dom.InputHandler");this.eventListeners=[];this.lanyardCanvas=null;this.lastMousePoint=new lanyard.util.Point(0,0);this.isHovering=false;this.smoothViewChange=true;this.viewLatLonMinChangeFactor=1.0E-5;this.viewLatLonMaxChangeFactor=0.2;this.viewLatLonErrorThreshold=1.0E-9;this.viewLatLonStepCoefficient=0.6;this.viewLatLonCenterStepCoefficient=0.1;this.viewAngleChangeFactor=0.25;this.viewAngleErrorThreshold=1.0E-4;
this.viewAngleStepCoefficient=0.3;this.viewAngleResetStepCoefficient=0.1;this.viewZoomChangeFactor=0.05;this.viewZoomErrorThreshold=0.0010;this.viewZoomStepCoefficient=0.1};
lanyard.dom.InputHandler.prototype.setEventSource=function(lanyardCanvas){if(!lanyardCanvas)this._logger.severe("Attempted to use an invalid object as an event source.");if(!lanyardCanvas.getView())this._logger.severe("Attempted to set an event source without a valid view.");var domCanvas=lanyardCanvas.getCanvas();if(!domCanvas)this._logger.severe("Attempted to use an input source without a valid dom node.");this.lanyardCanvas=lanyardCanvas;var mouseWheelHandler=new goog.events.MouseWheelHandler(domCanvas);
goog.events.listen(mouseWheelHandler,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.mouseWheelMoved,false,this);goog.events.listen(domCanvas,goog.events.EventType.MOUSEDOWN,function(e){var dragger=new goog.fx.Dragger(domCanvas);goog.events.listen(dragger,goog.fx.Dragger.EventType.DRAG,this.mouseDragged,false,this);goog.events.listen(dragger,goog.fx.Dragger.EventType.END,function(e){dragger.dispose()});dragger.startDrag(e)},false,this);goog.events.listen(domCanvas,goog.events.EventType.MOUSEMOVE,
this.mouseMoved,false,this);goog.events.listen(domCanvas,"unload",function(e){goog.events.unlisten(mouseWheelHandler,goog.events.MouseWheelHandler.EventType.MOUSEWHEEL,this.mouseWheelMoved)})};lanyard.dom.InputHandler.prototype.getEventSource=function(){return this.lanyardCanvas};
lanyard.dom.InputHandler.prototype.mouseMoved=function(mouseEvent){if(!this.lanyardCanvas)return;if(!mouseEvent)return;this.lastMousePoint=new lanyard.util.Point(mouseEvent.clientX,mouseEvent.clientY);var view=this.lanyardCanvas.getView();if(!view)return;var model=this.lanyardCanvas.getModel();if(!model)return;var globe=model.getGlobe();if(!globe)return;this.callPositionListeners(new lanyard.dom.PositionEvent(this.lanyardCanvas,mouseEvent,null,null))};
lanyard.dom.InputHandler.prototype.mouseDragged=function(mouseEvent){if(!this.lanyardCanvas){this._logger.severe("Attempted to handle a drag event without a valid canvas.");return}if(!mouseEvent){this._logger.severe("Attempted to handle a drag event without a valid event.");return}var view=this.lanyardCanvas.getView();if(!view){this._logger.severe("Attempted to handle a drag event without a valid view.");return}var model=this.lanyardCanvas.getModel();if(!model){this._logger.severe("Attempted to handle a drag event without a valid model.");
return}var mouseMove=new lanyard.util.Point(mouseEvent.clientX-this.lastMousePoint.getX(),mouseEvent.clientY-this.lastMousePoint.getY());var latLonChange=null;var prev=view.computePositionFromScreenPoint(this.lastMousePoint.getX(),this.lastMousePoint.getY());var cur=view.computePositionFromScreenPoint(mouseEvent.clientX,mouseEvent.clientY);if(prev&&cur)latLonChange=new lanyard.geom.LatLon(prev.getLatitude().subtract(cur.getLatitude()),prev.getLongitude().subtract(cur.getLongitude()));else{var globe=
this.lanyardCanvas.getModel().getGlobe();if(globe){var sinHeading=view.getHeading().sin();var cosHeading=view.getHeading().cos();var latFactor=cosHeading*mouseMove.getY()+sinHeading*mouseMove.getX();var lonFactor=sinHeading*mouseMove.getY()-cosHeading*mouseMove.getX();latLonChange=this.computeViewLatLonChange(view,globe,latFactor,lonFactor,false)}else this._logger.severe("Attempted to perform a drag event without a valid globe.")}if(latLonChange)this.setViewLatLon(view,this.computeNewViewLatLon(view,
latLonChange.getLatitude(),latLonChange.getLongitude()));else this._logger.severe("A failure occured in the drag event result.");this.lastMousePoint=new lanyard.util.Point(mouseEvent.clientX,mouseEvent.clientY)};
lanyard.dom.InputHandler.prototype.setViewLatLon=function(view,newLatLon){if(!newLatLon)this._logger.severe("Attempted to set the view to an invalid latlon.");this.viewTarget=new lanyard.dom.ViewProperties;this.viewTarget.latLon=newLatLon;this.setViewProperties(view,this.viewTarget,this.viewLatLonStepCoefficient,this.viewLatLonErrorThreshold,false)};
lanyard.dom.InputHandler.prototype.computeViewLatLonChange=function(view,globe,latFactor,lonFactor,slow){var eye=view.getEyePoint();if(!eye){this._logger.severe("Attempted to compute a latlon change without a valid eye.");return null}var normAlt=this.clamp(eye.length()/globe.getMaximumRadius()-1,0,1);var factor=((1-normAlt)*this.viewLatLonMinChangeFactor+normAlt*this.viewLatLonMaxChangeFactor)*(slow?0.25:1);return lanyard.geom.LatLon.prototype.fromDegrees(latFactor*factor,lonFactor*factor)};
lanyard.dom.InputHandler.prototype.computeNewViewLatLon=function(view,latChange,lonChange){var latDegrees;var lonDegrees;if(this.viewTarget&&this.viewTarget.latLon){latDegrees=this.viewTarget.latLon.getLatitude().getDegrees();lonDegrees=this.viewTarget.latLon.getLongitude().getDegrees()}else{latDegrees=view.getPosition().getLatitude().getDegrees();lonDegrees=view.getPosition().getLongitude().getDegrees()}latDegrees=latDegrees+latChange.getDegrees();lonDegrees=lonDegrees+lonChange.getDegrees();if(latDegrees<
-90)latDegrees=-90;else if(latDegrees>90)latDegrees=90;if(lonDegrees<-180)lonDegrees=lonDegrees+360;else if(lonDegrees>180)lonDegrees=lonDegrees-360;var latlon=lanyard.geom.LatLon.prototype.fromDegrees(latDegrees,lonDegrees);return latlon};
lanyard.dom.InputHandler.prototype.mouseWheelMoved=function(mouseWheelEvent){if(!this.lanyardCanvas){this._logger.severe("A mouse wheel event was thrown away due to a missing event source.");return}if(!mouseWheelEvent){this._logger.severe("Attempted to handle an invalid mouse wheel event.");return}mouseWheelEvent.preventDefault();var view=this.lanyardCanvas.getView();if(!view){this._logger.severe("Attempted to handle a mouse wheel event without a valid view.");return}var wheelRotation=mouseWheelEvent.deltaY;
var wheelDirection=function(rotation){if(rotation<0)return-1;if(rotation>0)return 1;return 0}(wheelRotation);this.setViewZoom(view,this.computeNewViewZoom(view,this.computeZoomViewChange(wheelDirection,false)))};
lanyard.dom.InputHandler.prototype.computeNewViewZoom=function(view,change){var logZoom;if(this.viewTarget&&this.viewTarget.zoom)logZoom=Math.log(this.viewTarget.zoom);else logZoom=Math.log(view.getZoom());logZoom=logZoom+change;var constraints=view.getZoomConstraints();return this.clamp(Math.exp(logZoom),constraints[0],constraints[1])};lanyard.dom.InputHandler.prototype.computeZoomViewChange=function(factor,slow){return factor*this.viewZoomChangeFactor*(slow?0.25:1)};
lanyard.dom.InputHandler.prototype.setViewZoom=function(view,newZoom){this.viewTarget=new lanyard.dom.ViewProperties;this.viewTarget.zoom=newZoom;this.setViewProperties(view,this.viewTarget,this.viewZoomStepCoefficient,this.viewZoomErrorThreshold,false)};
lanyard.dom.InputHandler.prototype.setViewProperties=function(view,newProperties,stepCoefficient,errorThreshold,forceSmooth){if(!view)this._logger.severe("Attempted to set properties on a null view.");if(newProperties.latLon)view.goToLatLon(newProperties.latLon);if(newProperties.heading)view.setHeading(newProperties.heading);if(newProperties.pitch)view.setPitch(newProperties.pitch);if(newProperties.zoom)view.setZoom(newProperties.zoom)};
lanyard.dom.InputHandler.prototype.clamp=function(x,min,max){return x<min?min:x>max?max:x};lanyard.dom.InputHandler.prototype.addPositionListener=function(listener){if(!listener)this._logger.severe("Attempted to add an invalid position listener.");listener.isPositionListener=true;this.eventListeners.push(listener)};lanyard.dom.InputHandler.prototype.callPositionListeners=function(positionEvent){for(var i=0;i<this.eventListeners.length;i=i+1)if(this.eventListeners[i].isPositionListener&&this.eventListeners[i].moved)this.eventListeners[i].moved(positionEvent)};goog.provide("lanyard.render.SurfaceImage");
lanyard.render.SurfaceImage=function(imageSource,sector,layer){this._logger=goog.debug.Logger.getLogger("lanyard.render.SurfaceImage");this.extent=null;this.extentVerticalExaggertion=Number.MIN_VALUE;this.opacity=1;this.textureData=null;this.loaded=false;this.hasProblem=false;this.imageSource=imageSource;this.sector=sector;this.referencePosition=new lanyard.geom.Position(sector.getCentroid(),0);this.layer=layer;if(!this.imageSource)this._logger.severe("The image source is null.");if(!this.sector)this._logger.severe("The sector is null.")};
lanyard.render.SurfaceImage.prototype.setSector=function(sector){if(!sector)this._logger.severe("The sector was null.");this.sector=sector;this.extent=null};lanyard.render.SurfaceImage.prototype.getSector=function(){return this.sector};lanyard.render.SurfaceImage.prototype.isLoaded=function(){return this.loaded};lanyard.render.SurfaceImage.prototype.hasProblem=function(){return this.hasProblem};
lanyard.render.SurfaceImage.prototype.getExtent=function(dc){if(!dc)this._logger.severe("The draw context is null.");if(!this.extent||this.extentVerticalExaggertion!==dc.getVerticalExaggeration()){this.extent=dc.getGlobe().computeBoundingCylinder(dc.getVerticalExaggeration(),this.sector);this.extentVerticalExaggertion=dc.getVerticalExaggeration()}return this.extent};
lanyard.render.SurfaceImage.prototype.initializeTexture=function(dc){if(!dc)this._logger.severe("The draw context was null.");var gl=dc.getGL();var thix=this;var surfaceTexture=new lanyard.util.Texture(dc.getGL());var surfaceImage=new Image;surfaceImage.onload=function(){surfaceTexture.bind();surfaceTexture.setImage(surfaceImage);surfaceTexture.setTexParameteri(gl.TEXTURE_MIN_FILTER,gl.LINEAR);surfaceTexture.setTexParameteri(gl.TEXTURE_MAG_FILTER,gl.LINEAR);surfaceTexture.setTexParameteri(gl.TEXTURE_WRAP_S,
gl.CLAMP_TO_EDGE);surfaceTexture.setTexParameteri(gl.TEXTURE_WRAP_T,gl.CLAMP_TO_EDGE);surfaceTexture.createMipmap();thix.isLoaded=true;thix.textureData=surfaceTexture};surfaceImage.onerror=function(){thix._logger.warning("An image failed to load from: "+thix.imageSource);thix.hasProblem=true};surfaceImage.onabort=function(){thix._logger.warning("An image load was aborted: "+thix.imageSource);thix.hasProblem=true};surfaceImage.src=this.imageSource;return surfaceTexture};
lanyard.render.SurfaceImage.prototype.bind=function(dc){if(!dc)this._logger.severe("The draw context is null.");var t=this.textureData;if(!t){t=this.initializeTexture(dc);if(t)return true}if(t){t.bind();return true}return false};lanyard.render.SurfaceImage.prototype.applyInternalTransform=function(dc){if(!dc)this._logger.severe("The draw context was null.");var t=this.textureData;if(!t)t=this.initializeTexture(dc)};
lanyard.render.SurfaceImage.prototype.render=function(dc){if(!dc)this._logger.severe("The draw context is null.");if(!this.sector.intersects(dc.getVisibleSector())){this._logger.fine("The surface image does not intersect with a visible sector.");return}var gl=dc.getGL();gl.enable(gl.CULL_FACE);dc.getSurfaceTileRenderer().renderTile(dc,this)};
lanyard.render.SurfaceImage.prototype.move=function(position){if(!position)this._logger.severe("The position was null.");var minlat=this.sector.getMinLatitude().getDegrees();var minlon=this.sector.getMinLongitude().getDegrees();var maxlat=this.sector.getMaxLatitude().getDegrees();var maxlon=this.sector.getMaxLongitude().getDegrees();var poslat=position.getLatitude().getDegrees();var poslon=position.getLongitude().getDegrees();minlat+=poslat;maxlat+=poslat;minlon+=poslon;maxlon+=poslon;if(maxlat>90||
maxlat<-90||minlat>90||minlat<-90||maxlon>180||maxlon<-180||minlon>180||minlon<-180)return;this.referencePosition.add(position);this.setSector(lanyard.geom.Sector.prototype.fromDegrees(minlat,maxlat,minlon,maxlon))};
lanyard.render.SurfaceImage.prototype.moveTo=function(position){if(!position)this._logger.severe("The new position was null.");var poslat=position.getLatitude().getDegrees();var poslon=position.getLongitude().getDegrees();var halfDeltaLat=this.sector.getDeltaLatDegrees()/2;var halfDeltaLon=this.sector.getDeltaLonDegrees()/2;var minlat=poslat-halfDeltaLat;var maxlat=poslat+halfDeltaLat;var minlon=poslon-halfDeltaLon;var maxlon=poslon+halfDeltaLon;if(maxlat>90||maxlat<-90||minlat>90||minlat<-90||maxlon>
180||maxlon<-180||minlon>180||minlon<-180)return;this.referencePosition=position;this.setSector(lanyard.geom.Sector.prototype.fromDegrees(minlat,maxlat,minlon,maxlon))};lanyard.render.SurfaceImage.prototype.getReferencePosition=function(){return this.referencePosition};lanyard.render.SurfaceImage.prototype.toString=function(){return"A SurfaceImage with a path of: "+this.imageSource};goog.provide("lanyard.layers.AbstractLayer");lanyard.layers.AbstractLayer=function(){this._logger=goog.debug.Logger.getLogger("lanyard.layers.AbstractLayer");this.enabled=true;this.opacity=1;this.minActiveAltitude=Number.MIN_VALUE;this.maxActiveAltitude=Number.MAX_VALUE;this.displayName="Untitled Layer"};goog.exportSymbol("lanyard.layers.AbstractLayer",lanyard.layers.AbstractLayer);lanyard.layers.AbstractLayer.prototype.isEnabled=function(){return this.enabled};
lanyard.layers.AbstractLayer.prototype.setEnabled=function(enabled){this.enabled=enabled};lanyard.layers.AbstractLayer.prototype.getName=function(){return this.myName()};lanyard.layers.AbstractLayer.prototype.setName=function(name){this.displayName=name};lanyard.layers.AbstractLayer.prototype.toString=function(){return this.myName()};lanyard.layers.AbstractLayer.prototype.myName=function(){return this.displayName};lanyard.layers.AbstractLayer.prototype.getOpacity=function(){return this.opacity};
lanyard.layers.AbstractLayer.prototype.setOpacity=function(opacity){this.opacity=opacity};lanyard.layers.AbstractLayer.prototype.getMinActiveAltitude=function(){return this.minActiveAltitude};lanyard.layers.AbstractLayer.prototype.setMinActiveAltitude=function(minActiveAltitude){this.minActiveAltitude=minActiveAltitude};lanyard.layers.AbstractLayer.prototype.getMaxActiveAltitude=function(){return this.maxActiveAltitude};
lanyard.layers.AbstractLayer.prototype.setMaxActiveAltitude=function(maxActiveAltitude){this.maxActiveAltitude=maxActiveAltitude};lanyard.layers.AbstractLayer.prototype.isLayerInView=function(dc){return true};lanyard.layers.AbstractLayer.prototype.isLayerActive=function(dc){var altitude=dc.getView().getAltitude();var isActive=altitude>=this.minActiveAltitude&&altitude<=this.maxActiveAltitude;return isActive};
lanyard.layers.AbstractLayer.prototype.render=function(dc){if(!this.enabled)return;if(!this.isLayerActive(dc))return;if(!this.isLayerInView(dc))return;this.doRender(dc)};goog.provide("lanyard.layers.RenderableLayer");goog.require("lanyard.layers.AbstractLayer");lanyard.layers.RenderableLayer=function(delegateOwner){lanyard.layers.AbstractLayer.call(this);this._logger=goog.debug.Logger.getLogger("lanyard.layers.RenderableLayer");this.renderables=[];this.renderablesOverride=null;this.delegateOwner=delegateOwner};goog.inherits(lanyard.layers.RenderableLayer,lanyard.layers.AbstractLayer);
lanyard.layers.RenderableLayer.prototype.addRenderable=function(renderable){if(!renderable)this._logger.severe("Renderable is null.");if(this.renderablesOverride)this._logger.severe("Layer is already using a custom iterable.");this.renderables.push(renderable)};lanyard.layers.RenderableLayer.prototype.addRenderables=function(rables){if(!rables)this._logger.severe("The new interable is null.");if(this.renderablesOverride)this._logger.severe("This layer is already using a custom iterable.");for(var r in rables)if(rables.hasOwnProperty(r))this.renderables.push(rables[r])};
lanyard.layers.RenderableLayer.prototype.removeAllRenderables=function(){if(this.renderablesOverride)this._logger.severe("This layer is using a custom iterable.");this.renderables=[]};lanyard.layers.RenderableLayer.prototype.getRenderables=function(){return this.getActiveRenderables()};lanyard.layers.RenderableLayer.prototype.getActiveRenderables=function(){if(this.renderablesOverride)return this.renderablesOverride;else return this.renderables};
lanyard.layers.RenderableLayer.prototype.setRenderables=function(renderableIterable){this.renderablesOverride=renderableIterable;this.renderables=[]};lanyard.layers.RenderableLayer.prototype.doRender=function(dc){var activeRenderables=this.getActiveRenderables();if(!activeRenderables)this._logger.fine("Active renderable array is not correct.");for(var r in activeRenderables)if(activeRenderables.hasOwnProperty(r))activeRenderables[r].render(dc)};
lanyard.layers.RenderableLayer.prototype.getDelegateOwner=function(){return this.delegateOwner};lanyard.layers.RenderableLayer.prototype.toString=function(){return"A generic renderable layer."};goog.provide("lanyard.layers.earth.BMNGOneImage");goog.require("lanyard.render.SurfaceImage");goog.require("lanyard.layers.RenderableLayer");lanyard.layers.earth.BMNGOneImage=function(){lanyard.layers.RenderableLayer.call(this,null);this._logger=goog.debug.Logger.getLogger("lanyard.layers.earth.BMNGOneImage");this.setName("The Blue Marble, single image");this.addRenderable(new lanyard.render.SurfaceImage("images/bmng.world.topo.512.256.gif",lanyard.geom.Sector.prototype.FULL_SPHERE,this))};
goog.inherits(lanyard.layers.earth.BMNGOneImage,lanyard.layers.RenderableLayer);lanyard.layers.earth.BMNGOneImage.prototype.toString=function(){return"A BMNGOneImage object."};goog.provide("lanyard.demo.BasicDemo");goog.require("goog.debug.DivConsole");goog.require("goog.debug.LogManager");goog.require("goog.debug.Logger");goog.require("goog.events.Event");goog.require("goog.ui.Checkbox");goog.require("goog.ui.Checkbox.State");goog.require("lanyard.demo.StatusBar");goog.require("lanyard.dom.InputHandler");goog.require("lanyard.layers.earth.BMNGOneImage");
lanyard.demo.BasicDemo=function(webGLCanvas,layerListDiv,eventLogDiv){this._webGLCanvas=webGLCanvas;this._layerListDiv=layerListDiv;this._eventLogDiv=eventLogDiv;this._logger=goog.debug.Logger.getLogger("lanyard.demo.BasicDemo");this.lanyardCanvas=null;this._layerList=[]};goog.exportSymbol("lanyard.demo.BasicDemo",lanyard.demo.BasicDemo);
lanyard.demo.BasicDemo.prototype.run=function(){this.setupEventLog();this.setupLayerList();var model=new lanyard.BasicModel;model.setLayers(this._layerList);this.lanyardCanvas=new lanyard.LanyardCanvas(this._webGLCanvas);this.lanyardCanvas.setModel(model);this.lanyardCanvas.setView(new lanyard.BasicOrbitView);this.lanyardCanvas.createDefaultInputHandler();var self=this;setInterval(function(){self.lanyardCanvas.display()},15)};goog.exportSymbol("lanyard.demo.BasicDemo.prototype.run",lanyard.demo.BasicDemo.prototype.run);
lanyard.demo.BasicDemo.prototype.setupEventLog=function(){goog.debug.LogManager.getRoot().setLevel(goog.debug.Logger.Level.ALL);var logconsole=new goog.debug.DivConsole(this._eventLogDiv);logconsole.setCapturing(true)};goog.exportSymbol("lanyard.demo.BasicDemo.prototype.setupEventLog",lanyard.demo.BasicDemo.prototype.setupEventLog);
lanyard.demo.BasicDemo.prototype.addStatusBar=function(statusBar){if(!this.lanyardCanvas)this._logger.severe("A LanyardCanvas must exist before a status bar is added.");if(!statusBar)this._logger.severe("Attempted to attach an invalid status bar.");statusBar.setEventSource(this.lanyardCanvas)};goog.exportSymbol("lanyard.demo.BasicDemo.prototype.addStatusBar",lanyard.demo.BasicDemo.prototype.addStatusBar);
lanyard.demo.BasicDemo.prototype.setupLayerList=function(){this._layerList.push(new lanyard.layers.earth.BMNGOneImage);var i;for(i=0;i<this._layerList.length;i=i+1){this._logger.fine("Adding layer with name = "+this._layerList[i].toString());var layerLabel=goog.dom.createDom("p",{style:"background-color:#EEE"},this._layerList[i].getName());goog.dom.appendChild(this._layerListDiv,layerLabel)}};goog.exportSymbol("lanyard.demo.BasicDemo.prototype.setupLayerList",lanyard.demo.BasicDemo.prototype.setupLayerList);goog.provide("lanyard.geom.Point");lanyard.geom.Point=function(x,y,z,w){this._x=x;this._y=y;this._z=z;if(w)this._w=w;else this._w=1};goog.exportSymbol("lanyard.geom.Point",lanyard.geom.Point);lanyard.geom.Point.prototype.ZERO=new lanyard.geom.Point(0,0,0,1);goog.exportSymbol("lanyard.geom.Point.prototype.ZERO",lanyard.geom.Point.prototype.ZERO);lanyard.geom.Point.prototype.UNIT_X=new lanyard.geom.Point(1,0,0,1);goog.exportSymbol("lanyard.geom.Point.prototype.UNIT_X",lanyard.geom.Point.prototype.UNIT_X);
lanyard.geom.Point.prototype.UNIT_Y=new lanyard.geom.Point(0,1,0,1);goog.exportSymbol("lanyard.geom.Point.prototype.UNIT_Y",lanyard.geom.Point.prototype.UNIT_Y);lanyard.geom.Point.prototype.UNIT_Z=new lanyard.geom.Point(0,0,1,1);goog.exportSymbol("lanyard.geom.Point.prototype.UNIT_Z",lanyard.geom.Point.prototype.UNIT_Z);lanyard.geom.Point.prototype.getW=function(){return this._w};goog.exportSymbol("lanyard.geom.Point.prototype.getW",lanyard.geom.Point.prototype.getW);
lanyard.geom.Point.prototype.getX=function(){return this._x};goog.exportSymbol("lanyard.geom.Point.prototype.getX",lanyard.geom.Point.prototype.getX);lanyard.geom.Point.prototype.getY=function(){return this._y};goog.exportSymbol("lanyard.geom.Point.prototype.getY",lanyard.geom.Point.prototype.getY);lanyard.geom.Point.prototype.getZ=function(){return this._z};goog.exportSymbol("lanyard.geom.Point.prototype.getZ",lanyard.geom.Point.prototype.getZ);
lanyard.geom.Point.prototype.translate=function(m){var p=new lanyard.geom.Point(m.get11()*this._x+m.get21()*this._y+m.get31()*this._z+m.get41(),m.get12()*this._x+m.get22()*this._y+m.get32()*this._z+m.get42(),m.get13()*this._x+m.get23()*this._y+m.get33()*this._z+m.get43(),1);return p};goog.exportSymbol("lanyard.geom.Point.prototype.translate",lanyard.geom.Point.prototype.translate);
lanyard.geom.Point.prototype.add=function(p){return new lanyard.geom.Point(this._x+p.getX(),this._y+p.getY(),this._z+p.getZ(),1)};goog.exportSymbol("lanyard.geom.Point.prototype.add",lanyard.geom.Point.prototype.add);lanyard.geom.Point.prototype.subtract=function(p){return new lanyard.geom.Point(this._x-p.getX(),this._y-p.getY(),this._z-p.getZ(),1)};goog.exportSymbol("lanyard.geom.Point.prototype.subtract",lanyard.geom.Point.prototype.subtract);
lanyard.geom.Point.prototype.multiply=function(s){return new lanyard.geom.Point(this._x*s,this._y*s,this._z*s,1)};goog.exportSymbol("lanyard.geom.Point.prototype.multiply",lanyard.geom.Point.prototype.multiply);lanyard.geom.Point.prototype.scale=function(sx,sy,sz){if(!this._w)return new lanyard.geom.Point(this._x*sx,this._y*sy,this._z*sz,1);else return new lanyard.geom.Point(this._x*sx,this._y*sy,this._z*sz,this._w)};goog.exportSymbol("lanyard.geom.Point.prototype.scale",lanyard.geom.Point.prototype.scale);
lanyard.geom.Point.prototype.length=function(){return Math.sqrt(this.selfDot())};goog.exportSymbol("lanyard.geom.Point.prototype.length",lanyard.geom.Point.prototype.length);lanyard.geom.Point.prototype.normalize=function(){var s=1/this.length();return this.scale(s,s,s)};goog.exportSymbol("lanyard.geom.Point.prototype.normalize",lanyard.geom.Point.prototype.normalize);lanyard.geom.Point.prototype.dot=function(p){return this._x*p.getX()+this._y*p.getY()+this._z*p.getZ()};
goog.exportSymbol("lanyard.geom.Point.prototype.dot",lanyard.geom.Point.prototype.dot);lanyard.geom.Point.prototype.selfDot=function(){return this._x*this._x+this._y*this._y+this._z*this._z};goog.exportSymbol("lanyard.geom.Point.prototype.selfDot",lanyard.geom.Point.prototype.selfDot);lanyard.geom.Point.prototype.dot4=function(p){return this._x*p.getX()+this._y*p.getY()+this._z*p.getZ()+this._w*this.getW()};goog.exportSymbol("lanyard.geom.Point.prototype.dot4",lanyard.geom.Point.prototype.dot4);
lanyard.geom.Point.prototype.distanceTo=function(p){var dx=this._x-p.getX();var dy=this._y-p.getY();var dz=this._z-p.getZ();return Math.sqrt(dx*dx+dy*dy+dz*dz)};goog.exportSymbol("lanyard.geom.Point.prototype.distanceTo",lanyard.geom.Point.prototype.distanceTo);lanyard.geom.Point.prototype.distanceToSquared=function(p){var dx=this._x-p.getX();var dy=this._y-p.getY();var dz=this._z-p.getZ();return dx*dx+dy*dy+dz*dz};goog.exportSymbol("lanyard.geom.Point.prototype.distanceToSquared",lanyard.geom.Point.prototype.distanceToSquared);
lanyard.geom.Point.prototype.midPoint=function(p1,p2){return new lanyard.geom.Point(0.5*(p1.getX()+p2.getX()),0.5*(p1.getY()+p2.getY()),0.5*(p1.getZ()+p2.getZ()),1)};goog.exportSymbol("lanyard.geom.Point.prototype.midPoint",lanyard.geom.Point.prototype.midPoint);lanyard.geom.Point.prototype.fromOriginAndDirection=function(scale,direction,origin){return new lanyard.geom.Point(scale*direction.getX()+origin.getX(),scale*direction.getY()+origin.getY(),scale*direction.getZ()+origin.getZ(),1)};
goog.exportSymbol("lanyard.geom.Point.prototype.fromOriginAndDirection",lanyard.geom.Point.prototype.fromOriginAndDirection);
lanyard.geom.Point.prototype.composeExtrema=function(points){if(points.length===0)return[lanyard.geom.Point.prototype.ZERO,lanyard.geom.Point.prototype.ZERO];var xmin=points[0].getX();var ymin=points[0].getY();var zmin=points[0].getZ();var xmax=xmin;var ymax=ymin;var zmax=zmin;for(var i=0;i<points.length;i=i+1){var x=points[i].getX();if(x>xmax)xmax=x;else if(x<xmin)xmin=x;var y=points[i].getY();if(y>ymax)ymax=y;else if(y<ymin)ymin=y;var z=points[i].getZ();if(z>zmax)zmax=z;else if(z<zmin)zmin=z}return[new lanyard.geom.Point(xmin,
ymin,zmin,1),new lanyard.geom.Point(xmax,ymax,zmax,1)]};goog.exportSymbol("lanyard.geom.Point.prototype.composeExtrema",lanyard.geom.Point.prototype.composeExtrema);lanyard.geom.Point.prototype.cross=function(that){return new lanyard.geom.Point(this._y*that.getZ()-this._z*that.getY(),this._z*that.getX()-this._x*that.getZ(),this._x*that.getY()-this._y*that.getX(),1)};goog.exportSymbol("lanyard.geom.Point.prototype.cross",lanyard.geom.Point.prototype.cross);
lanyard.geom.Point.prototype.toString=function(){return"A point with values of x="+this._x+"; y="+this._y+"; z="+this._z+"; w="+this._w+"."};goog.exportSymbol("lanyard.geom.Point.prototype.toString",lanyard.geom.Point.prototype.toString);goog.provide("lanyard.geom.Angle");lanyard.geom.Angle=function(degrees,radians){this._logger=goog.debug.Logger.getLogger("lanyard.geom.Angle");if(isNaN(degrees))this._logger.severe("Attempted to create an angle with invalid degrees.");if(isNaN(radians))this._logger.severe("Attempted to create an angle with invalid radians.");this._degrees=degrees;this._radians=radians};goog.exportSymbol("lanyard.geom.Angle",lanyard.geom.Angle);lanyard.geom.Angle.prototype.DEGREES_TO_RADIANS=Math.PI/180;
goog.exportSymbol("lanyard.geom.Angle.prototype.DEGREES_TO_RADIANS",lanyard.geom.Angle.prototype.DEGREES_TO_RADIANS);lanyard.geom.Angle.prototype.RADIANS_TO_DEGREES=180/Math.PI;goog.exportSymbol("lanyard.geom.Angle.prototype.RADIANS_TO_DEGREES",lanyard.geom.Angle.prototype.RADIANS_TO_DEGREES);lanyard.geom.Angle.prototype.PIOver2=Math.PI/2;goog.exportSymbol("lanyard.geom.Angle.prototype.PIOver2",lanyard.geom.Angle.prototype.PIOver2);
lanyard.geom.Angle.prototype.fromDegrees=function(d){return new lanyard.geom.Angle(d,lanyard.geom.Angle.prototype.DEGREES_TO_RADIANS*d)};goog.exportSymbol("lanyard.geom.Angle.prototype.fromDegrees",lanyard.geom.Angle.prototype.fromDegrees);lanyard.geom.Angle.prototype.fromRadians=function(r){return new lanyard.geom.Angle(lanyard.geom.Angle.prototype.RADIANS_TO_DEGREES*r,r)};goog.exportSymbol("lanyard.geom.Angle.prototype.fromRadians",lanyard.geom.Angle.prototype.fromRadians);
lanyard.geom.Angle.prototype.getDegrees=function(){return this._degrees};goog.exportSymbol("lanyard.geom.Angle.prototype.getDegrees",lanyard.geom.Angle.prototype.getDegrees);lanyard.geom.Angle.prototype.getRadians=function(){return this._radians};goog.exportSymbol("lanyard.geom.Angle.prototype.getRadians",lanyard.geom.Angle.prototype.getRadians);lanyard.geom.Angle.prototype.ZERO=lanyard.geom.Angle.prototype.fromDegrees(0);goog.exportSymbol("lanyard.geom.Angle.prototype.ZERO",lanyard.geom.Angle.prototype.ZERO);
lanyard.geom.Angle.prototype.POS90=lanyard.geom.Angle.prototype.fromDegrees(90);goog.exportSymbol("lanyard.geom.Angle.prototype.POS90",lanyard.geom.Angle.prototype.POS90);lanyard.geom.Angle.prototype.NEG90=lanyard.geom.Angle.prototype.fromDegrees(-90);goog.exportSymbol("lanyard.geom.Angle.prototype.NEG90",lanyard.geom.Angle.prototype.NEG90);lanyard.geom.Angle.prototype.POS180=lanyard.geom.Angle.prototype.fromDegrees(180);goog.exportSymbol("lanyard.geom.Angle.prototype.POS180",lanyard.geom.Angle.prototype.POS180);
lanyard.geom.Angle.prototype.NEG180=lanyard.geom.Angle.prototype.fromDegrees(-180);goog.exportSymbol("lanyard.geom.Angle.prototype.NEG180",lanyard.geom.Angle.prototype.NEG180);lanyard.geom.Angle.prototype.POS360=lanyard.geom.Angle.prototype.fromDegrees(360);goog.exportSymbol("lanyard.geom.Angle.prototype.POS360",lanyard.geom.Angle.prototype.POS360);
lanyard.geom.Angle.prototype.fromDegreesLatitude=function(d){d=d<-90?-90:d>90?90:d;var r=lanyard.geom.Angle.prototype.DEGREES_TO_RADIANS*d;return new lanyard.geom.Angle(d,r)};goog.exportSymbol("lanyard.geom.Angle.prototype.fromDegreesLatitude",lanyard.geom.Angle.prototype.fromDegreesLatitude);
lanyard.geom.Angle.prototype.fromRadiansLatitude=function(r){r=r<lanyard.geom.Angle.prototype.PIOver2?-lanyard.geom.Angle.prototype.PIOver2:r>lanyard.geom.Angle.prototype.PIOver2?lanyard.geom.Angle.prototype.PIOver2:r;var d=lanyard.geom.Angle.prototype.RADIANS_TO_DEGREES*r;d=d<-90?-90:d>90?90:d;return new lanyard.geom.Angle(d,r)};goog.exportSymbol("lanyard.geom.Angle.prototype.fromRadiansLatitude",lanyard.geom.Angle.prototype.fromRadiansLatitude);
lanyard.geom.Angle.prototype.fromDegreesLongitude=function(degrees){degrees=degrees<-180?-180:degrees>180?180:degrees;var radians=lanyard.geom.Angle.prototype.DEGREES_TO_RADIANS*degrees;radians=radians<-Math.PI?-Math.PI:radians>Math.PI?Math.PI:radians;return new lanyard.geom.Angle(degrees,radians)};goog.exportSymbol("lanyard.geom.Angle.prototype.fromDegreesLongitude",lanyard.geom.Angle.prototype.fromDegreesLongitude);
lanyard.geom.Angle.prototype.fromRadiansLongitude=function(radians){radians=radians<-Math.PI?-Math.PI:radians>Math.PI?Math.PI:radians;var degrees=lanyard.geom.Angle.prototype.RADIANS_TO_DEGREES*radians;degrees=degrees<-180?-180:degrees>180?180:degrees;return new lanyard.geom.Angle(degrees,radians)};goog.exportSymbol("lanyard.geom.Angle.prototype.fromRadiansLongitude",lanyard.geom.Angle.prototype.fromRadiansLongitude);
lanyard.geom.Angle.prototype.fromXY=function(x,y){var radians=Math.atan2(y,x);return new lanyard.geom.Angle(lanyard.geom.Angle.prototype.RADIANS_TO_DEGREES*radians,radians)};goog.exportSymbol("lanyard.geom.Angle.prototype.fromXY",lanyard.geom.Angle.prototype.fromXY);lanyard.geom.Angle.prototype.add=function(angle){return lanyard.geom.Angle.prototype.fromDegrees(this._degrees+angle.getDegrees())};goog.exportSymbol("lanyard.geom.Angle.prototype.add",lanyard.geom.Angle.prototype.add);
lanyard.geom.Angle.prototype.subtract=function(angle){return lanyard.geom.Angle.prototype.fromDegrees(this._degrees-angle.getDegrees())};goog.exportSymbol("lanyard.geom.Angle.prototype.subtract",lanyard.geom.Angle.prototype.subtract);lanyard.geom.Angle.prototype.multiply=function(multiplier){return lanyard.geom.Angle.prototype.fromDegrees(this._degrees*multiplier)};goog.exportSymbol("lanyard.geom.Angle.prototype.multiply",lanyard.geom.Angle.prototype.multiply);
lanyard.geom.Angle.prototype.divideByAngle=function(angle){return this._degrees/angle.getDegrees()};goog.exportSymbol("lanyard.geom.Angle.prototype.divideByAngle",lanyard.geom.Angle.prototype.divideByAngle);lanyard.geom.Angle.prototype.divideByDegrees=function(divisor){return lanyard.geom.Angle.prototype.fromDegrees(this._degrees/divisor)};goog.exportSymbol("lanyard.geom.Angle.prototype.divideByDegrees",lanyard.geom.Angle.prototype.divideByDegrees);
lanyard.geom.Angle.prototype.addRadians=function(radians){return lanyard.geom.Angle.prototype.fromRadians(this._radians+radians)};goog.exportSymbol("lanyard.geom.Angle.prototype.addRadians",lanyard.geom.Angle.prototype.addRadians);lanyard.geom.Angle.prototype.addDegrees=function(degrees){return lanyard.geom.Angle.prototype.fromDegrees(this._degrees+degrees)};goog.exportSymbol("lanyard.geom.Angle.prototype.addDegrees",lanyard.geom.Angle.prototype.addDegrees);
lanyard.geom.Angle.prototype.subtractRadians=function(radians){return lanyard.geom.Angle.prototype.fromRadians(this._radians-radians)};goog.exportSymbol("lanyard.geom.Angle.prototype.subtractRadians",lanyard.geom.Angle.prototype.subtractRadians);lanyard.geom.Angle.prototype.sin=function(){return Math.sin(this._radians)};goog.exportSymbol("lanyard.geom.Angle.prototype.sin",lanyard.geom.Angle.prototype.sin);lanyard.geom.Angle.prototype.sinHalfAngle=function(){return Math.sin(0.5*this._radians)};
goog.exportSymbol("lanyard.geom.Angle.prototype.sinHalfAngle",lanyard.geom.Angle.prototype.sinHalfAngle);lanyard.geom.Angle.prototype.asin=function(sine){return lanyard.geom.Angle.prototype.fromRadians(Math.asin(sine))};goog.exportSymbol("lanyard.geom.Angle.prototype.asin",lanyard.geom.Angle.prototype.asin);lanyard.geom.Angle.prototype.cos=function(){return Math.cos(this._radians)};goog.exportSymbol("lanyard.geom.Angle.prototype.cos",lanyard.geom.Angle.prototype.cos);
lanyard.geom.Angle.prototype.cosHalfAngle=function(){return Math.cos(0.5*this._radians)};goog.exportSymbol("lanyard.geom.Angle.prototype.cosHalfAngle",lanyard.geom.Angle.prototype.cosHalfAngle);lanyard.geom.Angle.prototype.acos=function(cosine){return lanyard.geom.Angle.prototype.fromRadians(Math.acos(cosine))};goog.exportSymbol("lanyard.geom.Angle.prototype.acos",lanyard.geom.Angle.prototype.acos);lanyard.geom.Angle.prototype.tanHalfAngle=function(){return Math.tan(0.5*this._radians)};
goog.exportSymbol("lanyard.geom.Angle.prototype.tanHalfAngle",lanyard.geom.Angle.prototype.tanHalfAngle);lanyard.geom.Angle.prototype.atan=function(tan){return lanyard.geom.Angle.prototype.fromRadians(Math.atan(tan))};goog.exportSymbol("lanyard.geom.Angle.prototype.atan",lanyard.geom.Angle.prototype.atan);lanyard.geom.Angle.prototype.midAngle=function(a1,a2){return lanyard.geom.Angle.prototype.fromDegrees(0.5*(a1.getDegrees()+a2.getDegrees()))};
goog.exportSymbol("lanyard.geom.Angle.prototype.midAngle",lanyard.geom.Angle.prototype.midAngle);lanyard.geom.Angle.prototype.average=function(a,b,c){if(c)return lanyard.geom.Angle.prototype.fromDegrees((a._degrees+b._degrees+c._degrees)/3);else return lanyard.geom.Angle.prototype.fromDegrees(0.5*(a._degrees+b._degrees))};goog.exportSymbol("lanyard.geom.Angle.prototype.average",lanyard.geom.Angle.prototype.average);
lanyard.geom.Angle.prototype.compareTo=function(angle){if(this._degrees<angle.getDegrees())return-1;if(this._degrees>angle.getDegrees())return 1;return 0};goog.exportSymbol("lanyard.geom.Angle.prototype.compareTo",lanyard.geom.Angle.prototype.compareTo);lanyard.geom.Angle.prototype.toString=function(){return"This Angle equals "+this._degrees+" ("+this._radians+" radians)."};goog.exportSymbol("lanyard.geom.Angle.prototype.toString",lanyard.geom.Angle.prototype.toString);goog.provide("lanyard.globes.RenderInfo");lanyard.globes.RenderInfo=function(density,vertices,texCoords,refCenter,resolution,tile){this.density=density;this.vertices=vertices;this.texCoords=texCoords;this.referenceCenter=refCenter;this.indices=tile.getIndices(this.density);this.resolution=resolution};goog.exportSymbol("lanyard.globes.RenderInfo",lanyard.globes.RenderInfo);goog.provide("lanyard.geom.Cylinder");lanyard.geom.Cylinder=function(bottomCenter,topCenter,cylinderRadius){this.bottomCenter=bottomCenter;this.topCenter=topCenter;this.cylinderHeight=this.bottomCenter.distanceTo(this.topCenter);this.cylinderRadius=cylinderRadius;this.axisUnitDirection=this.topCenter.subtract(this.bottomCenter).normalize()};goog.exportSymbol("lanyard.geom.Cylinder",lanyard.geom.Cylinder);
lanyard.geom.Cylinder.prototype.toString=function(){var ret=this.cylinderRadius+", "+this.bottomCenter.toString()+", "+this.topCenter.toString()+", "+this.axisUnitDirection.toString();return ret};
lanyard.geom.Cylinder.prototype.intersect=function(line){var ld=line.getDirection();var lo=line.getOrigin();var a=ld.getX()*ld.getX()+ld.getY()*ld.getY();var b=2*(lo.getX()*ld.getX()+lo.getY()*ld.getY());var c=lo.getX()*lo.getX()+lo.getY()*lo.getY()-this.cylinderRadius*this.cylinderRadius;var discriminant=lanyard.geom.Cylinder.prototype.discriminant(a,b,c);if(discriminant<0)return null;var discriminantRoot=Math.sqrt(discriminant);if(discriminant===0){var p=line.getPointAt((-b-discriminantRoot)/(2*
a));return[new lanyard.geom.Intersection(p,true)]}else{var near=line.getPointAt((-b-discriminantRoot)/(2*a));var far=line.getPointAt((-b+discriminantRoot)/(2*a));var n=false;var f=false;var nTangent=false;var fTangent=false;if(near.getZ()>=0&&near.getZ()<=this.getHeight()){n=true;nTangent=near.getZ()===0}if(far.getZ()>=0&&far.getZ()<=this.getHeight()){f=true;fTangent=far.getZ()===0}var intersections=null;if(n&&f)intersections=[new lanyard.geom.Intersection(near,nTangent),new lanyard.geom.Intersection(far,
fTangent)];else if(n)intersections=[new lanyard.geom.Intersection(near,nTangent)];else if(f)intersections=[new lanyard.geom.Intersection(far,fTangent)];return intersections}};
lanyard.geom.Cylinder.prototype.intersectsLine=function(line){var ld=line.getDirection();var lo=line.getOrigin();var a=ld.getX()*ld.getX()+ld.getY()*ld.getY();var b=2*(lo.getX()*ld.getX()+lo.getY()*ld.getY());var c=lo.getX()*lo.getX()+lo.getY()*lo.getY()-this.cylinderRadius*this.cylinderRadius;var discriminant=lanyard.geom.Cylinder.prototype.discriminant(a,b,c);return discriminant>=0};lanyard.geom.Cylinder.prototype.discriminant=function(a,b,c){return b*b-4*a*c};
lanyard.geom.Cylinder.prototype.intersectsAt=function(plane,effectiveRadius,parameter){var dq1=plane.dot(this.bottomCenter);var bq1=dq1<=-effectiveRadius;var newTop;if(parameter<1)newTop=this.bottomCenter.add(this.topCenter.subtract(this.bottomCenter).multiply(parameter));else newTop=this.topCenter;var dq2=plane.dot(newTop);var bq2=dq2<=-effectiveRadius;if(bq1&&bq2)return-1;if(bq1===bq2)return parameter;return(effectiveRadius+plane.dot(this.bottomCenter))/plane.getNormal().dot(this.bottomCenter.subtract(newTop))};
lanyard.geom.Cylinder.prototype.getEffectiveRadius=function(plane){var dot=plane.getNormal().dot(this.axisUnitDirection);var scale=1-dot*dot;if(scale<=0)return 0;else return this.cylinderRadius*Math.sqrt(scale)};lanyard.geom.Cylinder.prototype.intersectsPlane=function(plane){var effectiveRadius=this.getEffectiveRadius(plane);var intersectionPoint=this.intersectsAt(plane,effectiveRadius,1);return intersectionPoint>=0};
lanyard.geom.Cylinder.prototype.intersectsFrustum=function(frustum){var intersectionPoint;var effectiveRadius=this.getEffectiveRadius(frustum.getNear());intersectionPoint=this.intersectsAt(frustum.getNear(),effectiveRadius,1);if(intersectionPoint<0)return false;intersectionPoint=this.intersectsAt(frustum.getFar(),effectiveRadius,intersectionPoint);if(intersectionPoint<0)return false;effectiveRadius=this.getEffectiveRadius(frustum.getLeft());intersectionPoint=this.intersectsAt(frustum.getLeft(),effectiveRadius,
intersectionPoint);if(intersectionPoint<0)return false;effectiveRadius=this.getEffectiveRadius(frustum.getRight());intersectionPoint=this.intersectsAt(frustum.getRight(),effectiveRadius,intersectionPoint);if(intersectionPoint<0)return false;effectiveRadius=this.getEffectiveRadius(frustum.getTop());intersectionPoint=this.intersectsAt(frustum.getTop(),effectiveRadius,intersectionPoint);if(intersectionPoint<0)return false;effectiveRadius=this.getEffectiveRadius(frustum.getBottom());intersectionPoint=
this.intersectsAt(frustum.getBottom(),effectiveRadius,intersectionPoint);return intersectionPoint>=0};lanyard.geom.Cylinder.prototype.getCenter=function(){var b=this.bottomCenter;var t=this.topCenter;var ret=new lanyard.geom.Point(0.5*(b.getX()+t.getX()),0.5*(b.getY()+t.getY()),0.5*(b.getZ()+t.getZ()),1);return ret};lanyard.geom.Cylinder.prototype.getDiameter=function(){return 2*this.getRadius()};
lanyard.geom.Cylinder.prototype.getRadius=function(){var halfHeight=0.5*this.bottomCenter.distanceTo(this.topCenter);return Math.sqrt(halfHeight*halfHeight+this.cylinderRadius*this.cylinderRadius)};lanyard.geom.Cylinder.prototype.getHeight=function(){return this.cylinderHeight};lanyard.geom.Cylinder.prototype.render=function(dc){};goog.provide("lanyard.geom.Plane");goog.require("lanyard.geom.Point");lanyard.geom.Plane=function(a,b,c,d){this._n=new lanyard.geom.Point(a,b,c,d)};lanyard.geom.Plane.prototype.fromPoint=function(vec){if(vec.selfDot()===0)throw"geom.Plane.VectorIsZero";return new lanyard.geom.Plane(vec.getX(),vec.getY(),vec.getZ(),vec.getW())};lanyard.geom.Plane.prototype.getNormal=function(){return new lanyard.geom.Point(this._n.getX(),this._n.getY(),this._n.getZ(),1)};lanyard.geom.Plane.prototype.getDistance=function(){return this._n.getW()};
lanyard.geom.Plane.prototype.getVector=function(){return this._n};lanyard.geom.Plane.prototype.dot=function(p){return this._n.getX()*p.getX()+this._n.getY()*p.getY()+this._n.getZ()*p.getZ()+this._n.getW()*p.getW()};lanyard.geom.Plane.prototype.toString=function(){return this._n.toString()};goog.provide("lanyard.geom.Matrix");goog.require("lanyard.geom.Angle");goog.require("lanyard.geom.Point");lanyard.geom.Matrix=function(){};lanyard.geom.Matrix.prototype.setToIdentity=function(){};lanyard.geom.Matrix.prototype.rotate=function(rotation,axisX,axisY,axisZ){};lanyard.geom.Matrix.prototype.rotateX=function(rotation){};lanyard.geom.Matrix.prototype.rotateY=function(rotation){};lanyard.geom.Matrix.prototype.rotateZ=function(rotation){};
lanyard.geom.Matrix.prototype.translate=function(x,y,z){};lanyard.geom.Matrix.prototype.translatePoint=function(p){};lanyard.geom.Matrix.prototype.multiply=function(m){};lanyard.geom.Matrix.prototype.add=function(m){};lanyard.geom.Matrix.prototype.getInverse=function(){};lanyard.geom.Matrix.prototype.getTranspose=function(){};lanyard.geom.Matrix.prototype.determinant=function(){};lanyard.geom.Matrix.prototype.getEntries=function(){};lanyard.geom.Matrix.prototype.isOrthonormal=function(){};
lanyard.geom.Matrix.prototype.transform=function(p){};goog.provide("lanyard.geom.Frustum");goog.require("lanyard.geom.Matrix");lanyard.geom.Frustum=function(near,far,left,right,bottom,topp){this._near=near;this._far=far;this._left=left;this._right=right;this._bottom=bottom;this._topp=topp};goog.exportSymbol("lanyard.geom.Frustum",lanyard.geom.Frustum);
lanyard.geom.Frustum.prototype.createDefault=function(){var near=new lanyard.geom.Plane(0,0,1,1);var far=new lanyard.geom.Plane(0,0,0-1,1);var left=new lanyard.geom.Plane(1,0,0,1);var right=new lanyard.geom.Plane(0-1,0,0,1);var bottom=new lanyard.geom.Plane(0,1,0,1);var topp=new lanyard.geom.Plane(0,0-1,0,1);return new lanyard.geom.Frustum(near,far,left,right,bottom,topp)};lanyard.geom.Frustum.prototype.getNear=function(){return this._near};lanyard.geom.Frustum.prototype.getFar=function(){return this._far};
lanyard.geom.Frustum.prototype.getLeft=function(){return this._left};lanyard.geom.Frustum.prototype.getRight=function(){return this._right};lanyard.geom.Frustum.prototype.getBottom=function(){return this._bottom};lanyard.geom.Frustum.prototype.getTop=function(){return this._topp};
lanyard.geom.Frustum.prototype.getInverseTransformed=function(m){var it=m.getTranspose();var n=lanyard.geom.Plane.prototype.fromPoint(it.transform(this._near.getVector()));var f=lanyard.geom.Plane.prototype.fromPoint(it.transform(this._far.getVector()));var l=lanyard.geom.Plane.prototype.fromPoint(it.transform(this._left.getVector()));var r=lanyard.geom.Plane.prototype.fromPoint(it.transform(this._right.getVector()));var b=lanyard.geom.Plane.prototype.fromPoint(it.transform(this._bottom.getVector()));
var t=lanyard.geom.Plane.prototype.fromPoint(it.transform(this._topp.getVector()));return new lanyard.geom.Frustum(n,f,l,r,b,t)};lanyard.geom.Frustum.prototype.intersects=function(extent){var c=extent.getCenter();var nr=-extent.getRadius();if(this._far.dot(c)<=nr)return false;if(this._left.dot(c)<=nr)return false;if(this._right.dot(c)<=nr)return false;if(this._topp.dot(c)<=nr)return false;if(this._bottom.dot(c)<=nr)return false;if(this._near.dot(c)<=nr)return false;return true};
lanyard.geom.Frustum.prototype.contains=function(point){if(this._far.dot(point)<0)return false;if(this._left.dot(point)<0)return false;if(this._right.dot(point)<0)return false;if(this._topp.dot(point)<0)return false;if(this._bottom.dot(point)<0)return false;if(this._near.dot(point)<0)return false;return true};
lanyard.geom.Frustum.prototype.toString=function(){return"near: "+this._near.toString()+"... far: "+this._far.toString()+"... left: "+this._left.toString()+"... right: "+this._right.toString()+"... bottom: "+this._bottom.toString()+"... top: "+this._topp.toString()};goog.provide("lanyard.geom.Line");goog.require("lanyard.geom.Point");lanyard.geom.Line=function(origin,direction){this._origin=origin;this._direction=direction};goog.exportSymbol("lanyard.geom.Line",lanyard.geom.Line);lanyard.geom.Line.prototype.getDirection=function(){return this._direction};lanyard.geom.Line.prototype.getOrigin=function(){return this._origin};lanyard.geom.Line.prototype.getPointAt=function(t){return lanyard.geom.Point.prototype.fromOriginAndDirection(t,this._direction,this._origin)};
lanyard.geom.Line.prototype.selfDot=function(){return this._origin.dot(this._direction)};lanyard.geom.Line.prototype.distanceTo=function(p){var origin=this.getOrigin();var sideB=origin.subtract(p);var distanceToOrigin=sideB.dot(this.getDirection());var divisor=distanceToOrigin/this.getDirection().selfDot();var sideA=this.getDirection().multiply(divisor);var aSquared=sideA.selfDot();var bSquared=sideB.selfDot();return Math.sqrt(bSquared-aSquared)};
lanyard.geom.Line.prototype.toString=function(){return"Origin: "+this._origin.toString()+", Direction: "+this._direction.toString()};goog.provide("lanyard.geom.Intersection");goog.require("lanyard.geom.Point");lanyard.geom.Intersection=function(intersectionPoint,isTangent){this._intersectionPoint=intersectionPoint;this._isTangent=isTangent};goog.exportSymbol("lanyard.geom.Intersection",lanyard.geom.Intersection);lanyard.geom.Intersection.prototype.getIntersectionPoint=function(){return this._intersectionPoint};lanyard.geom.Intersection.prototype.isTangent=function(){return this._isTangent};
lanyard.geom.Intersection.prototype.toString=function(){var pt="Intersection Point: "+this._intersectionPoint.toString();var tang=this._isTangent?" is a tangent.":" not a tangent";return pt+tang};goog.provide("lanyard.geom.Extent");goog.require("lanyard.geom.Point");goog.require("lanyard.geom.Plane");goog.require("lanyard.geom.Frustum");goog.require("lanyard.geom.Line");goog.require("lanyard.geom.Intersection");lanyard.geom.Extent=function(){};lanyard.geom.Extent.prototype.render=function(dc){};lanyard.geom.Extent.prototype.getCenter=function(){};lanyard.geom.Extent.prototype.getDiameter=function(){};lanyard.geom.Extent.prototype.getRadius=function(){};
lanyard.geom.Extent.prototype.intersectsFrustum=function(frustum){};lanyard.geom.Extent.prototype.intersect=function(line){};lanyard.geom.Extent.prototype.intersectsLine=function(line){};lanyard.geom.Extent.prototype.intersectsPlane=function(plane){};goog.provide("lanyard.geom.Position");goog.require("lanyard.geom.Angle");lanyard.geom.Position=function(latitude,longitude,elevation){this._latitude=latitude;this._longitude=longitude;this._elevation=elevation};lanyard.geom.Position.prototype.ZERO=new lanyard.geom.Position(lanyard.geom.Angle.prototype.ZERO,lanyard.geom.Angle.prototype.ZERO,0);
lanyard.geom.Position.prototype.fromRadians=function(latitude,longitude,elevation){return new lanyard.geom.Position(lanyard.geom.Angle.prototype.fromRadians(latitude),lanyard.geom.Angle.prototype.fromRadians(longitude),elevation)};lanyard.geom.Position.prototype.fromDegrees=function(latitude,longitude,elevation){return new lanyard.geom.Position(lanyard.geom.Angle.prototype.fromDegrees(latitude),lanyard.geom.Angle.prototype.fromDegrees(longitude),elevation)};
lanyard.geom.Position.prototype.getLatitude=function(){return this._latitude};lanyard.geom.Position.prototype.getLongitude=function(){return this._longitude};lanyard.geom.Position.prototype.getElevation=function(){return this._elevation};lanyard.geom.Position.prototype.toString=function(){var ret="A position with a longitude of "+this._longitude+", a latitude of "+this._latitude+" and an elevation of "+this._elevation;return ret};goog.provide("lanyard.Globe");goog.require("lanyard.geom.Angle");goog.require("lanyard.geom.Point");goog.require("lanyard.geom.Extent");goog.require("lanyard.geom.Line");goog.require("lanyard.geom.Position");lanyard.Globe=function(){};lanyard.Globe.prototype.computePointFromPositionAngles=function(latitude,longitude,metersElevation){};lanyard.Globe.prototype.computePointFromPosition=function(position){};lanyard.Globe.prototype.computeSurfaceNormalAtPoint=function(p){};
lanyard.Globe.prototype.getElevationModel=function(){};lanyard.Globe.prototype.getExtent=function(){};lanyard.Globe.prototype.getEquatorialRadius=function(){};lanyard.Globe.prototype.getPolarRadius=function(){};lanyard.Globe.prototype.getMaximumRadius=function(){};lanyard.Globe.prototype.getRadiusAt=function(latitude,longitude){};lanyard.Globe.prototype.getElevation=function(latitude,longitude){};lanyard.Globe.prototype.getMaxElevation=function(){};lanyard.Globe.prototype.getMinElevation=function(){};
lanyard.Globe.prototype.getIntersectionPosition=function(line){};lanyard.Globe.prototype.getEccentricitySquared=function(){};lanyard.Globe.prototype.computePositionFromPoint=function(point){};lanyard.Globe.prototype.getRadius=function(){};lanyard.Globe.prototype.tessellate=function(dc){};goog.provide("lanyard.Renderable");lanyard.Renderable=function(){};lanyard.Renderable.prototype.render=function(dc){};goog.provide("lanyard.DrawContext");lanyard.DrawContext=function(canvas){};lanyard.DrawContext.prototype.getWebGLCanvas=function(){};lanyard.DrawContext.prototype.setWebGLCanvas=function(canvas){};lanyard.DrawContext.prototype.getGL=function(){};lanyard.DrawContext.prototype.getDrawableWidth=function(){};lanyard.DrawContext.prototype.getDrawableHeight=function(){};lanyard.DrawContext.prototype.initialize=function(){};lanyard.DrawContext.prototype.setView=function(view){};
lanyard.DrawContext.prototype.getView=function(){};lanyard.DrawContext.prototype.setModel=function(model){};lanyard.DrawContext.prototype.getModel=function(){};lanyard.DrawContext.prototype.getGlobe=function(){};lanyard.DrawContext.prototype.getLayers=function(){};lanyard.DrawContext.prototype.getVisibleSector=function(){};lanyard.DrawContext.prototype.setVisibleSector=function(s){};lanyard.DrawContext.prototype.setVerticalExaggeration=function(verticalExaggeration){};
lanyard.DrawContext.prototype.getVerticalExaggeration=function(){};lanyard.DrawContext.prototype.getSurfaceGeometry=function(){};lanyard.DrawContext.prototype.getUniquePickColor=function(){};goog.provide("lanyard.geom.Sphere");goog.require("lanyard.Renderable");goog.require("lanyard.DrawContext");goog.require("lanyard.geom.Extent");goog.require("lanyard.geom.Point");goog.require("lanyard.geom.Intersection");goog.require("lanyard.geom.Line");goog.require("lanyard.geom.Plane");lanyard.geom.Sphere=function(center,radius){this._center=center;this._radius=radius};goog.exportSymbol("lanyard.geom.Sphere",lanyard.geom.Sphere);
lanyard.geom.Sphere.prototype.UNIT_SPHERE=new lanyard.geom.Sphere(lanyard.geom.Point.prototype.ZERO,1);goog.exportSymbol("lanyard.geom.Sphere.prototype.UNIT_SPHERE",lanyard.geom.Sphere.prototype.UNIT_SPHERE);lanyard.geom.Sphere.prototype.createBoundingSphere=function(points){var extrema=lanyard.geom.Point.prototype.composeExtrema(points);var center=lanyard.geom.Point.prototype.midPoint(extrema[0],extrema[1]);var radius=0.5*extrema[0].distanceTo(extrema[1]);return new lanyard.geom.Sphere(center,radius)};
lanyard.geom.Sphere.prototype.getRadius=function(){return this._radius};lanyard.geom.Sphere.prototype.getDiameter=function(){return 2*this._radius};lanyard.geom.Sphere.prototype.getCenter=function(){return this._center};lanyard.geom.Sphere.prototype.discriminant=function(a,b,c){return b*b-4*a*c};
lanyard.geom.Sphere.prototype.intersect=function(line){var a=line.getDirection().selfDot();var b=2*line.selfDot();var c=line.getOrigin().selfDot()-this._radius*this._radius;var discriminant=lanyard.geom.Sphere.prototype.discriminant(a,b,c);if(discriminant<0)return null;var discriminantRoot=Math.sqrt(discriminant);if(discriminant===0){var p=line.getPointAt((-b-discriminantRoot)/(2*a));return[new lanyard.geom.Intersection(p,true)]}else{var near=line.getPointAt((-b-discriminantRoot)/(2*a));var far=line.getPointAt((-b+
discriminantRoot)/(2*a));return[new lanyard.geom.Intersection(near,false),new lanyard.geom.Intersection(far,false)]}};lanyard.geom.Sphere.prototype.intersectsFrustum=function(frustum){return frustum.intersects(this)};lanyard.geom.Sphere.prototype.intersectsLine=function(line){return line.distanceTo(this._center)<=this._radius};lanyard.geom.Sphere.prototype.intersectsPlane=function(plane){var dq1=plane.dot(this._center);return dq1<=this._radius};
lanyard.geom.Sphere.prototype.render=function(dc){var gl=dc.getGL()};lanyard.geom.Sphere.prototype.toString=function(){var stringValue="Sphere: center = "+this._center.toString()+" radius = "+this._radius;return stringValue};goog.provide("lanyard.geom.Quaternion");goog.require("lanyard.geom.Point");goog.require("lanyard.geom.Angle");lanyard.geom.Quaternion=function(x,y,z,w){this._x=x;this._y=y;this._z=z;this._w=w;this._epsilon=1.0E-4};lanyard.geom.Quaternion.prototype.toString=function(){return"("+this._x+", "+this._y+", "+this._z+", "+this._w+")"};
lanyard.geom.Quaternion.prototype.fromEuler=function(yaw,pitch,roll){var cy=Math.cos(yaw*0.5);var cp=Math.cos(pitch*0.5);var cr=Math.cos(roll*0.5);var sy=Math.sin(yaw*0.5);var sp=Math.sin(pitch*0.5);var sr=Math.sin(roll*0.5);var qw=cy*cp*cr+sy*sp*sr;var qx=sy*cp*cr-cy*sp*sr;var qy=cy*sp*cr+sy*cp*sr;var qz=cy*cp*sr-sy*sp*cr;return new lanyard.geom.Quaternion(qx,qy,qz,qw)};
lanyard.geom.Quaternion.prototype.toEuler=function(q){var q0=q._w;var q1=q._x;var q2=q._y;var q3=q._z;var x=Math.atan2(2*(q2*q3+q0*q1),q0*q0-q1*q1-q2*q2+q3*q3);var y=Math.asin(-2*(q1*q3-q0*q2));var z=Math.atan2(2*(q1*q2+q0*q3),q0*q0+q1*q1-q2*q2-q3*q3);return new lanyard.geom.Point(x,y,z,1)};
lanyard.geom.Quaternion.prototype.fromAxisAngle=function(angle,x,y,z){var length=Math.sqrt(x*x+y*y+z*z);if(length>0&&length!==1){x=x/length;y=y/length;z=z/length}var sinAngle=angle.sinHalfAngle();var cosAngle=angle.cosHalfAngle();return new lanyard.geom.Quaternion(x*sinAngle,y*sinAngle,z*sinAngle,cosAngle)};
lanyard.geom.Quaternion.prototype.toAxisAngle=function(q){var x,y,z;q=q.normalize();var s=Math.sqrt(q._x*q._x+q._y*q._y+q._x*q._z);if(s>0){x=q._x/s;y=q._y/s;z=q._z/s}else{x=q._x;y=q._y;z=q._z}var angle=2*Math.acos(q._w);return new lanyard.geom.Point(x,y,z,angle)};lanyard.geom.Quaternion.prototype.add=function(a,b){return new lanyard.geom.Quaternion(a._x+b._x,a._y+b._y,a._z+b._z,a._w+b._w)};
lanyard.geom.Quaternion.prototype.subtract=function(a,b){return new lanyard.geom.Quaternion(a._x-b._x,a._y-b._y,a._z-b._z,a._w-b._w)};lanyard.geom.Quaternion.prototype.multiplyQuaternionByQuaternion=function(a,b){var result=new lanyard.geom.Quaternion(a._w*b._x+a._x*b._w+a._y*b._z-a._z*b._y,a._w*b._y+a._y*b._w+a._z*b._x-a._x*b._z,a._w*b._z+a._z*b._w+a._x*b._y-a._y*b._x,a._w*b._w-a._x*b._x-a._y*b._y-a._z*b._z);return result};
lanyard.geom.Quaternion.prototype.multiplyScalarByQuaternion=function(s,q){return new lanyard.geom.Quaternion(s*q._x,s*q._y,s*q._z,s*q._w)};lanyard.geom.Quaternion.prototype.multiplyQuaternionByScalar=function(q,s){return new lanyard.geom.Quaternion(s*q._x,s*q._y,s*q._z,s*q._w)};
lanyard.geom.Quaternion.prototype.multiply=function(v,q){var result=new lanyard.geom.Quaternion(v.getX()*q._w+v.getY()*q._z-v.getZ()*q._y,v.getY()*q._w+v.getZ()*q._x-v.getX()*q._z,v.getZ()*q._w+v.getX()*q._y-v.getY()*q._x,-v.getX()*q._x-v.getY()*q._y-v.getZ()*q._z);return result};lanyard.geom.Quaternion.prototype.divideByScalar=function(q,s){return lanyard.geom.Quaternion.prototype.multiplyQuaternionByScalar(q,1/s)};
lanyard.geom.Quaternion.prototype.conjugate=function(){return new lanyard.geom.Quaternion(-this._x,-this._y,-this._z,this._w)};lanyard.geom.Quaternion.prototype.norm2=function(q){return q._x*q._x+q._y*q._y+q._z*q._z+q._w*q._w};lanyard.geom.Quaternion.prototype.abs=function(q){return Math.sqrt(lanyard.geom.Quaternion.prototype.norm2(q))};
lanyard.geom.Quaternion.prototype.divideByQuaternion=function(a,b){var result=lanyard.geom.Quaternion.prototype.multiplyQuaternionByQuaternion(a,lanyard.geom.Quaternion.prototype.divideByScalar(b.conjugate(),lanyard.geom.Quaternion.prototype.abs(b)));return result};lanyard.geom.Quaternion.prototype.dot=function(a,b){return a._x*b._x+a._y*b._y+a._z*b._z+a._w*b._w};
lanyard.geom.Quaternion.prototype.normalize=function(){var len=this.length();return new lanyard.geom.Quaternion(this._x/len,this._y/len,this._z/len,this._w/len)};lanyard.geom.Quaternion.prototype.length=function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)};
lanyard.geom.Quaternion.prototype.slerp=function(q0,q1,t){var cosom=q0._x*q1._x+q0._y*q1._y+q0._z*q1._z+q0._w*q1._w;var tmp0,tmp1,tmp2,tmp3;if(cosom<0){cosom=-cosom;tmp0=-q1._x;tmp1=-q1._y;tmp2=-q1._z;tmp3=-q1._w}else{tmp0=q1._x;tmp1=q1._y;tmp2=q1._z;tmp3=q1._w}var scale0,scale1;if(1-cosom>this._epsilon){var omega=Math.acos(cosom);var sinom=Math.sin(omega);scale0=Math.sin((1-t)*omega)/sinom;scale1=Math.sin(t*omega)/sinom}else{scale0=1-t;scale1=t}return new lanyard.geom.Quaternion(scale0*q0._x+scale1*
tmp0,scale0*q0._y+scale1*tmp1,scale0*q0._z+scale1*tmp2,scale0*q0._w+scale1*tmp3)};lanyard.geom.Quaternion.prototype.ln=function(q){var t;var s=Math.sqrt(q._x*q._x+q._y*q._y+q._z*q._z);var om=Math.atan2(s,q._w);if(Math.abs(s)<this._epsilon)t=0;else t=om/s;return new lanyard.geom.Quaternion(q._x*t,q._y*t,q._z*t,0)};
lanyard.geom.Quaternion.prototype.exp=function(q){var sinom;var om=Math.sqrt(q._x*q._x+q._y*q._y+q._z*q._z);if(Math.abs(om)<this._epsilon)sinom=1;else sinom=Math.sin(om)/om;return new lanyard.geom.Quaternion(q._x*sinom,q._y*sinom,q._z*sinom,Math.cos(om))};goog.provide("lanyard.geom.LatLon");goog.require("lanyard.geom.Angle");goog.require("lanyard.geom.Quaternion");lanyard.geom.LatLon=function(latitude,longitude){this._logger=goog.debug.Logger.getLogger("lanyard.geom.LatLon");if(!latitude)this._logger.severe("Attempted to create a LatLon with invalid latitude.");if(!longitude)this._logger.severe("Attempted to create a LatLon with invalid longitude.");this._latitude=latitude;this._longitude=longitude};goog.exportSymbol("lanyard.geom.LatLon",lanyard.geom.LatLon);
lanyard.geom.LatLon.prototype.fromRadians=function(latitude,longitude){return new lanyard.geom.LatLon(lanyard.geom.Angle.prototype.fromRadians(latitude),lanyard.geom.Angle.prototype.fromRadians(longitude))};lanyard.geom.LatLon.prototype.fromDegrees=function(latitude,longitude){return new lanyard.geom.LatLon(lanyard.geom.Angle.prototype.fromDegrees(latitude),lanyard.geom.Angle.prototype.fromDegrees(longitude))};lanyard.geom.LatLon.prototype.getLatitude=function(){return this._latitude};
lanyard.geom.LatLon.prototype.getLongitude=function(){return this._longitude};
lanyard.geom.LatLon.prototype.interpolate=function(t,begin,end){if(t<0)return begin;else if(t>1)return end;var beginQuat=lanyard.geom.Quaternion.prototype.fromEuler(begin.getLongitude().getRadians(),begin.getLatitude().getRadians(),0);var endQuat=lanyard.geom.Quaternion.prototype.fromEuler(end.getLongitude().getRadians(),end.getLatitude().getRadians(),0);var q=lanyard.geom.Quaternion.prototype.slerp(beginQuat,endQuat,t);var v=lanyard.geom.Quaternion.prototype.toEuler(q);if(isNaN(v.getX())||isNaN(v.getY()))return null;
return lanyard.geom.LatLon.prototype.fromRadians(v.getY(),v.getX())};lanyard.geom.LatLon.prototype.toString=function(){return"("+this._latitude.toString()+", "+this._longitude.toString()+")"};goog.provide("lanyard.geom.Sector");goog.require("lanyard.geom.Angle");goog.require("lanyard.geom.Cylinder");goog.require("lanyard.Globe");goog.require("lanyard.geom.Sphere");goog.require("lanyard.geom.LatLon");
lanyard.geom.Sector=function(minLatitude,maxLatitude,minLongitude,maxLongitude){this._minLatitude=minLatitude;this._maxLatitude=maxLatitude;this._minLongitude=minLongitude;this._maxLongitude=maxLongitude;this._deltaLat=lanyard.geom.Angle.prototype.fromDegrees(this._maxLatitude.getDegrees()-this._minLatitude.getDegrees());this._deltaLon=lanyard.geom.Angle.prototype.fromDegrees(this._maxLongitude.getDegrees()-this._minLongitude.getDegrees())};goog.exportSymbol("lanyard.geom.Sector",lanyard.geom.Sector);
lanyard.geom.Sector.prototype.FULL_SPHERE=new lanyard.geom.Sector(lanyard.geom.Angle.prototype.NEG90,lanyard.geom.Angle.prototype.POS90,lanyard.geom.Angle.prototype.NEG180,lanyard.geom.Angle.prototype.POS180);lanyard.geom.Sector.prototype.EMPTY_SECTOR=new lanyard.geom.Sector(lanyard.geom.Angle.prototype.ZERO,lanyard.geom.Angle.prototype.ZERO,lanyard.geom.Angle.prototype.ZERO,lanyard.geom.Angle.prototype.ZERO);
lanyard.geom.Sector.prototype.fromDegrees=function(minLatitude,maxLatitude,minLongitude,maxLongitude){var ret=new lanyard.geom.Sector(lanyard.geom.Angle.prototype.fromDegrees(minLatitude),lanyard.geom.Angle.prototype.fromDegrees(maxLatitude),lanyard.geom.Angle.prototype.fromDegrees(minLongitude),lanyard.geom.Angle.prototype.fromDegrees(maxLongitude));return ret};
lanyard.geom.Sector.prototype.fromRadians=function(minLatitude,maxLatitude,minLongitude,maxLongitude){var ret=new lanyard.geom.Sector(lanyard.geom.Angle.prototype.fromRadians(minLatitude),lanyard.geom.Angle.prototype.fromRadians(maxLatitude),lanyard.geom.Angle.prototype.fromRadians(minLongitude),lanyard.geom.Angle.prototype.fromRadians(maxLongitude));return ret};
lanyard.geom.Sector.prototype.boundingSector=function(positions){var minLat=lanyard.geom.Angle.prototype.POS90.getDegrees();var minLon=lanyard.geom.Angle.prototype.POS180.getDegrees();var maxLat=lanyard.geom.Angle.prototype.NEG180.getDegrees();var maxLon=lanyard.geom.Angle.prototype.NEG180.getDegrees();var i;for(i=0;i<positions.length;i=i+1){var lat=positions[i].getLatitude().getDegrees();if(lat<minLat)minLat=lat;if(lat>maxLat)maxLat=lat;var lon=positions[i].getLongitude().getDegrees();if(lon<minLon)minLon=
lon;if(lon>maxLon)maxLon=lon}if(minLat===maxLat&&minLon===maxLon)return lanyard.geom.Sector.prototype.EMPTY_SECTOR;return lanyard.geom.Sector.prototype.fromDegrees(minLat,maxLat,minLon,maxLon)};lanyard.geom.Sector.prototype.getMinLatitude=function(){return this._minLatitude};lanyard.geom.Sector.prototype.getMinLongitude=function(){return this._minLongitude};lanyard.geom.Sector.prototype.getMaxLatitude=function(){return this._maxLatitude};lanyard.geom.Sector.prototype.getMaxLongitude=function(){return this._maxLongitude};
lanyard.geom.Sector.prototype.getDeltaLat=function(){return this._deltaLat};lanyard.geom.Sector.prototype.getDeltaLatDegrees=function(){return this._deltaLat.getDegrees()};lanyard.geom.Sector.prototype.getDeltaLatRadians=function(){return this._deltaLat.getRadians()};lanyard.geom.Sector.prototype.getDeltaLon=function(){return this._deltaLon};lanyard.geom.Sector.prototype.getDeltaLonDegrees=function(){return this._deltaLon.getDegrees()};lanyard.geom.Sector.prototype.getDeltaLonRadians=function(){return this._deltaLon.getRadians()};
lanyard.geom.Sector.prototype.getCentroid=function(){var la=lanyard.geom.Angle.prototype.fromDegrees(0.5*(this.getMaxLatitude().getDegrees()+this.getMinLatitude().getDegrees()));var lo=lanyard.geom.Angle.prototype.fromDegrees(0.5*(this.getMaxLongitude().getDegrees()+this.getMinLongitude().getDegrees()));return new lanyard.geom.LatLon(la,lo)};
lanyard.geom.Sector.prototype.computeCenterPoint=function(globe){var lat=0.5*(this._minLatitude.getDegrees()+this._maxLatitude.getDegrees());var lon=0.5*(this._minLongitude.getDegrees()+this._maxLongitude.getDegrees());var cLat=lanyard.geom.Angle.prototype.fromDegrees(lat);var cLon=lanyard.geom.Angle.prototype.fromDegrees(lon);return globe.computePointFromPositionAngles(cLat,cLon,globe.getElevation(cLat,cLon))};
lanyard.geom.Sector.prototype.computeCornerPoints=function(globe){var corners=[];var minLat=this._minLatitude;var maxLat=this._maxLatitude;var minLon=this._minLongitude;var maxLon=this._maxLongitude;corners[0]=globe.computePointFromPositionAngles(minLat,minLon,globe.getElevation(minLat,minLon));corners[1]=globe.computePointFromPositionAngles(minLat,maxLon,globe.getElevation(minLat,maxLon));corners[2]=globe.computePointFromPositionAngles(maxLat,maxLon,globe.getElevation(maxLat,maxLon));corners[3]=
globe.computePointFromPositionAngles(maxLat,minLon,globe.getElevation(maxLat,minLon));return corners};
lanyard.geom.Sector.prototype.computeBoundingSphere=function(globe,verticalExaggeration,sector){var center=sector.getCentroid();var maxHeight=globe.getMaxElevation()*verticalExaggeration;var minHeight=0;var points=[];points[0]=globe.computePointFromPositionAngles(center.getLatitude(),center.getLongitude(),maxHeight);points[1]=globe.computePointFromPositionAngles(sector.getMaxLatitude(),sector.getMinLongitude(),maxHeight);points[2]=globe.computePointFromPositionAngles(sector.getMinLatitude(),sector.getMaxLongitude(),
maxHeight);points[3]=globe.computePointFromPositionAngles(sector.getMinLatitude(),sector.getMinLongitude(),maxHeight);points[4]=globe.computePointFromPositionAngles(sector.getMaxLatitude(),sector.getMaxLongitude(),maxHeight);points[5]=globe.computePointFromPositionAngles(sector.getMaxLatitude(),sector.getMinLongitude(),minHeight);points[6]=globe.computePointFromPositionAngles(sector.getMinLatitude(),sector.getMaxLongitude(),minHeight);points[7]=globe.computePointFromPositionAngles(sector.getMinLatitude(),
sector.getMinLongitude(),minHeight);points[8]=globe.computePointFromPositionAngles(sector.getMaxLatitude(),sector.getMaxLongitude(),minHeight);return lanyard.geom.Sphere.prototype.createBoundingSphere(points)};
lanyard.geom.Sector.prototype.computeBoundingCylinder=function(globe,verticalExaggeration,sector){var center=sector.getCentroid();var maxHeight=globe.getMaxElevation()*verticalExaggeration;var minHeight=0;var centroidTop=globe.computePointFromPositionAngles(center.getLatitude(),center.getLongitude(),maxHeight);var lowPoint=globe.computePointFromPositionAngles(sector.getMinLatitude(),sector.getMinLongitude(),minHeight);var axis=centroidTop.normalize();var lowDistance=axis.dot(lowPoint);var centroidBot=
axis.scale(lowDistance,lowDistance,lowDistance);var northwest=globe.computePointFromPositionAngles(sector.getMaxLatitude(),sector.getMinLongitude(),maxHeight);var southeast=globe.computePointFromPositionAngles(sector.getMinLatitude(),sector.getMaxLongitude(),maxHeight);var southwest=globe.computePointFromPositionAngles(sector.getMinLatitude(),sector.getMinLongitude(),maxHeight);var northeast=globe.computePointFromPositionAngles(sector.getMaxLatitude(),sector.getMaxLongitude(),maxHeight);var a=southwest.distanceTo(southeast);
var b=southeast.distanceTo(northeast);var c=northeast.distanceTo(northwest);var d=northwest.distanceTo(southwest);var s=0.5*(a+b+c+d);var area=Math.sqrt((s-a)*(s-b)*(s-c)*(s-d));var radius=Math.sqrt((a*b+c*d)*(a*d+b*c)*(a*c+b*d))/(4*area);return new lanyard.geom.Cylinder(centroidBot,centroidTop,radius)};
lanyard.geom.Sector.prototype.contains=function(latitude,longitude){var ret=latitude.getDegrees()>=this._minLatitude.getDegrees()&&latitude.getDegrees()<=this._maxLatitude.getDegrees()&&longitude.getDegrees()>=this._minLongitude.getDegrees()&&longitude.getDegrees()<=this._maxLongitude.getDegrees();return ret};lanyard.geom.Sector.prototype.containsLatLon=function(latLon){return this.contains(latLon.getLatitude(),latLon.getLongitude())};
lanyard.geom.Sector.prototype.containsRadians=function(radiansLatitude,radiansLongitude){var ret=radiansLatitude>=this._minLatitude.getRadians()&&radiansLatitude<=this._maxLatitude.getRadians()&&radiansLongitude>=this._minLongitude.getRadians()&&radiansLongitude<=this._maxLongitude.getRadians();return ret};
lanyard.geom.Sector.prototype.containsDegrees=function(degreesLatitude,degreesLongitude){var ret=degreesLatitude>=this._minLatitude.getDegrees()&&degreesLatitude<=this._maxLatitude.getDegrees()&&degreesLongitude>=this._minLongitude.getDegrees()&&degreesLongitude<=this._maxLongitude.getDegrees();return ret};
lanyard.geom.Sector.prototype.intersects=function(that){if(!that)return false;if(that._maxLongitude.getDegrees()<this._minLongitude.getDegrees())return false;if(that._minLongitude.getDegrees()>this._maxLongitude.getDegrees())return false;if(that._maxLatitude.getDegrees()<this._minLatitude.getDegrees())return false;if(that._minLatitude.getDegrees()>this._maxLatitude.getDegrees())return false;return true};
lanyard.geom.Sector.prototype.unionWithSector=function(that){if(!that)return this;var minLat=this._minLatitude;var maxLat=this._maxLatitude;var minLon=this._minLongitude;var maxLon=this._maxLongitude;if(that.getMinLatitude().getDegrees()<this._minLatitude.getDegrees())minLat=that.getMinLatitude();if(that.getMaxLatitude().getDegrees()>this._maxLatitude.getDegrees())maxLat=that.getMaxLatitude();if(that.getMinLongitude().getDegrees()<this._minLongitude.getDegrees())minLon=that.getMinLongitude();if(that.getMaxLongitude().getDegrees()>
this._maxLongitude.getDegrees())maxLon=that.getMaxLongitude();return new lanyard.geom.Sector(minLat,maxLat,minLon,maxLon)};
lanyard.geom.Sector.prototype.unionWithCoordinate=function(latitude,longitude){if(!latitude||!longitude)return this;var minLat=this._minLatitude;var maxLat=this._maxLatitude;var minLon=this._minLongitude;var maxLon=this._maxLongitude;if(latitude.getDegrees()<this._minLatitude.getDegrees())minLat=latitude;if(latitude.getDegrees()>this._maxLatitude.getDegrees())maxLat=latitude;if(longitude.getDegrees()<this._minLongitude.getDegrees())minLon=longitude;if(longitude.getDegrees()>this._maxLongitude.getDegrees())maxLon=
longitude;return new lanyard.geom.Sector(minLat,maxLat,minLon,maxLon)};
lanyard.geom.Sector.prototype.intersectionWithSector=function(that){if(!that)return this;var minLat;var maxLat;minLat=this._minLatitude.getDegrees()>that.getMinLatitude().getDegrees()?this._minLatitude:that.getMinLatitude();maxLat=this._maxLatitude.getDegrees()<that.getMaxLatitude().getDegrees()?this._maxLatitude:that.getMaxLatitude();if(minLat.getDegrees()>maxLat.getDegrees())return null;var minLon;var maxLon;minLon=this._minLongitude.getDegrees()>that.getMinLongitude().getDegrees()?this._minLongitude:
that.getMinLongitude();maxLon=this._maxLongitude.getDegrees()<that.getMaxLongitude().getDegrees()?this._maxLongitude:that.getMaxLongitude();if(minLon.getDegrees()>maxLon.getDegrees())return null;return new lanyard.geom.Sector(minLat,maxLat,minLon,maxLon)};lanyard.geom.Sector.prototype.intersectionWithCoordinate=function(latitude,longitude){if(!latitude||!longitude)return this;if(!this.contains(latitude,longitude))return null;return new lanyard.geom.Sector(latitude,latitude,longitude,longitude)};
lanyard.geom.Sector.prototype.subdivide=function(){var midLat=lanyard.geom.Angle.prototype.average(this._minLatitude,this._maxLatitude,null);var midLon=lanyard.geom.Angle.prototype.average(this._minLongitude,this._maxLongitude,null);var sectors=[];sectors[0]=new lanyard.geom.Sector(this._minLatitude,midLat,this._minLongitude,midLon);sectors[1]=new lanyard.geom.Sector(this._minLatitude,midLat,midLon,this._maxLongitude);sectors[2]=new lanyard.geom.Sector(midLat,this._maxLatitude,this._minLongitude,
midLon);sectors[3]=new lanyard.geom.Sector(midLat,this._maxLatitude,midLon,this._maxLongitude);return sectors};lanyard.geom.Sector.prototype.toString=function(){var ret="A Sector with angles: ("+this._minLatitude.toString()+", "+this._minLongitude.toString()+")"+", ("+this._maxLatitude.toString()+", "+this._maxLongitude.toString()+")";return ret};
lanyard.geom.Sector.prototype.compareTo=function(that){if(this.getMinLatitude().compareTo(that.getMinLatitude())<0)return-1;if(this.getMinLatitude().compareTo(that.getMinLatitude())>0)return 1;if(this.getMinLongitude().compareTo(that.getMinLongitude())<0)return-1;if(this.getMinLongitude().compareTo(that.getMinLongitude())>0)return 1;if(this.getMaxLatitude().compareTo(that.getMaxLatitude())<0)return-1;if(this.getMaxLatitude().compareTo(that.getMaxLatitude())>0)return 1;if(this.getMaxLongitude().compareTo(that.getMaxLongitude())<
0)return-1;if(this.getMaxLongitude().compareTo(that.getMaxLongitude())>0)return 1;return 0};goog.provide("lanyard.Elevations");goog.require("lanyard.geom.Sector");lanyard.Elevations=function(){};lanyard.Elevations.prototype.hasElevations=function(){};lanyard.Elevations.prototype.getElevation=function(latRadians,lonRadians){};lanyard.Elevations.prototype.getResolution=function(){};lanyard.Elevations.prototype.getSector=function(){};goog.provide("lanyard.ElevationModel");goog.require("lanyard.Elevations");goog.require("lanyard.geom.Sector");goog.require("lanyard.DrawContext");goog.require("lanyard.geom.Angle");lanyard.ElevationModel=function(){};lanyard.ElevationModel.prototype.isEnabled=function(){};lanyard.ElevationModel.prototype.setEnabled=function(enable){};lanyard.ElevationModel.prototype.getMaximumElevation=function(){};lanyard.ElevationModel.prototype.getMinimumElevation=function(){};
lanyard.ElevationModel.prototype.getElevations=function(sector,resolution){};lanyard.ElevationModel.prototype.getTargetResolution=function(dc,sector,density){};lanyard.ElevationModel.prototype.getElevation=function(latitude,longitude){};goog.provide("lanyard.SectorGeometry");lanyard.SectorGeometry=function(){};lanyard.SectorGeometry.prototype.getExtent=function(){};lanyard.SectorGeometry.prototype.getSector=function(){};lanyard.SectorGeometry.prototype.getSurfacePoint=function(latitude,longitude,metersOffset){};lanyard.SectorGeometry.prototype.renderWireframe=function(dc,interior,exterior){};lanyard.SectorGeometry.prototype.renderBoundingVolume=function(dc){};lanyard.SectorGeometry.prototype.render=function(dc){};goog.provide("lanyard.globes.RectTile");goog.require("lanyard.geom.Point");goog.require("lanyard.geom.Angle");goog.require("lanyard.globes.RenderInfo");goog.require("lanyard.ElevationModel");goog.require("lanyard.geom.Position");goog.require("lanyard.SectorGeometry");
lanyard.globes.RectTile=function(globe,level,density,sector){this._logger=goog.debug.Logger.getLogger("lanyard.globes.RectTile");this._minColorCode=0;this._maxColorCode=0;this._globe=globe;this._level=level;this._density=density;this._sector=sector;this._extent=lanyard.geom.Sector.prototype.computeBoundingCylinder(globe,1,this._sector);var cellSize=sector.getDeltaLatRadians()*globe.getRadius()/density;this._log10CellSize=Math.log(cellSize)/Math.LN10;this._ri=null;this._parameterizations={};this._indexLists=
{}};lanyard.globes.RectTile.prototype.getLog10CellSize=function(){return this._log10CellSize};lanyard.globes.RectTile.prototype.getSector=function(){return this._sector};lanyard.globes.RectTile.prototype.getExtent=function(){return this._extent};
lanyard.globes.RectTile.prototype.split=function(dc,tile){var sectors=this._sector.subdivide();var subTiles=[];subTiles[0]=new lanyard.globes.RectTile(this._globe,tile._level+1,this._density,sectors[0]);subTiles[1]=new lanyard.globes.RectTile(this._globe,tile._level+1,this._density,sectors[1]);subTiles[2]=new lanyard.globes.RectTile(this._globe,tile._level+1,this._density,sectors[2]);subTiles[3]=new lanyard.globes.RectTile(this._globe,tile._level+1,this._density,sectors[3]);return subTiles};
lanyard.globes.RectTile.prototype.makeVerts=function(dc){var resolution=0;if(this._ri&&this._ri.resolution>=resolution)return;this._ri=this.buildVerts(dc,this._density,resolution,true)};
lanyard.globes.RectTile.prototype.buildVerts=function(dc,density,resolution,makeSkirts){var numVertices=(density+3)*(density+3);var verts=[];var globe=dc.getGlobe();var latMin=this._sector.getMinLatitude().getRadians();var latMax=this._sector.getMaxLatitude().getRadians();var dLat=(latMax-latMin)/density;var lonMin=this._sector.getMinLongitude().getRadians();var lonMax=this._sector.getMaxLongitude().getRadians();var dLon=(lonMax-lonMin)/density;var iv=0;var lat=latMin;var verticalExaggeration=dc.getVerticalExaggeration();
var exaggeratedMinElevation=makeSkirts?globe.getMinElevation()*verticalExaggeration:0;var equatorialRadius=globe.getEquatorialRadius();var eccentricity=globe.getEccentricitySquared();var centroid=this._sector.getCentroid();var refCenter=globe.computePointFromPosition(new lanyard.geom.Position(centroid.getLatitude(),centroid.getLongitude(),0));var j;for(j=0;j<=density+2;j=j+1){var cosLat=Math.cos(lat);var sinLat=Math.sin(lat);var rpm=equatorialRadius/Math.sqrt(1-eccentricity*sinLat*sinLat);var lon=
lonMin;var i;for(i=0;i<=density+2;i=i+1){var elevation=0;if(j===0||j>=density+2||i===0||i>=density+2)elevation-=exaggeratedMinElevation>=0?exaggeratedMinElevation:-exaggeratedMinElevation;var x=(rpm+elevation)*cosLat*Math.sin(lon)-refCenter.getX();var y=(rpm*(1-eccentricity)+elevation)*sinLat-refCenter.getY();var z=(rpm+elevation)*cosLat*Math.cos(lon)-refCenter.getZ();verts=verts.concat([x,y,z]);if(i>density)lon=lonMax;else if(i!==0)lon+=dLon}if(j>density)lat=latMax;else if(j!==0)lat+=dLat}var retVal=
new lanyard.globes.RenderInfo(density,verts,this.getParameterization(density),refCenter,0,this);return retVal};
lanyard.globes.RectTile.prototype.render=function(dc,numTextureUnits){var indices=this.getIndices(this._ri.density);var gl=dc.getGL();dc.getView().pushModelViewReferenceCenter(dc,this._ri.referenceCenter);var posBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,posBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(this._ri.vertices),gl.STATIC_DRAW);gl.enableVertexAttribArray(dc.getGLSL().getAttribLocation("aVertexPosition"));gl.vertexAttribPointer(dc.getGLSL().getAttribLocation("aVertexPosition"),
3,gl.FLOAT,false,0,0);var texBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,texBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(this._ri.texCoords),gl.STATIC_DRAW);gl.enableVertexAttribArray(dc.getGLSL().getAttribLocation("aTextureCoord0"));gl.vertexAttribPointer(dc.getGLSL().getAttribLocation("aTextureCoord0"),2,gl.FLOAT,false,0,0);var idxBuffer=gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,idxBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(indices),gl.STATIC_DRAW);
gl.drawElements(gl.TRIANGLE_STRIP,this._ri.indices.length,gl.UNSIGNED_SHORT,0);dc.getView().popModelViewMatrix(dc);return this._ri.indices.length-2};
lanyard.globes.RectTile.prototype.renderWireframe=function(dc,showTriangles,showTileBoundary){var indices=this.getIndices(this._ri.density);dc.getView().pushModelViewReferenceCenter(dc,this._ri.referenceCenter);var gl=dc.getGL();if(showTriangles){var posBuffer=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,posBuffer);gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(this._ri.vertices),gl.STATIC_DRAW);gl.enableVertexAttribArray(dc.getGLSL().getAttribLocation("aVertexPosition"));gl.vertexAttribPointer(dc.getGLSL().getAttribLocation("aVertexPosition"),
3,gl.FLOAT,false,0,0);var idxBuffer=gl.createBuffer();gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,idxBuffer);gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(indices),gl.STATIC_DRAW);gl.drawElements(gl.TRIANGLE_STRIP,this._ri.vertices.length/3,gl.UNSIGNED_SHORT,0)}dc.getView().popModelViewMatrix(dc);if(showTileBoundary)this.renderPatchBoundary(dc,gl)};lanyard.globes.RectTile.prototype.renderPatchBoundary=function(dc,gl){};lanyard.globes.RectTile.prototype.renderBoundingVolume=function(dc){this.getExtent().render(dc)};
lanyard.globes.RectTile.prototype.renderTrianglesWithUniqueColors=function(dc,ri){};
lanyard.globes.RectTile.prototype.getSurfacePoint=function(latitude,longitude,metersOffset){if(!this._sector.contains(latitude,longitude))return null;if(!this._ri)return null;var lat=latitude.getDegrees();var lon=longitude.getDegrees();var bottom=this._sector.getMinLatitude().getDegrees();var top=this._sector.getMaxLatitude().getDegrees();var left=this._sector.getMinLongitude().getDegrees();var right=this._sector.getMaxLongitude().getDegrees();var leftDecimal=(lon-left)/(right-left);var bottomDecimal=
(lat-bottom)/(top-bottom);var row=bottomDecimal*this._density;var column=leftDecimal*this._density;var l=lanyard.globes.RectTile.prototype.createPosition(column,leftDecimal,this._ri.density);var h=lanyard.globes.RectTile.prototype.createPosition(row,bottomDecimal,this._ri.density);var result=lanyard.globes.RectTile.prototype.interpolate(row,column,l,h,this._ri);result=result.add(this._ri.referenceCenter);if(metersOffset!==0)result=lanyard.globes.RectTile.prototype.applyOffset(this._globe,result,metersOffset);
return result};lanyard.globes.RectTile.prototype.applyOffset=function(globe,point,metersOffset){var normal=globe.computeSurfaceNormalAtPoint(point);point=lanyard.geom.Point.prototype.fromOriginAndDirection(metersOffset,normal,point);return point};lanyard.globes.RectTile.prototype.createPosition=function(start,decimal,density){var l=start/density;var r=(start+1)/density;return(decimal-l)/(r-l)};
lanyard.globes.RectTile.prototype.interpolate=function(row,column,xDec,yDec,ri){row++;column++;var numVerticesPerEdge=ri.density+3;var bottomLeft=row*numVerticesPerEdge+column;bottomLeft*=3;var numVertsTimesThree=numVerticesPerEdge*3;var bL=new lanyard.geom.Point(ri.vertices[bottomLeft],ri.vertices[bottomLeft+1],ri.vertices[bottomLeft+2],1);var bR=new lanyard.geom.Point(ri.vertices[bottomLeft+3],ri.vertices[bottomLeft+4],ri.vertices[bottomLeft+5],1);bottomLeft+=numVertsTimesThree;var tL=new lanyard.geom.Point(ri.vertices[bottomLeft],
ri.vertices[bottomLeft+1],ri.vertices[bottomLeft+2],1);var tR=new lanyard.geom.Point(this._ri.vertices[bottomLeft+3],this._ri.vertices[bottomLeft+4],this._ri.vertices[bottomLeft+5],1);return lanyard.globes.RectTile.prototype.interpolateTriangles(bL,bR,tR,tL,xDec,yDec)};
lanyard.globes.RectTile.prototype.interpolateTriangles=function(bL,bR,tR,tL,xDec,yDec){var pos=xDec+yDec;var horizontalVector;var verticalVector;if(pos===1)return new lanyard.geom.Point(tL.getX()*yDec+bR.getX()*xDec,tL.getY()*yDec+bR.getY()*xDec,tL.getZ()*yDec+bR.getZ()*xDec,1);else if(pos>1){horizontalVector=tL.subtract(tR).multiply(1-xDec);verticalVector=bR.subtract(tR).multiply(1-yDec);return tR.add(horizontalVector).add(verticalVector)}else{horizontalVector=bR.subtract(bL).multiply(xDec);verticalVector=
tL.subtract(bL).multiply(yDec);return bL.add(horizontalVector).add(verticalVector)}};lanyard.globes.RectTile.prototype.toString=function(){return"level "+this._level+", density "+this._density+", sector "+this._sector};
lanyard.globes.RectTile.prototype.getParameterization=function(density){if(density<1)density=1;var one=0.999999;if(this&&this._parameterizations&&this._parameterizations.density)return this._parameterizations.density;var coordCount=(density+3)*(density+3);var p=[];var delta=1/density;var k=2*(density+3);var j;for(j=0;j<density;j=j+1){var v=j*delta;p[k++]=0;p[k++]=v;var i;for(i=0;i<density;i=i+1){p[k++]=i*delta;p[k++]=v}p[k++]=one;p[k++]=v;p[k++]=one;p[k++]=v}var v1=one;p[k++]=0;p[k++]=v1;var j1;for(j1=
0;j1<density;j1=j1+1){p[k++]=j1*delta;p[k++]=v1}p[k++]=one;p[k++]=v1;p[k++]=one;p[k++]=v1;var kk=k-2*(density+3);var m;for(m=0;m<density+3;m=m+1){p[k++]=p[kk++];p[k++]=p[kk++]}k=0;kk=2*(density+3);var n;for(n=0;n<density+3;n=n+1){p[k++]=p[kk++];p[k++]=p[kk++]}if(this._parameterizations)this._parameterizations.density=p;return p};
lanyard.globes.RectTile.prototype.getIndices=function(density){if(density<1)density=1;if(this._indexLists&&this._indexLists.density)return this._indexLists.density;var sideSize=density+2;var indexCount=2*sideSize*sideSize+4*sideSize-2;var buffer=[];var k=0;var i;for(i=0;i<sideSize;i=i+1){buffer.push(k);if(i>0){buffer.push(++k);buffer.push(k)}if(i%2===0){buffer.push(++k);var j;for(j=0;j<sideSize;j=j+1){k+=sideSize;buffer.push(k);buffer.push(++k)}}else{buffer.push(--k);var m;for(m=0;m<sideSize;m++){k-=
sideSize;buffer.push(k);buffer.push(--k)}}}if(this._indexLists)this._indexLists.density=buffer;return buffer};goog.provide("lanyard.SectorGeometryList");lanyard.SectorGeometryList=function(){this.geometryList=[]};lanyard.SectorGeometryList.prototype.add=function(sg){this.geometryList.push(sg)};lanyard.SectorGeometryList.prototype.length=function(){if(!this.geometryList)return 0;else return this.geometryList.length};lanyard.SectorGeometryList.prototype.at=function(position){return this.geometryList[position]};lanyard.SectorGeometryList.prototype.clear=function(){this.geometryList=[]};
lanyard.SectorGeometryList.prototype.getIntersectingSectors=function(sector){var list=[];var i;for(i=0;i<this.geometryList.length;i=i+1)if(this.geometryList[i].getSector().intersects(sector))list.push(this.geometryList[i]);else;return list};
lanyard.SectorGeometryList.prototype.getSurfacePoint=function(latitude,longitude,metersOffset){var i;for(i=0;i<this.geometryList.length;i=i+1)if(this.geometryList[i].getSector().contains(latitude,longitude)){var point=this.geometryList[i].getSurfacePoint(latitude,longitude,metersOffset);if(point)return point}return null};goog.provide("lanyard.geom.MatrixFour");goog.require("lanyard.geom.Angle");goog.require("lanyard.geom.Point");goog.require("lanyard.geom.Matrix");
lanyard.geom.MatrixFour=function(entries){this._m11=1;this._m22=1;this._m33=1;this._m44=1;this._m12=0;this._m13=0;this._m14=1;this._m21=0;this._m23=0;this._m24=1;this._m31=0;this._m32=0;this._m34=1;this._m41=0;this._m42=0;this._m43=0;this._isOrthonormal=true;if(entries){this._m11=entries[0];this._m21=entries[1];this._m31=entries[2];this._m41=entries[3];this._m12=entries[4];this._m22=entries[5];this._m32=entries[6];this._m42=entries[7];this._m13=entries[8];this._m23=entries[9];this._m33=entries[10];
this._m43=entries[11];this._m14=entries[12];this._m24=entries[13];this._m34=entries[14];this._m44=entries[15];this._isOrthonormal=false}};goog.exportSymbol("lanyard.geom.MatrixFour",lanyard.geom.MatrixFour);lanyard.geom.MatrixFour.prototype.toString=function(){var ents=this.getEntries();var msg="MatrixFour : \n[ ";var i;for(i=0;i<ents.length;i++){msg+=ents[i]+", ";if(i==3||i==7||i==11||i==14)msg+="\n"}msg+=" ]";return msg};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.toString",lanyard.geom.MatrixFour.prototype.toString);
lanyard.geom.MatrixFour.prototype.getEntries=function(){var e=[];e[0]=this._m11;e[1]=this._m21;e[2]=this._m31;e[3]=this._m41;e[4]=this._m12;e[5]=this._m22;e[6]=this._m32;e[7]=this._m42;e[8]=this._m13;e[9]=this._m23;e[10]=this._m33;e[11]=this._m43;e[12]=this._m14;e[13]=this._m24;e[14]=this._m34;e[15]=this._m44;return e};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.getEntries",lanyard.geom.MatrixFour.prototype.getEntries);
lanyard.geom.MatrixFour.prototype.setToIdentity=function(){this._m11=1;this._m12=0;this._m13=0;this._m14=0;this._m21=0;this._m22=1;this._m23=0;this._m24=0;this._m31=0;this._m32=0;this._m33=1;this._m34=0;this._m41=0;this._m42=0;this._m43=0;this._m44=1;this._isOrthonormal=true};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.setToIdentity",lanyard.geom.MatrixFour.prototype.setToIdentity);lanyard.geom.MatrixFour.prototype.isOrthonormal=function(){return this._isOrthonormal};
goog.exportSymbol("lanyard.geom.MatrixFour.prototype.isOrthonormal",lanyard.geom.MatrixFour.prototype.isOrthonormal);lanyard.geom.MatrixFour.prototype.setOrthonormal=function(value){this._isOrthonormal=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.setOrthonormal",lanyard.geom.MatrixFour.prototype.setOrthonormal);
lanyard.geom.MatrixFour.prototype.rotate=function(rotation,axisX,axisY,axisZ){var ll=axisX*axisX+axisY*axisY+axisZ*axisZ;if(rotation.getDegrees()===0||ll===0)return this;if(ll!==1){var l=Math.sqrt(ll);axisX/=l;axisY/=l;axisZ/=l}var c=rotation.cos();var s=rotation.sin();var c1=1-c;var o=new lanyard.geom.MatrixFour(null);o._m11=c+axisX*axisX*c1;o._m12=axisX*axisY*c1-axisZ*s;o._m13=axisX*axisZ*c1+axisY*s;o._m14=0;o._m21=axisX*axisY*c1+axisZ*s;o._m22=c+axisY*axisY*c1;o._m23=axisY*axisZ*c1-axisX*s;o._m24=
0;o._m31=axisX*axisZ*c1-axisY*s;o._m32=axisY*axisZ*c1+axisX*s;o._m33=c+axisZ*axisZ*c1;o._m34=0;o._m41=0;o._m42=0;o._m43=0;o._m44=1;return this.multiply(o)};
lanyard.geom.MatrixFour.prototype.rotateX=function(rotation){var c=rotation.cos();var s=rotation.sin();var n12=this._m12*c+this._m13*s;var n13=this._m12*-s+this._m13*c;var n22=this._m22*c+this._m23*s;var n23=this._m22*-s+this._m23*c;var n32=this._m32*c+this._m33*s;var n33=this._m32*-s+this._m33*c;var n42=this._m42*c+this._m43*s;var n43=this._m42*-s+this._m43*c;this._m12=n12;this._m13=n13;this._m22=n22;this._m23=n23;this._m32=n32;this._m33=n33;this._m42=n42;this._m43=n43;return this};
lanyard.geom.MatrixFour.prototype.rotateY=function(rotation){var c=rotation.cos();var s=rotation.sin();var n11=this._m11*c+this._m13*-s;var n13=this._m11*s+this._m13*c;var n21=this._m21*c+this._m23*-s;var n23=this._m21*s+this._m23*c;var n31=this._m31*c+this._m33*-s;var n33=this._m31*s+this._m33*c;var n41=this._m41*c+this._m43*-s;var n43=this._m41*s+this._m43*c;this._m11=n11;this._m13=n13;this._m21=n21;this._m23=n23;this._m31=n31;this._m33=n33;this._m41=n41;this._m43=n43;return this};
lanyard.geom.MatrixFour.prototype.rotateZ=function(rotation){var c=rotation.cos();var s=rotation.sin();var n11=this._m11*c+this._m12*s;var n12=this._m11*-s+this._m12*c;var n21=this._m21*c+this._m22*s;var n22=this._m21*-s+this._m22*c;var n31=this._m31*c+this._m32*s;var n32=this._m31*-s+this._m32*c;var n41=this._m41*c+this._m42*s;var n42=this._m41*-s+this._m42*c;this._m11=n11;this._m12=n12;this._m21=n21;this._m22=n22;this._m31=n31;this._m32=n32;this._m41=n41;this._m42=n42;return this};
lanyard.geom.MatrixFour.prototype.translate=function(x,y,z){this._m14=this._m11*x+this._m12*y+this._m13*z+this._m14;this._m24=this._m21*x+this._m22*y+this._m23*z+this._m24;this._m34=this._m31*x+this._m32*y+this._m33*z+this._m34;this._m44=this._m41*x+this._m42*y+this._m43*z+this._m44;return this};lanyard.geom.MatrixFour.prototype.translatePoint=function(p){return this.translate(p.getX(),p.getY(),p.getZ())};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.translatePoint",lanyard.geom.MatrixFour.prototype.translatePoint);
lanyard.geom.MatrixFour.prototype.add=function(m){var o=m;this._m11+=o._m11;this._m12+=o._m12;this._m13+=o._m13;this._m14+=o._m14;this._m21+=o._m21;this._m22+=o._m22;this._m23+=o._m23;this._m24+=o._m24;this._m31+=o._m31;this._m32+=o._m32;this._m33+=o._m33;this._m34+=o._m34;this._m41+=o._m41;this._m42+=o._m42;this._m43+=o._m43;this._m44+=o._m44;this._isOrthonormal=this._isOrthonormal||o.isOrthonormal();return this};
lanyard.geom.MatrixFour.prototype.multiply=function(m){var o=m;var n11=this._m11*o._m11+this._m12*o._m21+this._m13*o._m31+this._m14*o._m41;var n12=this._m11*o._m12+this._m12*o._m22+this._m13*o._m32+this._m14*o._m42;var n13=this._m11*o._m13+this._m12*o._m23+this._m13*o._m33+this._m14*o._m43;var n14=this._m11*o._m14+this._m12*o._m24+this._m13*o._m34+this._m14*o._m44;var n21=this._m21*o._m11+this._m22*o._m21+this._m23*o._m31+this._m24*o._m41;var n22=this._m21*o._m12+this._m22*o._m22+this._m23*o._m32+
this._m24*o._m42;var n23=this._m21*o._m13+this._m22*o._m23+this._m23*o._m33+this._m24*o._m43;var n24=this._m21*o._m14+this._m22*o._m24+this._m23*o._m34+this._m24*o._m44;var n31=this._m31*o._m11+this._m32*o._m21+this._m33*o._m31+this._m34*o._m41;var n32=this._m31*o._m12+this._m32*o._m22+this._m33*o._m32+this._m34*o._m42;var n33=this._m31*o._m13+this._m32*o._m23+this._m33*o._m33+this._m34*o._m43;var n34=this._m31*o._m14+this._m32*o._m24+this._m33*o._m34+this._m34*o._m44;var n41=this._m41*o._m11+this._m42*
o._m21+this._m43*o._m31+this._m44*o._m41;var n42=this._m41*o._m12+this._m42*o._m22+this._m43*o._m32+this._m44*o._m42;var n43=this._m41*o._m13+this._m42*o._m23+this._m43*o._m33+this._m44*o._m43;var n44=this._m41*o._m14+this._m42*o._m24+this._m43*o._m34+this._m44*o._m44;this._m11=n11;this._m12=n12;this._m13=n13;this._m14=n14;this._m21=n21;this._m22=n22;this._m23=n23;this._m24=n24;this._m31=n31;this._m32=n32;this._m33=n33;this._m34=n34;this._m41=n41;this._m42=n42;this._m43=n43;this._m44=n44;this.isOrtho=
this.isOrtho||o.isOrthonormal();return this};
lanyard.geom.MatrixFour.prototype.getTranspose=function(){var transpose=new lanyard.geom.MatrixFour(null);transpose._m11=this._m11;transpose._m12=this._m21;transpose._m13=this._m31;transpose._m14=this._m41;transpose._m21=this._m12;transpose._m22=this._m22;transpose._m23=this._m32;transpose._m24=this._m42;transpose._m31=this._m13;transpose._m32=this._m23;transpose._m33=this._m33;transpose._m34=this._m43;transpose._m41=this._m14;transpose._m42=this._m24;transpose._m43=this._m34;transpose._m44=this._m44;
transpose.setOrthonormal(this._isOrthonormal);return transpose};lanyard.geom.MatrixFour.prototype.getInverse=function(){var inverse;if(this._isOrthonormal)inverse=this.orthonormalInverse();else inverse=this.generalInverse();inverse.setOrthonormal(this._isOrthonormal);return inverse};
lanyard.geom.MatrixFour.prototype.orthonormalInverse=function(){var inverse=new lanyard.geom.MatrixFour(null);inverse._m11=this._m11;inverse._m12=this._m21;inverse._m13=this._m31;inverse._m21=this._m12;inverse._m22=this._m22;inverse._m23=this._m32;inverse._m31=this._m13;inverse._m32=this._m23;inverse._m33=this._m33;inverse._m14=-(inverse._m11*this._m14+inverse._m12*this._m24+inverse._m13*this._m34);inverse._m24=-(inverse._m21*this._m14+inverse._m22*this._m24+inverse._m23*this._m34);inverse._m34=-(inverse._m31*
this._m14+inverse._m32*this._m24+inverse._m33*this._m34);return inverse};
lanyard.geom.MatrixFour.prototype.generalInverse=function(){var d=this.determinant();if(d===0)return null;var id=1/d;var inverse=new lanyard.geom.MatrixFour(null);var a1=this._m33*this._m44-this._m34*this._m43;var a2=this._m34*this._m42-this._m32*this._m44;var a3=this._m32*this._m43-this._m33*this._m42;var a4=this._m23*this._m44-this._m24*this._m43;var a5=this._m24*this._m42-this._m22*this._m44;var a6=this._m23*this._m34-this._m24*this._m33;var a7=this._m22*this._m33-this._m23*this._m32;var a8=this._m34*
this._m41-this._m31*this._m44;var a9=this._m31*this._m43-this._m33*this._m41;var a21=this._m24*this._m41-this._m21*this._m44;var a22=this._m24*this._m31-this._m21*this._m34;var a23=this._m32*this._m44-this._m34*this._m42;var a24=this._m31*this._m42-this._m32*this._m41;var a14=this._m21*this._m42-this._m22*this._m41;var a15=this._m21*this._m32-this._m22*this._m31;var a16=this._m33*this._m41-this._m31*this._m43;inverse._m11=id*this._m22*a1+this._m23*a2+this._m24*a3;inverse._m12=-id*this._m12*a1+this._m13*
a2+this._m14*a3;inverse._m13=id*this._m12*a4+this._m13*(this._m24*this._m42-this._m22*this._m44)+this._m14*a5;inverse._m14=-id*this._m12*a6+this._m13*(this._m24*this._m32-this._m22*this._m34)+this._m14*a7;inverse._m21=-id*this._m21*a1+this._m23*a8+this._m24*a9;inverse._m22=id*this._m11*a1+this._m13*a8+this._m14*a9;inverse._m23=-id*this._m11*a4+this._m13*a21+this._m14*(this._m21*this._m43-this._m23*this._m41);inverse._m24=-id*this._m11*a6+this._m13*a22+this._m14*(this._m21*this._m33-this._m23*this._m31);
inverse._m31=id*this._m21*a23+this._m22*a8+this._m24*a24;inverse._m32=-id*this._m11*a23+this._m12*a8+this._m14*a24;inverse._m33=-id*this._m11*(this._m22*this._m44-this._m24*this._m42)+this._m12*a21+this._m14*a14;inverse._m34=id*this._m11*(this._m22*this._m34-this._m24*this._m32)+this._m12*a22+this._m14*a15;inverse._m41=-id*this._m21*a3+this._m22*a16+this._m23*a24;inverse._m42=-id*this._m11*a3+this._m12*a16+this._m13*a24;inverse._m43=id*this._m11*a5+this._m12*(this._m23*this._m41-this._m21*this._m43)+
this._m13*a14;inverse._m44=-id*this._m11*a7+this._m12*(this._m23*this._m31-this._m21*this._m33)+this._m13*a15;return inverse};
lanyard.geom.MatrixFour.prototype.determinant=function(){var det=this._m11*(this._m22*this._m33*this._m44+this._m23*this._m34*this._m42+this._m24*this._m32*this._m43-this._m24*this._m33*this._m42-this._m22*this._m34*this._m43-this._m23*this._m32*this._m44)-this._m12*(this._m21*this._m33*this._m44+this._m23*this._m34*this._m41+this._m24*this._m31*this._m43-this._m24*this._m33*this._m41-this._m21*this._m34*this._m43-this._m23*this._m31*this._m44)+this._m13*(this._m21*this._m32*this._m44+this._m22*this._m34*
this._m41+this._m24*this._m31*this._m42-this._m24*this._m32*this._m41-this._m21*this._m34*this._m42-this._m22*this._m31*this._m44)-this._m14*(this._m21*this._m32*this._m43+this._m22*this._m33*this._m41+this._m23*this._m31*this._m42-this._m23*this._m32*this._m41-this._m21*this._m33*this._m42-this._m22*this._m31*this._m43);return det};
lanyard.geom.MatrixFour.prototype.transform=function(p){var x=this._m11*p.getX()+this._m12*p.getY()+this._m13*p.getZ()+this._m14*p.getW();var y=this._m21*p.getX()+this._m22*p.getY()+this._m23*p.getZ()+this._m24*p.getW();var z=this._m31*p.getX()+this._m32*p.getY()+this._m33*p.getZ()+this._m34*p.getW();var w=this._m41*p.getX()+this._m42*p.getY()+this._m43*p.getZ()+this._m44*p.getW();return new lanyard.geom.Point(x,y,z,w)};lanyard.geom.MatrixFour.prototype.get11=function(){return this._m11};
goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get11",lanyard.geom.MatrixFour.prototype.get11);lanyard.geom.MatrixFour.prototype.set11=function(value){this._m11=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set11",lanyard.geom.MatrixFour.prototype.set11);lanyard.geom.MatrixFour.prototype.get22=function(){return this._m22};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get22",lanyard.geom.MatrixFour.prototype.get22);
lanyard.geom.MatrixFour.prototype.set22=function(value){this._m22=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set22",lanyard.geom.MatrixFour.prototype.set22);lanyard.geom.MatrixFour.prototype.get33=function(){return this._m33};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get33",lanyard.geom.MatrixFour.prototype.get33);lanyard.geom.MatrixFour.prototype.set33=function(value){this._m33=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set33",lanyard.geom.MatrixFour.prototype.set33);
lanyard.geom.MatrixFour.prototype.get44=function(){return this._m44};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get44",lanyard.geom.MatrixFour.prototype.get44);lanyard.geom.MatrixFour.prototype.set44=function(value){this._m44=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set44",lanyard.geom.MatrixFour.prototype.set44);lanyard.geom.MatrixFour.prototype.get12=function(){return this._m12};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get12",lanyard.geom.MatrixFour.prototype.get12);
lanyard.geom.MatrixFour.prototype.set12=function(value){this._m12=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set12",lanyard.geom.MatrixFour.prototype.set12);lanyard.geom.MatrixFour.prototype.get13=function(){return this._m13};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get13",lanyard.geom.MatrixFour.prototype.get13);lanyard.geom.MatrixFour.prototype.set13=function(value){this._m13=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set13",lanyard.geom.MatrixFour.prototype.set13);
lanyard.geom.MatrixFour.prototype.get14=function(){return this._m14};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get14",lanyard.geom.MatrixFour.prototype.get14);lanyard.geom.MatrixFour.prototype.set14=function(value){this._m14=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set14",lanyard.geom.MatrixFour.prototype.set14);lanyard.geom.MatrixFour.prototype.get21=function(){return this._m21};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get21",lanyard.geom.MatrixFour.prototype.get21);
lanyard.geom.MatrixFour.prototype.set21=function(value){this._m21=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set21",lanyard.geom.MatrixFour.prototype.set21);lanyard.geom.MatrixFour.prototype.get23=function(){return this._m23};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get23",lanyard.geom.MatrixFour.prototype.get23);lanyard.geom.MatrixFour.prototype.set23=function(value){this._m23=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set23",lanyard.geom.MatrixFour.prototype.set23);
lanyard.geom.MatrixFour.prototype.get24=function(){return this._m24};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get24",lanyard.geom.MatrixFour.prototype.get24);lanyard.geom.MatrixFour.prototype.set24=function(value){this._m24=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set24",lanyard.geom.MatrixFour.prototype.set24);lanyard.geom.MatrixFour.prototype.get31=function(){return this._m31};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get31",lanyard.geom.MatrixFour.prototype.get31);
lanyard.geom.MatrixFour.prototype.set31=function(value){this._m31=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set31",lanyard.geom.MatrixFour.prototype.set31);lanyard.geom.MatrixFour.prototype.get32=function(){return this._m32};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get32",lanyard.geom.MatrixFour.prototype.get32);lanyard.geom.MatrixFour.prototype.set32=function(value){this._m32=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set32",lanyard.geom.MatrixFour.prototype.set32);
lanyard.geom.MatrixFour.prototype.get34=function(){return this._m34};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get34",lanyard.geom.MatrixFour.prototype.get34);lanyard.geom.MatrixFour.prototype.set34=function(value){this._m34=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set34",lanyard.geom.MatrixFour.prototype.set34);lanyard.geom.MatrixFour.prototype.get41=function(){return this._m41};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get41",lanyard.geom.MatrixFour.prototype.get41);
lanyard.geom.MatrixFour.prototype.set41=function(value){this._m41=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set41",lanyard.geom.MatrixFour.prototype.set41);lanyard.geom.MatrixFour.prototype.get42=function(){return this._m42};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get42",lanyard.geom.MatrixFour.prototype.get42);lanyard.geom.MatrixFour.prototype.set42=function(value){this._m42=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set42",lanyard.geom.MatrixFour.prototype.set42);
lanyard.geom.MatrixFour.prototype.get43=function(){return this._m43};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.get43",lanyard.geom.MatrixFour.prototype.get43);lanyard.geom.MatrixFour.prototype.set43=function(value){this._m43=value};goog.exportSymbol("lanyard.geom.MatrixFour.prototype.set43",lanyard.geom.MatrixFour.prototype.set43);goog.provide("lanyard.util.Rectangle");lanyard.util.Rectangle=function(x,y,width,height){this._x=y;this._y=y;this._width=width;this._height=height};lanyard.util.Rectangle.prototype.getX=function(){return this._x};lanyard.util.Rectangle.prototype.getY=function(){return this._y};lanyard.util.Rectangle.prototype.getWidth=function(){return this._width};lanyard.util.Rectangle.prototype.getHeight=function(){return this._height};goog.provide("lanyard.View");goog.require("lanyard.geom.MatrixFour");goog.require("lanyard.util.Rectangle");lanyard.View=function(){};lanyard.View.prototype.apply=function(dc){};lanyard.View.prototype.getModelViewMatrix=function(){};lanyard.View.prototype.getProjectionMatrix=function(){};lanyard.View.prototype.getViewport=function(){};lanyard.View.prototype.getFrustum=function(){};lanyard.View.prototype.getFrustumInModelCoordinates=function(){};lanyard.View.prototype.getFieldOfView=function(){};
lanyard.View.prototype.setFieldOfView=function(newFov){};lanyard.View.prototype.pushModelViewReferenceCenter=function(dc,referenceCenter){};lanyard.View.prototype.popModelViewMatrix=function(dc){};lanyard.View.prototype.getEyePoint=function(){};lanyard.View.prototype.getUpVector=function(){};lanyard.View.prototype.getForwardVector=function(){};lanyard.View.prototype.goToCoordinate=function(newLatLon,newAltitude){};lanyard.View.prototype.getPosition=function(){};lanyard.View.prototype.goToLatLon=function(newLatLon){};
lanyard.View.prototype.getAltitude=function(){};lanyard.View.prototype.goToAltitude=function(newAltitude){};lanyard.View.prototype.getHeading=function(){};lanyard.View.prototype.setHeading=function(newHeading){};lanyard.View.prototype.getPitch=function(){};lanyard.View.prototype.setPitch=function(newPitch){};lanyard.View.prototype.getPitchConstraints=function(){};lanyard.View.prototype.setPitchConstraints=function(newMinPitch,newMaxPitch){};lanyard.View.prototype.isEnablePitchConstraints=function(){};
lanyard.View.prototype.setEnablePitchConstraints=function(enabled){};lanyard.View.prototype.getRoll=function(){};lanyard.View.prototype.setRoll=function(newRoll){};lanyard.View.prototype.getZoom=function(){};lanyard.View.prototype.setZoom=function(newZoom){};lanyard.View.prototype.getZoomConstraints=function(){};lanyard.View.prototype.setZoomConstraints=function(newMinZoom,newMaxZoom){};lanyard.View.prototype.isEnableZoomConstraints=function(){};lanyard.View.prototype.setEnableZoomConstraints=function(enabled){};
lanyard.View.prototype.computeRayFromScreenPoint=function(x,y){};lanyard.View.prototype.computePositionFromScreenPoint=function(x,y){};lanyard.View.prototype.computePixelSizeAtDistance=function(distance){};lanyard.View.prototype.computeHorizonDistance=function(){};lanyard.View.prototype.project=function(modelPoint){};lanyard.View.prototype.unProject=function(windowPoint){};goog.provide("lanyard.Tessellator");lanyard.Tessellator=function(){};lanyard.Tessellator.prototype.tessellate=function(dc){};goog.provide("lanyard.globes.EllipsoidRectangularTessellator");goog.require("lanyard.globes.RectTile");goog.require("lanyard.geom.Sector");goog.require("lanyard.SectorGeometryList");goog.require("lanyard.View");goog.require("lanyard.Tessellator");
lanyard.globes.EllipsoidRectangularTessellator=function(globe){this._logger=goog.debug.Logger.getLogger("lanyard.globes.EllipsoidRectangularTessellator");this.topLevels=lanyard.globes.EllipsoidRectangularTessellator.prototype.createTopLevelTiles(globe,5,10);this.maxLevel=12;this.currentTiles=new lanyard.SectorGeometryList;this.currentFrustum=null;this.currentLevel=0;this.sector=null;this.density=24};lanyard.globes.EllipsoidRectangularTessellator.prototype.DEFAULT_DENSITY=24;
lanyard.globes.EllipsoidRectangularTessellator.prototype.DEFAULT_LOG10_RESOLUTION_TARGET=1.3;lanyard.globes.EllipsoidRectangularTessellator.prototype.DEFAULT_MAX_LEVEL=12;lanyard.globes.EllipsoidRectangularTessellator.prototype.DEFAULT_NUM_LAT_SUBDIVISIONS=5;lanyard.globes.EllipsoidRectangularTessellator.prototype.DEFAULT_NUM_LON_SUBDIVISIONS=10;lanyard.globes.EllipsoidRectangularTessellator.prototype.getSector=function(){return this.sector};
lanyard.globes.EllipsoidRectangularTessellator.prototype.createTopLevelTiles=function(globe,nRows,nCols){var tops=[];var deltaLat=180/nRows;var deltaLon=360/nCols;var lastLat=lanyard.geom.Angle.prototype.NEG90;for(var r=0;r<nRows;r=r+1){var lat=lastLat.addDegrees(deltaLat);if(lat.getDegrees()+1>90)lat=lanyard.geom.Angle.prototype.POS90;var lastLon=lanyard.geom.Angle.prototype.NEG180;for(var c=0;c<nCols;c=c+1){var lon=lastLon.addDegrees(deltaLon);if(lon.getDegrees()+1>180)lon=lanyard.geom.Angle.prototype.POS180;
var newTile=new lanyard.globes.RectTile(globe,0,lanyard.globes.EllipsoidRectangularTessellator.prototype.DEFAULT_DENSITY,new lanyard.geom.Sector(lastLat,lat,lastLon,lon));tops.push(newTile);lastLon=lon}lastLat=lat}return tops};
lanyard.globes.EllipsoidRectangularTessellator.prototype.tessellate=function(dc){if(!dc)this._logger.severe("Attempted to tessellate without a valid draw context.");this.currentTiles.clear();this.currentLevel=0;this.sector=null;this.currentFrustum=dc.getView().getFrustumInModelCoordinates();for(var i=0;i<this.topLevels.length;i=i+1)this.selectVisibleTiles(dc,this.topLevels[i]);dc.setVisibleSector(this.getSector());for(var j=0;j<this.currentTiles.length();j=j+1){var t=this.currentTiles.at(j);t.makeVerts(dc)}return this.currentTiles};
lanyard.globes.EllipsoidRectangularTessellator.prototype.selectVisibleTiles=function(dc,tile){var doesIntersectFrustum=tile.getExtent().intersectsFrustum(this.currentFrustum);if(!doesIntersectFrustum)return;else;if(this.currentLevel<this.maxLevel&&this.needToSplit(dc,tile)){++this.currentLevel;var subtiles=tile.split(dc,tile);for(var i=1;i<subtiles.length;i=i+1)this.selectVisibleTiles(dc,subtiles[i]);--this.currentLevel;return}this.sector=tile.getSector().unionWithSector(this.sector);this.currentTiles.add(tile)};
lanyard.globes.EllipsoidRectangularTessellator.prototype.needToSplit=function(dc,tile){if(!tile||!tile.getSector())this._logger.error("Attempted to perform a split check on an invalid tile.");else;var corners=tile.getSector().computeCornerPoints(dc.getGlobe());var centerPoint=tile.getSector().computeCenterPoint(dc.getGlobe());var view=dc.getView();var d1=view.getEyePoint().distanceTo(corners[0]);var d2=view.getEyePoint().distanceTo(corners[1]);var d3=view.getEyePoint().distanceTo(corners[2]);var d4=
view.getEyePoint().distanceTo(corners[3]);var d5=view.getEyePoint().distanceTo(centerPoint);var minDistance=d1;if(d2<minDistance)minDistance=d2;if(d3<minDistance)minDistance=d3;if(d4<minDistance)minDistance=d4;if(d5<minDistance)minDistance=d5;var logDist=Math.log(minDistance)/Math.log(10);var useTile=tile.getLog10CellSize()<=logDist-lanyard.globes.EllipsoidRectangularTessellator.prototype.DEFAULT_LOG10_RESOLUTION_TARGET;return!useTile};
lanyard.globes.EllipsoidRectangularTessellator.prototype.toString=function(){var density=5;var tcs=lanyard.globes.RectTile.prototype.getParameterization(density);var indices=lanyard.globes.RectTile.prototype.getIndices(density);var ret="";var i;for(i=0;i<indices.length;i=i+1){var index=indices[i];ret+=index+": "+tcs[2*index]+", "+tcs[2*index+1]}return ret};goog.provide("lanyard.globes.EllipsoidalGlobe");goog.require("lanyard.ElevationModel");goog.require("lanyard.Globe");lanyard.globes.EllipsoidalGlobe=function(equatorialRadius,polarRadius,es,em){this._logger=goog.debug.Logger.getLogger("lanyard.globes.EllipsoidalGlobe");this.equatorialRadius=equatorialRadius;this.polarRadius=polarRadius;this.es=es;this.center=lanyard.geom.Point.prototype.ZERO;this.elevationModel=em};goog.exportSymbol("lanyard.globes.EllipsoidalGlobe",lanyard.globes.EllipsoidalGlobe);
lanyard.globes.EllipsoidalGlobe.prototype.getRadius=function(){return this.equatorialRadius};lanyard.globes.EllipsoidalGlobe.prototype.getEquatorialRadius=function(){return this.equatorialRadius};lanyard.globes.EllipsoidalGlobe.prototype.getPolarRadius=function(){return this.polarRadius};lanyard.globes.EllipsoidalGlobe.prototype.getMaximumRadius=function(){return this.equatorialRadius};
lanyard.globes.EllipsoidalGlobe.prototype.getRadiusAt=function(latitude,longitude){var p=this.computePointFromPositionAngles(latitude,longitude,0);var rad=p.length();return rad};lanyard.globes.EllipsoidalGlobe.prototype.getEccentricitySquared=function(){return this.es};lanyard.globes.EllipsoidalGlobe.prototype.getDiameter=function(){return this.equatorialRadius*2};lanyard.globes.EllipsoidalGlobe.prototype.getCenter=function(){return this.center};
lanyard.globes.EllipsoidalGlobe.prototype.getMaxElevation=function(){if(this.elevationModel)return this.elevationModel.getMaximumElevation();else return 0};lanyard.globes.EllipsoidalGlobe.prototype.getMinElevation=function(){if(this.elevationModel)return this.elevationModel.getMinimumElevation();else return 0};lanyard.globes.EllipsoidalGlobe.prototype.getExtent=function(){return this};lanyard.globes.EllipsoidalGlobe.prototype.intersectsFrustum=function(frustum){return frustum.intersects(this)};
lanyard.globes.EllipsoidalGlobe.prototype.intersect=function(line){var m=this.equatorialRadius/this.polarRadius;var n=1;var m2=m*m;var n2=n*n;var vx=line.getDirection().getX();var vy=line.getDirection().getY();var vz=line.getDirection().getZ();var sx=line.getOrigin().getX();var sy=line.getOrigin().getY();var sz=line.getOrigin().getZ();var a=vx*vx+m2*vy*vy+n2*vz*vz;var b=2*(sx*vx+m2*sy*vy+n2*sz*vz);var c=sx*sx+m2*sy*sy+n2*sz*sz-this.equatorialRadius*this.equatorialRadius;var discriminant=this.discriminant(a,
b,c);if(discriminant<0)return null;var discriminantRoot=Math.sqrt(discriminant);if(discriminant===0){var p=line.getPointAt((-b-discriminantRoot)/(2*a));return[new lanyard.geom.Intersection(p,true)]}else{var near=line.getPointAt((-b-discriminantRoot)/(2*a));var far=line.getPointAt((-b+discriminantRoot)/(2*a));var dZeroRet=[new lanyard.geom.Intersection(near,false),new lanyard.geom.Intersection(far,false)];return dZeroRet}};
lanyard.globes.EllipsoidalGlobe.prototype.discriminant=function(a,b,c){return b*b-4*a*c};lanyard.globes.EllipsoidalGlobe.prototype.intersectsLine=function(line){return line.distanceTo(this.center)<=this.equatorialRadius};lanyard.globes.EllipsoidalGlobe.prototype.intersectsPlane=function(plane){var dq1=plane.dot(this.center);return dq1<=this.equatorialRadius};
lanyard.globes.EllipsoidalGlobe.prototype.computeSurfaceNormalAtPoint=function(p){p=p.subtract(this.center);var norm=new lanyard.geom.Point(p.getX()/(this.equatorialRadius*this.equatorialRadius),p.getY()/(this.polarRadius*this.polarRadius),p.getZ()/(this.equatorialRadius*this.equatorialRadius),1);var ret=norm.normalize();return ret};lanyard.globes.EllipsoidalGlobe.prototype.getElevationModel=function(){return this.elevationModel};
lanyard.globes.EllipsoidalGlobe.prototype.getElevation=function(latitude,longitude){if(this.elevationModel)return this.elevationModel.getElevation(latitude,longitude);else return 0};lanyard.globes.EllipsoidalGlobe.prototype.computePointFromPosition=function(position){return this.geodeticToCartesian(position.getLatitude(),position.getLongitude(),position.getElevation())};
lanyard.globes.EllipsoidalGlobe.prototype.computePointFromPositionAngles=function(latitude,longitude,metersElevation){return this.geodeticToCartesian(latitude,longitude,metersElevation)};lanyard.globes.EllipsoidalGlobe.prototype.computePositionFromPoint=function(point){return this.cartesianToGeodetic(point)};lanyard.globes.EllipsoidalGlobe.prototype.getIntersectionPosition=function(line){var intersections=this.intersect(line);if(intersections===null)return null;return this.computePositionFromPoint(intersections[0].getIntersectionPoint())};
lanyard.globes.EllipsoidalGlobe.prototype.geodeticToCartesian=function(latitude,longitude,metersElevation){var cosLat=latitude.cos();var sinLat=latitude.sin();var rpm=this.equatorialRadius/Math.sqrt(1-this.es*sinLat*sinLat);var sinLng=longitude.sin();var cosLon=longitude.cos();var x=(rpm+metersElevation)*cosLat*sinLng;var y=(rpm*(1-this.es)+metersElevation)*cosLon;var z=(rpm+metersElevation)*cosLat*longitude.cos();return new lanyard.geom.Point(x,y,z,1)};
lanyard.globes.EllipsoidalGlobe.prototype.cartesianToGeodetic=function(cart){var ra2=1/(this.equatorialRadius*this.equatorialRadius);var X=cart.getZ();var Y=cart.getX();var Z=cart.getY();var e2=this.es;var e4=e2*e2;var XXpYY=X*X+Y*Y;var sqrtXXpYY=Math.sqrt(XXpYY);var p=XXpYY*ra2;var q=Z*Z*(1-e2)*ra2;var r=1/6*(p+q-e4);var s=e4*p*q/(4*r*r*r);var t=Math.pow(1+s+Math.sqrt(s*(2+s)),1/3);var u=r*(1+t+1/t);var v=Math.sqrt(u*u+e4*q);var w=e2*(u+v-q)/(2*v);var k=Math.sqrt(u+v+w*w)-w;var D=k*sqrtXXpYY/(k+
e2);var lon=2*Math.atan2(Y,X+sqrtXXpYY);var sqrtDDpZZ=Math.sqrt(D*D+Z*Z);var lat=2*Math.atan2(Z,D+sqrtDDpZZ);var elevation=(k+e2-1)*sqrtDDpZZ/k;return lanyard.geom.Position.prototype.fromRadians(lat,lon,elevation)};lanyard.globes.EllipsoidalGlobe.prototype.tessellate=function(dc){return dc.getModel().getTessellator().tessellate(dc)};goog.provide("lanyard.globes.Earth");goog.require("lanyard.globes.EllipsoidalGlobe");lanyard.globes.Earth=function(){this.equatorialRadius=6378137;this.polarRadius=6378137;this.es=0;this.center=lanyard.geom.Point.prototype.ZERO;this.elevationModel=null;lanyard.globes.EllipsoidalGlobe.call(this,this.equatorialRadius,this.polarRadius,this.es,this.elevationModel);this._logger=goog.debug.Logger.getLogger("lanyard.globes.Earth")};goog.exportSymbol("lanyard.globes.Earth",lanyard.globes.Earth);
goog.inherits(lanyard.globes.Earth,lanyard.globes.EllipsoidalGlobe);lanyard.globes.Earth.prototype.getRadius=function(){return this.equatorialRadius};goog.provide("lanyard.BasicModel");goog.require("lanyard.globes.EllipsoidRectangularTessellator");goog.require("lanyard.globes.Earth");lanyard.BasicModel=function(){this.globe=new lanyard.globes.Earth;this.tessellator=null;this.layers=[];this.showWireframeInterior=false;this.showWireframeExterior=false;this.showTessellationBoundingVolumes=false;this.createLayers()};lanyard.BasicModel.prototype.createLayers=function(){var layers=[];this.setLayers(layers)};
lanyard.BasicModel.prototype.setGlobe=function(globe){this.globe=globe};lanyard.BasicModel.prototype.setLayers=function(layers){this.layers=layers};lanyard.BasicModel.prototype.getGlobe=function(){return this.globe};lanyard.BasicModel.prototype.getLayers=function(){return this.layers};lanyard.BasicModel.prototype.getTessellator=function(){if(!this.tessellator&&this.globe)this.tessellator=new lanyard.globes.EllipsoidRectangularTessellator(this.globe);return this.tessellator};
lanyard.BasicModel.prototype.setTessellator=function(tessellator){this.tessellator=tessellator};lanyard.BasicModel.prototype.setShowWireframeInterior=function(show){this.showWireframeInterior=show};lanyard.BasicModel.prototype.setShowWireframeExterior=function(show){this.showWireframeExterior=show};lanyard.BasicModel.prototype.isShowWireframeInterior=function(){return this.showWireframeInterior};lanyard.BasicModel.prototype.isShowWireframeExterior=function(){return this.showWireframeExterior};
lanyard.BasicModel.prototype.isShowTessellationBoundingVolumes=function(){return this.showTessellationBoundingVolumes};lanyard.BasicModel.prototype.setShowTessellationBoundingVolumes=function(showTessellationBoundingVolumes){this.showTessellationBoundingVolumes=showTessellationBoundingVolumes};
lanyard.BasicModel.prototype.getExtent=function(){var layers=this.getLayers();if(layers){var i;for(i=0;i<layers.length;i=i+1){var e=layers[i].getExtent();if(e)return e}}var globe=this.getGlobe();if(globe){var ge=globe.getExtent();if(ge)return ge}return null};goog.provide("lanyard.geom.ViewFrustum");goog.require("lanyard.geom.MatrixFour");goog.require("lanyard.geom.Frustum");goog.require("lanyard.geom.Angle");lanyard.geom.ViewFrustum=function(frustum,projection){this._frustum=frustum;this._projection=projection};goog.exportSymbol("lanyard.geom.ViewFrustum",lanyard.geom.ViewFrustum);
lanyard.geom.ViewFrustum.prototype.fromProjectionMatrix=function(projectionMatrix){var m=projectionMatrix.getEntries();var nearMag=Math.sqrt((m[3]+m[2])*(m[3]+m[2])+(m[7]+m[6])*(m[7]+m[6])+(m[11]+m[10])*(m[11]+m[10]));var nearPlane=new lanyard.geom.Plane((m[3]+m[2])/nearMag,(m[7]+m[6])/nearMag,(m[11]+m[10])/nearMag,m[15]+m[14]);var farMag=Math.sqrt((m[3]-m[2])*(m[3]-m[2])+(m[7]-m[6])*(m[7]-m[6])+(m[11]-m[10])*(m[11]-m[10]));var farPlane=new lanyard.geom.Plane((m[3]-m[2])/farMag,(m[7]-m[6])/farMag,
(m[11]-m[10])/farMag,m[15]-m[14]);var leftMag=Math.sqrt((m[3]+m[0])*(m[3]+m[0])+(m[7]+m[4])*(m[7]+m[4])+(m[11]+m[8])*(m[11]+m[8]));var leftPlane=new lanyard.geom.Plane((m[3]+m[0])/leftMag,(m[7]+m[4])/leftMag,(m[11]+m[8])/leftMag,m[15]+m[12]);var rightMag=Math.sqrt((m[3]-m[0])*(m[3]-m[0])+(m[7]-m[4])*(m[7]-m[4])+(m[11]-m[8])*(m[11]-m[8]));var rightPlane=new lanyard.geom.Plane((m[3]-m[0])/rightMag,(m[7]-m[4])/rightMag,(m[11]-m[8])/rightMag,m[15]-m[12]);var bottomMag=Math.sqrt((m[3]+m[1])*(m[3]+m[1])+
(m[7]+m[5])*(m[7]+m[5])+(m[11]+m[9])*(m[11]+m[9]));var bottomPlane=new lanyard.geom.Plane((m[3]+m[1])/bottomMag,(m[7]+m[5])/bottomMag,(m[11]+m[9])/bottomMag,m[15]+m[13]);var topMag=Math.sqrt((m[3]-m[1])*(m[3]-m[1])+(m[7]-m[5])*(m[7]-m[5])+(m[11]-m[9])*(m[11]-m[9]));var topPlane=new lanyard.geom.Plane((m[3]-m[1])/topMag,(m[7]-m[5])/topMag,(m[11]-m[9])/topMag,m[15]-m[13]);return new lanyard.geom.ViewFrustum(new lanyard.geom.Frustum(nearPlane,farPlane,leftPlane,rightPlane,bottomPlane,topPlane),new lanyard.geom.MatrixFour(m))};
lanyard.geom.ViewFrustum.prototype.fromHorizontalFieldOfView=function(fieldOfView,viewportWidth,viewportHeight,near,far){var fov=fieldOfView.getDegrees();var farMinusNear=far-near;var focalLength=1/fieldOfView.tanHalfAngle();var aspect=viewportHeight/viewportWidth;var lrLen=Math.sqrt(focalLength*focalLength+1);var btLen=Math.sqrt(focalLength*focalLength+aspect*aspect);var nearPlane=new lanyard.geom.Plane(0,0,0-1,0-near);var farPlane=new lanyard.geom.Plane(0,0,1,far);var leftPlane=new lanyard.geom.Plane(focalLength/
lrLen,0,0-1/lrLen,0);var rightPlane=new lanyard.geom.Plane(0-focalLength/lrLen,0,0-1/lrLen,0);var bottomPlane=new lanyard.geom.Plane(0,focalLength/btLen,0-aspect/btLen,0);var topPlane=new lanyard.geom.Plane(0,0-focalLength/btLen,0-aspect/btLen,0);var projectionMatrix=[focalLength,0,0,0,0,focalLength/aspect,0,0,0,0,0-(far+near)/farMinusNear,0-1,0,0,0-2*far*near/farMinusNear,0];return new lanyard.geom.ViewFrustum(new lanyard.geom.Frustum(nearPlane,farPlane,leftPlane,rightPlane,bottomPlane,topPlane),
new lanyard.geom.MatrixFour(projectionMatrix))};
lanyard.geom.ViewFrustum.prototype.fromParallelClipplingPlanes=function(near,far,left,right,bottom,top){var farMinusNear=far-near;var rightMinusLeft=right-left;var topMinusBottom=top-bottom;var nearPlane=new lanyard.geom.Plane(0,0,0-1,near<0?near:0-near);var farPlane=new lanyard.geom.Plane(0,0,1,far<0?0-far:far);var leftPlane=new lanyard.geom.Plane(1,0,0,left<0?left:0-left);var rightPlane=new lanyard.geom.Plane(0-1,0,0,right<0?0-right:right);var bottomPlane=new lanyard.geom.Plane(0,1,0,bottom<0?bottom:
0-bottom);var topPlane=new lanyard.geom.Plane(0,0-1,0,top<0?0-top:top);var projectionMatrix=[2/rightMinusLeft,0,0,0-(right+left)/rightMinusLeft,0,0/topMinusBottom,0,0-(top+bottom)/topMinusBottom,0,0,0-2/farMinusNear,0-(far+near)/farMinusNear,0,0,0,1];return new lanyard.geom.ViewFrustum(new lanyard.geom.Frustum(nearPlane,farPlane,leftPlane,rightPlane,bottomPlane,topPlane),new lanyard.geom.MatrixFour(projectionMatrix))};lanyard.geom.ViewFrustum.prototype.getFrustum=function(){return this._frustum};
lanyard.geom.ViewFrustum.prototype.getProjectionMatrix=function(){return this._projection};goog.provide("lanyard.util.GLU");lanyard.util.GLU=function(){};lanyard.util.GLU.prototype.unProject=function(x,y,z,model,proj,view){var inverseProjection=model.multiply(proj).getInverse();var cords=new lanyard.geom.Point(2*(x-view[0])/view[2]-1,2*(y-view[1])/view[3]-1,2*z-1,1);return cords.translate(inverseProjection)};goog.provide("lanyard.util.Stack");lanyard.util.Stack=function(){this.contents=[]};lanyard.util.Stack.prototype.empty=function(){if(!this.contents)return true;return this.contents.length===0?true:false};lanyard.util.Stack.prototype.peek=function(){if(!this.contents||this.contents.length<1)return null;return this.contents[this.contents.length-1]};lanyard.util.Stack.prototype.pop=function(){return this.contents?this.contents.pop():null};
lanyard.util.Stack.prototype.push=function(item){if(!this.contents)this.contents=[item];else this.contents.push(item)};goog.provide("lanyard.BasicOrbitView");goog.require("lanyard.geom.ViewFrustum");goog.require("lanyard.util.GLU");goog.require("lanyard.util.Stack");goog.require("lanyard.Globe");
lanyard.BasicOrbitView=function(){this._logger=goog.debug.Logger.getLogger("lanyard.BasicOrbitView");this.DefaultLatitude=0;this.DefaultLongitude=180*(new Date).getTimezoneOffset()/(12*36E5);this.DefaultZoom=6E6;this.DefaultMinZoom=0;this.DefaultMaxZoom=+Infinity;this.DefaultEnableZoomConstraint=true;this.DefaultHeading=0;this.DefaultPitch=0;this.DefaultMinPitch=0;this.DefaultMaxPitch=90;this.DefaultEnablePitchConstraint=true;this.DefaultFov=45;this.modelView=null;this.projection=null;this.viewport=
null;this.fieldOfView=lanyard.geom.Angle.prototype.fromDegrees(this.DefaultFov);this.globe=null;this.verticalExaggeration=-1;this.eye=null;this.up=null;this.forward=null;this.frustumInModelCoords=null;this.pixelSizeScale=-1;this.horizonDistance=-1;this.matrixMode=[];this.viewportArray=[];this.focusLat=lanyard.geom.Angle.prototype.fromDegrees(0);this.focusLon=lanyard.geom.Angle.prototype.fromDegrees(180*(new Date).getTimezoneOffset()/(12*36E5));this.eyeDist=this.DefaultZoom;this.heading=lanyard.geom.Angle.prototype.fromDegrees(0);
this.pitch=lanyard.geom.Angle.prototype.fromDegrees(0);this.altitude=null;this.minEyeDist=this.DefaultMinZoom;this.maxEyeDist=this.DefaultMaxZoom;this.enableZoomConstraint=this.DefaultEnableZoomConstraint;this.minPitch=lanyard.geom.Angle.prototype.fromDegrees(this.DefaultMinPitch);this.maxPitch=lanyard.geom.Angle.prototype.fromDegrees(this.DefaultMaxPitch);this.enablePitchConstraint=this.DefaultEnablePitchConstraint;this.viewFrustum=null;this.collisionRadius=0;this.isInitialized=false;this.modelViewStack=
new lanyard.util.Stack};
lanyard.BasicOrbitView.prototype.doApply=function(dc){if(!this.isInitialized){this.doInitialize(dc);this.isInitialized=true}var projection=null;var modelView=this.computeModelViewMatrix(dc);var eyePoint=modelView.getInverse().transform(new lanyard.geom.Point(0,0,0,1));this.viewFrustum=this.computeViewFrustum(dc,eyePoint);if(this.viewFrustum){this.collisionRadius=this.computeCollisionRadius(this.viewFrustum);projection=this.viewFrustum.getProjectionMatrix()}else this._logger.severe("We don't have a view frustum to generate the projection matrix.");this.applyMatrixState(dc,
modelView,projection)};lanyard.BasicOrbitView.prototype.doInitialize=function(dc){var globe=dc.getGlobe();this.minEyeDist=this.collisionRadius=1;if(globe)this.maxEyeDist=6*globe.getRadius();else this.maxEyeDist=+Infinity;if(globe)this.eyeDist=this.clampZoom(3*globe.getRadius())};
lanyard.BasicOrbitView.prototype.computeModelViewMatrix=function(dc){var globe=dc.getGlobe();if(!globe){this._logger.severe("The globe was null when computing the model-view matrix.");return null}var focusPosition=new lanyard.geom.Position(this.focusLat,this.focusLon,0);var focusPoint=globe.computePointFromPosition(focusPosition);var modelView=this.lookAt(this.focusLat,this.focusLon,focusPoint.length(),this.eyeDist,this.heading,this.pitch);var eye=modelView.getInverse().transform(new lanyard.geom.Point(0,
0,0,1));var polarEye=globe.computePositionFromPoint(eye);var surfacePoint=this.computeSurfacePoint(dc,polarEye.getLatitude(),polarEye.getLongitude());if(surfacePoint){var distanceToSurface=eye.length()-this.collisionRadius-surfacePoint.length();if(distanceToSurface<0){this._logger.fine("Distance to surface was less than 0.");var surfaceNormal=eye.normalize();var newEye=lanyard.geom.Point.prototype.fromOriginAndDirection(eye.length()-distanceToSurface,surfaceNormal,lanyard.geom.Point.prototype.ZERO);
var forward=eye.subtract(focusPoint);var newForward=newEye.subtract(focusPoint);var dot=forward.dot(newForward)/(forward.length()*newForward.length());if(dot>=-1&&dot<=1){var pitchChange=Math.acos(dot);this.pitch=this.clampPitch(this.pitch.subtract(lanyard.geom.Angle.prototype.fromRadians(pitchChange)));this.eyeDist=this.clampZoom(newForward.length());modelView=lanyard.BasicOrbitView.prototype.lookAt(this.focusLat,this.focusLon,focusPoint.length(),this.eyeDist,this.heading,this.pitch)}}}eye=modelView.getInverse().transform(new lanyard.geom.Point(0,
0,0,1));polarEye=globe.computePositionFromPoint(eye);this.altitude=eye.length()-globe.getRadiusAt(polarEye.getLatitude(),polarEye.getLongitude());return modelView};lanyard.BasicOrbitView.prototype.lookAt=function(focusX,focusY,focusDistance,tiltDistance,tiltZ,tiltX){var m=new lanyard.geom.MatrixFour(null);m.translate(0,0,-tiltDistance);m.rotateX(tiltX.multiply(-1));m.rotateZ(tiltZ);m.translate(0,0,-focusDistance);m.rotateX(focusX);m.rotateY(focusY.multiply(-1));return m};
lanyard.BasicOrbitView.prototype.computeSurfacePoint=function(dc,lat,lon){var p=null;var geom=dc.getSurfaceGeometry();if(geom)p=geom.getSurfacePoint(lat,lon,0);if(p)return p;var globe=dc.getGlobe();if(globe){var elevation=dc.getVerticalExaggeration()*globe.getElevation(lat,lon);p=globe.computePointFromPosition(new lanyard.geom.Position(lat,lon,elevation))}return p};
lanyard.BasicOrbitView.prototype.getFrustum=function(){if(!this.viewFrustum){this._logger.severe("Attempted to get a null frustum from the view.");return null}return this.viewFrustum.getFrustum()};
lanyard.BasicOrbitView.prototype.computeViewFrustum=function(dc,eyePoint){var viewport=this.getViewport();if(!viewport){this._logger.severe("We don't know anything about the viewport.");return null}var fov=this.getFieldOfView();if(!fov){this._logger.severe("We don't know anything about the field of view.");return null}var tanHalfFov=fov.tanHalfAngle();var near=0.1;var far=this.computeHorizonDistance(dc.getGlobe(),dc.getVerticalExaggeration(),eyePoint);return new lanyard.geom.ViewFrustum.prototype.fromHorizontalFieldOfView(fov,
viewport.getWidth(),viewport.getHeight(),near,far)};
lanyard.BasicOrbitView.prototype.computeCollisionRadius=function(viewFrustum){var viewport=this.getViewport();var fov=this.getFieldOfView();if(!viewport||!fov||!viewFrustum||!viewFrustum.getFrustum()||!viewFrustum.getFrustum().getNear())return 1;var near=Math.abs(viewFrustum.getFrustum().getNear().getDistance());if(near===0)near=1;var tanHalfFov=fov.tanHalfAngle();var clipRectX=near*tanHalfFov;var clipRectY=viewport.height*clipRectX/viewport.width;return 1+Math.sqrt(clipRectX*clipRectX+clipRectY*
clipRectY+near*near)};lanyard.BasicOrbitView.prototype.getPosition=function(){return new lanyard.geom.Position(this.focusLat,this.focusLon,0)};lanyard.BasicOrbitView.prototype.goToLatLon=function(newLatLon){var clampedLatLon=this.clampCoordinate(newLatLon);this.focusLat=clampedLatLon.getLatitude();this.focusLon=clampedLatLon.getLongitude()};lanyard.BasicOrbitView.prototype.getAltitude=function(){return this.altitude};
lanyard.BasicOrbitView.prototype.goToAltitude=function(newAltitude){throw"unsupported";};lanyard.BasicOrbitView.prototype.goToCoordinate=function(newLatLon,newAltitude){throw"unsupported";};lanyard.BasicOrbitView.prototype.clampCoordinate=function(latLon){var lat=latLon.getLatitude().getDegrees();if(lat<-90)lat=-90;else if(lat>90)lat=90;var lon=latLon.getLongitude().getDegrees();if(lon<-180)lon=lon+360;else if(lon>180)lon=lon-360;return lanyard.geom.LatLon.prototype.fromDegrees(lat,lon)};
lanyard.BasicOrbitView.prototype.getHeading=function(){return this.heading};lanyard.BasicOrbitView.prototype.setHeading=function(newHeading){this.heading=this.clampHeading(newHeading)};lanyard.BasicOrbitView.prototype.clampHeading=function(heading){var degrees=heading.getDegrees();if(degrees<0)degrees=degrees+360;else if(degrees>360)degrees=degrees-360;return lanyard.geom.Angle.prototype.fromDegrees(degrees)};lanyard.BasicOrbitView.prototype.getPitch=function(){return this.pitch};
lanyard.BasicOrbitView.prototype.setPitch=function(newPitch){this.pitch=this.clampPitch(newPitch)};lanyard.BasicOrbitView.prototype.getPitchConstraints=function(){return[this.minPitch,this.maxPitch]};lanyard.BasicOrbitView.prototype.setPitchConstraints=function(newMinPitch,newMaxPitch){this.minPitch=newMinPitch;this.maxPitch=newMaxPitch};lanyard.BasicOrbitView.prototype.isEnablePitchConstraints=function(){return this.enablePitchConstraint};
lanyard.BasicOrbitView.prototype.setEnablePitchConstraints=function(enabled){this.enablePitchConstraint=enabled};lanyard.BasicOrbitView.prototype.clampPitch=function(pitch){var constraints=this.getPitchConstraints();if(pitch.compareTo(constraints[0])<0)this.pitch=constraints[0];else if(pitch.compareTo(constraints[1])>0)this.pitch=constraints[1];this.pitch=pitch;return this.pitch};lanyard.BasicOrbitView.prototype.getRoll=function(){return lanyard.geom.Angle.prototype.ZERO};
lanyard.BasicOrbitView.prototype.setRoll=function(newRoll){};lanyard.BasicOrbitView.prototype.getZoom=function(){return this.eyeDist};lanyard.BasicOrbitView.prototype.setZoom=function(newZoom){this.eyeDist=this.clampZoom(newZoom)};lanyard.BasicOrbitView.prototype.getZoomConstraints=function(){return[Math.max(this.minEyeDist,this.collisionRadius),this.maxEyeDist]};lanyard.BasicOrbitView.prototype.setZoomConstraints=function(newMinZoom,newMaxZoom){this.minEyeDist=newMinZoom;this.maxEyeDist=newMaxZoom};
lanyard.BasicOrbitView.prototype.isEnableZoomConstraints=function(){return this.enableZoomConstraint};lanyard.BasicOrbitView.prototype.setEnableZoomConstraints=function(enabled){this.enableZoomConstraint=enabled};lanyard.BasicOrbitView.prototype.clampZoom=function(zoom){var x=zoom;var constraints=this.getZoomConstraints();if(x<constraints[0])x=constraints[0];else if(x>constraints[1])x=constraints[1];return x};lanyard.BasicOrbitView.prototype.computeVisibleLatLonRange=function(){return null};
lanyard.BasicOrbitView.prototype.unProject=function(windowPoint){if(!this.modelView||!this.projection||!this.viewport)return null;var viewport=[this.viewport.getX(),this.viewport.getY(),this.viewport.getWidth(),this.viewport.getHeight()];var modelPoint=lanyard.util.GLU.prototype.unProject(windowPoint.getX(),windowPoint.getY(),windowPoint.getZ(),this.modelView,this.projection,viewport);return modelPoint};
lanyard.BasicOrbitView.prototype.project=function(modelPoint){if(!this.modelView||!this.projection||!this.viewport)return null;var eyeCoord=this.modelView.transform(new lanyard.geom.Point(modelPoint.getX(),modelPoint.getY(),modelPoint.getZ(),1));var clipCoord=this.projection.transform(eyeCoord);if(clipCoord.getW()===0)return null;var normDeviceCoord=new lanyard.geom.Point(clipCoord.getX()/clipCoord.getW(),clipCoord.getY()/clipCoord.getW(),clipCoord.getZ()/clipCoord.getW(),0);return new lanyard.geom.Point((normDeviceCoord.getX()+
1)*(this.viewport.getWidth()/2)+this.viewport.getX(),(normDeviceCoord.getY()+1)*(this.viewport.getHeight()/2)+this.viewport.getY(),(normDeviceCoord.getZ()+1)/2,0)};
lanyard.BasicOrbitView.prototype.computePixelSizeAtDistance=function(distance){if(this.pixelSizeScale<0)if(this.fieldOfView&&this.viewport.width>0)this.pixelSizeScale=2*this.fieldOfView.tanHalfAngle()/this.viewport.getWidth();else if(this.viewport.getWidth()>0)this.pixelSizeScale=1/this.viewport.getWidth();if(this.pixelSizeScale<0)return-1;return this.pixelSizeScale*Math.abs(distance)};
lanyard.BasicOrbitView.prototype.computeHorizonDistanceHere=function(){if(this.horizonDistance<0)this.horizonDistance=this.computeHorizonDistance(this.globe,this.verticalExaggeration,this.getEyePoint());return this.horizonDistance};
lanyard.BasicOrbitView.prototype.computeRayFromScreenPoint=function(x,y){if(!this.viewport)return null;var yInv=this.viewport.getHeight()-y-1;var a=this.unProject(new lanyard.geom.Point(x,yInv,0,0));var b=this.unProject(new lanyard.geom.Point(x,yInv,1,0));if(!a||!b)return null;return new lanyard.geom.Line(a,b.subtract(a).normalize())};
lanyard.BasicOrbitView.prototype.computePositionFromScreenPoint=function(x,y){var line=this.computeRayFromScreenPoint(x,y);if(!line)return null;if(!this.globe)return null;return this.globe.getIntersectionPosition(line)};lanyard.BasicOrbitView.prototype.getForwardVector=function(){if(!this.forward&&this.modelView){var modelViewInv=this.modelView.getInverse();if(modelViewInv)this.forward=modelViewInv.transform(new lanyard.geom.Point(0,0,-1,0))}return this.forward};
lanyard.BasicOrbitView.prototype.getUpVector=function(){if(!this.up&&this.modelView){var modelViewInv=this.modelView.getInverse();if(modelViewInv)this.up=modelViewInv.transform(new lanyard.geom.Point(0,1,0,0))}return this.up};lanyard.BasicOrbitView.prototype.popModelViewMatrix=function(dc){this.modelView=this.modelViewStack.pop();dc.loadMatrix("uMVMatrix",this.modelView)};
lanyard.BasicOrbitView.prototype.getEyePoint=function(){if(!this.eye&&this.modelView){var modelViewInv=this.modelView.getInverse();if(modelViewInv)this.eye=modelViewInv.transform(new lanyard.geom.Point(0,0,0,1))}return this.eye};
lanyard.BasicOrbitView.prototype.getFrustumInModelCoordinates=function(){if(!this.modelView)this._logger.severe("Attempted to compute a model-view coordinate frustum without a valid state matrix.");if(!this.frustumInModelCoords&&this.modelView){var frust=this.getFrustum();if(frust)this.frustumInModelCoords=frust.getInverseTransformed(this.modelView);else this._logger.severe("Frustum for conversion to model coordinates was invalid.")}return this.frustumInModelCoords};
lanyard.BasicOrbitView.prototype.getFieldOfView=function(){return this.fieldOfView};lanyard.BasicOrbitView.prototype.setFieldOfView=function(newFov){this.fieldOfView=newFov};lanyard.BasicOrbitView.prototype.getModelViewMatrix=function(){return this.modelView};lanyard.BasicOrbitView.prototype.getProjectionMatrix=function(){return this.projection};lanyard.BasicOrbitView.prototype.getViewport=function(){return this.viewport};lanyard.BasicOrbitView.prototype.setViewport=function(vp){this.viewport=vp};
lanyard.BasicOrbitView.prototype.setViewportFromCanvas=function(canvas){this.viewport=new lanyard.util.Rectangle(0,0,canvas.width,canvas.height)};lanyard.BasicOrbitView.prototype.apply=function(dc){this.globe=dc.getGlobe();this.verticalExaggeration=dc.getVerticalExaggeration();this.clearCachedAttributes();this.doApply(dc)};
lanyard.BasicOrbitView.prototype.clearCachedAttributes=function(){this.eye=null;this.up=null;this.forward=null;this.frustumInModelCoords=null;this.pixelSizeScale=-1;this.horizonDistance=-1};
lanyard.BasicOrbitView.prototype.computeHorizonDistance=function(globe,verticalExaggeration,eyePoint){if(!globe||!eyePoint)return-1;var eyePosition=globe.computePositionFromPoint(eyePoint);var elevation=verticalExaggeration*globe.getElevation(eyePosition.getLatitude(),eyePosition.getLongitude());var surface=globe.computePointFromPosition(new lanyard.geom.Position(eyePosition.getLatitude(),eyePosition.getLongitude(),elevation));var altitude=eyePoint.length()-surface.length();var radius=globe.getMaximumRadius();
return Math.sqrt(altitude*(2*radius+altitude))};lanyard.BasicOrbitView.prototype.applyMatrixState=function(dc,modelView,projection){var gl=dc.getGL();dc.loadMatrix("uMVMatrix",modelView);dc.loadMatrix("uPMatrix",projection);this.modelView=modelView;this.projection=projection};
lanyard.BasicOrbitView.prototype.pushModelViewReferenceCenter=function(dc,referenceCenter){if(!this.modelView)this._logger.severe("Attempted to push the reference center without a valid model-view.");var copyModelView=new lanyard.geom.MatrixFour(this.modelView.getEntries());this.modelViewStack.push(copyModelView);this.modelView=this.modelView.translatePoint(referenceCenter);dc.loadMatrix("uMVMatrix",this.modelView)};
lanyard.BasicOrbitView.prototype.pushModelViewMatrix=function(dc,newModelView){var copyModelView=new lanyard.geom.MatrixFour(this.modelView.getEntries());this.modelViewStack.push(copyModelView);this.modelView=newModelView;dc.loadMatrix("uMVMatrix",this.modelView)};goog.provide("lanyard.util.Color");lanyard.util.Color=function(red,green,blue,alpha,hex){this._red=red;this._green=green;this._blue=blue;this._alpha=alpha;this._hex=hex;this._logger=goog.debug.Logger.getLogger("lanyard.util.Color")};lanyard.util.Color.prototype.BLACK=new lanyard.util.Color(0,0,0,1,"000000FF");lanyard.util.Color.prototype.NAVY=new lanyard.util.Color(0,0,0.5,1,"000080FF");lanyard.util.Color.prototype.BLUE=new lanyard.util.Color(0,0,1,1,"0000FFFF");
lanyard.util.Color.prototype.GREEN=new lanyard.util.Color(0,0.5,0,1,"008000FF");lanyard.util.Color.prototype.TEAL=new lanyard.util.Color(0,0.5,0.5,1,"008080FF");lanyard.util.Color.prototype.LIME=new lanyard.util.Color(0,1,0,1,"00FF00FF");lanyard.util.Color.prototype.AQUA=new lanyard.util.Color(0,1,1,1,"00FFFFFF");lanyard.util.Color.prototype.MAROON=new lanyard.util.Color(0.5,0,0,1,"800000FF");lanyard.util.Color.prototype.PURPLE=new lanyard.util.Color(0.5,0,0.5,1,"800080FF");
lanyard.util.Color.prototype.OLIVE=new lanyard.util.Color(0.5,0.5,0,1,"808000FF");lanyard.util.Color.prototype.GRAY=new lanyard.util.Color(0.5,0.5,0.5,1,"808080FF");lanyard.util.Color.prototype.SILVER=new lanyard.util.Color(0.75,0.75,0.75,1,"C0C0C0FF");lanyard.util.Color.prototype.RED=new lanyard.util.Color(1,0,0,1,"FF0000FF");lanyard.util.Color.prototype.FUCHSIA=new lanyard.util.Color(1,0,1,1,"FF00FFFF");lanyard.util.Color.prototype.YELLOW=new lanyard.util.Color(1,1,0,1,"FFFF00FF");
lanyard.util.Color.prototype.WHITE=new lanyard.util.Color(0,0,0,1,"FFFFFFFF");lanyard.util.Color.prototype.CLEAR=new lanyard.util.Color(0,0,0,0,"00000000");
lanyard.util.Color.prototype.fromHexString=function(hexString){if(!hexString){this._logger.fine("Attempted to parse a null color hex string.");return null}hexString=hexString.charAt(0)==="#"?hexString.substring(1):hexString;if(hexString.length!==6||hexString.length!==8){this._logger.fine("Attempted to parse a color hex string of an incorrect length. "+hexString);return null}var r=parseInt(hexString.substring(0,2),16)/255;var g=parseInt(hexString.substring(2,4),16)/255;var b=parseInt(hexString.substring(4,
6),16)/255;var a=1;if(hexString.length===8)a=parseInt(hexString.substring(6,8),16)/255;return new lanyard.util.Color(r,g,b,a,hexString)};lanyard.util.Color.prototype.toVec4=function(){return[this._red,this._green,this._blue,this._alpha]};lanyard.util.Color.prototype.toVec3=function(){return[this._red,this._green,this._blue]};lanyard.util.Color.prototype.toHex=function(){return this._hex};lanyard.util.Color.prototype.getRed=function(){return this._red};lanyard.util.Color.prototype.getGreen=function(){return this._green};
lanyard.util.Color.prototype.getBlue=function(){return this._blue};lanyard.util.Color.prototype.getAlpha=function(){return this._alpha};goog.provide("lanyard.util.PriorityQueue");lanyard.util.PriorityQueue=function(compare){this._compare=compare;this._elements=[]};lanyard.util.PriorityQueue.prototype.size=function(){return this._elements.length};lanyard.util.PriorityQueue.prototype.offer=function(element){this._elements.push(element);if(this._elements.length<=1)return;this._elements.sort(this._compare)};lanyard.util.PriorityQueue.prototype.poll=function(){return this._elements.splice(0,1)};
lanyard.util.PriorityQueue.prototype.peek=function(){return this._elements[0]};lanyard.util.PriorityQueue.prototype.toArray=function(){return this._elements.slice()};lanyard.util.PriorityQueue.prototype.clear=function(){this._elements=[]};goog.provide("lanyard.OrderedRenderable");lanyard.OrderedRenderable=function(){};lanyard.OrderedRenderable.prototype.render=function(dc){};lanyard.OrderedRenderable.prototype.getDistanceFromEye=function(){};goog.provide("lanyard.util.TextureCoords");lanyard.util.TextureCoords=function(left,bottom,right,t){this._left=left;this._bottom=bottom;this._right=right;this._t=t};lanyard.util.TextureCoords.prototype.left=function(){return this._left};lanyard.util.TextureCoords.prototype.bottom=function(){return this._bottom};lanyard.util.TextureCoords.prototype.right=function(){return this._right};lanyard.util.TextureCoords.prototype.t=function(){return this._t};goog.provide("lanyard.util.Texture");lanyard.util.Texture=function(gl){this._logger=goog.debug.Logger.getLogger("lanyard.util.Texture");if(!gl)this._logger.severe("Creation of a texture was attempted without a valid gl context.");this.gl=gl;this.tex=gl.createTexture()};lanyard.util.Texture.prototype.bind=function(){this.gl.bindTexture(this.gl.TEXTURE_2D,this.tex)};
lanyard.util.Texture.prototype.updateCanvas=function(textureCanvas){var ctx=textureCanvas.getContext("2d");var img=new Image;var self=this;img.onload=function(){ctx.drawImage(img,0,0);var gl=self.gl;gl.bindTexture(gl.TEXTURE_2D,this.tex);gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL,true);gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,img);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.NEAREST);gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.NEAREST);gl.bindTexture(gl.TEXTURE_2D,
null);self.createMipmap()}};lanyard.util.Texture.prototype.setImage=function(image){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,true);this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,image)};lanyard.util.Texture.prototype.createMipmap=function(){this.gl.generateMipmap(this.gl.TEXTURE_2D)};lanyard.util.Texture.prototype.setTexParameteri=function(parameterName,value){this.gl.texParameteri(this.gl.TEXTURE_2D,parameterName,value)};goog.provide("lanyard.render.SurfaceTile");lanyard.render.SurfaceTile=function(){};lanyard.render.SurfaceTile.prototype.bind=function(dc){};lanyard.render.SurfaceTile.prototype.applyInternalTransform=function(dc){};lanyard.render.SurfaceTile.prototype.getSector=function(){};lanyard.render.SurfaceTile.prototype.getExtent=function(dc){};goog.provide("lanyard.render.SurfaceTileRenderer");goog.require("goog.debug.Logger");goog.require("lanyard.util.Texture");goog.require("lanyard.render.SurfaceTile");lanyard.render.SurfaceTileRenderer=function(gl){this.alphaTexture=null;this.outlineTexture=null;this.showImageTileOutlines=true;this.gl=gl;this.transform={HScale:0,VScale:0,HShift:0,VShift:0};this.sgWidth=0;this.sgHeight=0;this.sgMinWE=0;this.sgMinSN=0;this._logger=goog.debug.Logger.getLogger("lanyard.render.SurfaceTileRenderer")};
lanyard.render.SurfaceTileRenderer.prototype.DEFAULT_ALPHA_TEXTURE_SIZE=2;lanyard.render.SurfaceTileRenderer.prototype.preComputeTransform=function(dc,sg){var st=sg.getSector();this.sgWidth=st.getDeltaLonRadians();this.sgHeight=st.getDeltaLatRadians();this.sgMinWE=st.getMinLongitude().getRadians();this.sgMinSN=st.getMinLatitude().getRadians()};
lanyard.render.SurfaceTileRenderer.prototype.computeTransform=function(dc,tile,t){var st=tile.getSector();var tileWidth=st.getDeltaLonRadians();var tileHeight=st.getDeltaLatRadians();var minLon=st.getMinLongitude().getRadians();var minLat=st.getMinLatitude().getRadians();t.VScale=tileHeight>0?this.sgHeight/tileHeight:1;t.HScale=tileWidth>0?this.sgWidth/tileWidth:1;t.VShift=-(minLat-this.sgMinSN)/this.sgHeight;t.HShift=-(minLon-this.sgMinWE)/this.sgWidth};
lanyard.render.SurfaceTileRenderer.prototype.isShowImageTileOutlines=function(){return this.showImageTileOutlines};lanyard.render.SurfaceTileRenderer.prototype.setShowImageTileOutlines=function(showImageTileOutlines){this.showImageTileOutlines=showImageTileOutlines};lanyard.render.SurfaceTileRenderer.prototype.renderTile=function(dc,tile){if(!tile){this._logger.fine("Attempted to render a null tile.");return}this.renderTiles(dc,[tile])};
lanyard.render.SurfaceTileRenderer.prototype.renderTiles=function(dc,tiles){var gl=dc.getGL();if(!this.alphaTexture)this.initAlphaTexture(lanyard.render.SurfaceTileRenderer.prototype.DEFAULT_ALPHA_TEXTURE_SIZE);gl.enable(gl.DEPTH_TEST);gl.depthFunc(gl.LEQUAL);gl.activeTexture(gl.TEXTURE0);var sectorGeoms=dc.getSurfaceGeometry();var i;for(i=0;i<sectorGeoms.geometryList.length;i=i+1){var tilesToRender=this.getIntersectingTiles(sectorGeoms.geometryList[i],tiles);if(!tilesToRender)continue;this.preComputeTransform(dc,
sectorGeoms.geometryList[i]);var j;for(j=0;j<tilesToRender.length;j=j+1){gl.activeTexture(gl.TEXTURE0);if(tilesToRender[j].bind(dc)){gl.activeTexture(gl.TEXTURE0);gl.uniform1i(dc.getGLSL().getUniformLocation("uSamplerTileImage"),0);tilesToRender[j].applyInternalTransform(dc);this.computeTransform(dc,tilesToRender[j],this.transform);var textureMatrix=new lanyard.geom.MatrixFour([this.transform.HScale,0,0,0,0,this.transform.VScale,0,0,0,0,1,0,0,0,0,1]);textureMatrix.translate(this.transform.HShift,
this.transform.VShift,0);dc.loadMatrix("uTextureMatrix",textureMatrix);gl.activeTexture(gl.TEXTURE1);this.alphaTexture.bind();gl.uniform1i(dc.getGLSL().getUniformLocation("uSamplerAlphaMask"),1);sectorGeoms.geometryList[i].render(dc)}}}gl.activeTexture(gl.TEXTURE0)};lanyard.render.SurfaceTileRenderer.prototype.getIntersectingTiles=function(sg,tiles){var intersectingTiles=[];var i;for(i=0;i<tiles.length;i=i+1)if(tiles[i].getSector().intersects(sg.getSector()))intersectingTiles.push(tiles[i]);return intersectingTiles};
lanyard.render.SurfaceTileRenderer.prototype.initAlphaTexture=function(size){var textureCanvas=goog.dom.createElement("canvas");textureCanvas.width=textureCanvas.height=size;var textureContext=textureCanvas.getContext("2d");var textureImage=textureContext.createImageData(size,size);for(var i=0;i<size;i+=1)for(var j=0;j<size;j+=1){var index=(j*size+i)*4;textureImage.data[index+0]=255;textureImage.data[index+1]=255;textureImage.data[index+2]=255;textureImage.data[index+3]=255}textureContext.putImageData(textureImage,
0,0);this.alphaTexture=new lanyard.util.Texture(this.gl);this.alphaTexture.updateCanvas(textureCanvas);this.alphaTexture.bind();this.alphaTexture.setTexParameteri(this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST);this.alphaTexture.setTexParameteri(this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST);this.alphaTexture.setTexParameteri(this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE);this.alphaTexture.setTexParameteri(this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)};
lanyard.render.SurfaceTileRenderer.prototype.initOutlineTexture=function(size){var textureCanvas=goog.dom.createElement("canvas");textureCanvas.width=textureCanvas.height=size;var textureContext=textureCanvas.getContext("2d");var textureImage=textureContext.createImageData(size,size);for(var i=0;i<size;i+=1)for(var j=0;j<size;j+=1){var index=(j*size+i)*4;if(i===0||j===0||i===size-1||j===size-1){textureImage.data[index+0]=255;textureImage.data[index+1]=255;textureImage.data[index+2]=255;textureImage.data[index+
3]=255}else{textureImage.data[index+0]=0;textureImage.data[index+1]=0;textureImage.data[index+2]=0;textureImage.data[index+3]=0}}textureContext.putImageData(textureImage,0,0);this.outlineTexture=new lanyard.util.Texture(this.gl);this.outlineTexture.updateCanvas(textureCanvas);this.outlineTexture.bind();this.outlineTexture.setTexParameteri(this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST);this.outlineTexture.setTexParameteri(this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST);this.outlineTexture.setTexParameteri(this.gl.TEXTURE_WRAP_S,
this.gl.CLAMP_TO_EDGE);this.outlineTexture.setTexParameteri(this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE)};goog.provide("lanyard.render.GLSL");goog.require("goog.debug.Logger");lanyard.render.GLSL=function(gl){this._logger=goog.debug.Logger.getLogger("lanyard.render.GLSL");if(!gl)this._logger.severe("Attempted to create a program object without a valid GL context.");this.gl=gl;this.vshaderSource=null;this.fshaderSource=null;this.programObject=gl.createProgram()};
lanyard.render.GLSL.prototype.updateVertexShader=function(){var vs=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(vs,this.vshaderSource);this.gl.compileShader(vs);this.checkCompilerOutput(vs,false);this.gl.attachShader(this.programObject,vs)};
lanyard.render.GLSL.prototype.updateFragmentShader=function(){var fs=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(fs,this.fshaderSource);this.gl.compileShader(fs);this.checkCompilerOutput(fs,false);this.gl.attachShader(this.programObject,fs)};
lanyard.render.GLSL.prototype.loadVertexShader=function(id){var shaderScript=goog.dom.getElement(id);if(!shaderScript)return null;else this.vshaderSource=shaderScript.innerHTML;if(shaderScript.type!=="x-shader/x-vertex"){this._logger.severe("Attempted to update a vertex shader with an incorrect mime type.");return}this.updateVertexShader()};
lanyard.render.GLSL.prototype.loadFragmentShader=function(id){var shaderScript=goog.dom.getElement(id);if(!shaderScript)return null;else this.fshaderSource=shaderScript.innerHTML;if(shaderScript.type!=="x-shader/x-fragment"){this._logger.severe("Attempted to update a fragment shader with an incorrect mime type.");return}this.updateFragmentShader()};lanyard.render.GLSL.prototype.getAttribLocation=function(name){return this.gl.getAttribLocation(this.programObject,name)};
lanyard.render.GLSL.prototype.getUniformLocation=function(name){var loc=this.gl.getUniformLocation(this.programObject,name);if(!loc)this._logger.severe("The specified uniform was not found in the shader ("+name+").");return loc};lanyard.render.GLSL.prototype.getProgramObject=function(){return this.programObject};lanyard.render.GLSL.prototype.useShaders=function(){this.gl.linkProgram(this.programObject);this.gl.validateProgram(this.programObject);this.checkCompilerOutput(this.programObject,true)};
lanyard.render.GLSL.prototype.startShader=function(){this.gl.useProgram(this.programObject)};lanyard.render.GLSL.prototype.endShader=function(){this.gl.useProgram(null)};
lanyard.render.GLSL.prototype.checkCompilerOutput=function(shader,isProgram){if(isProgram){if(!this.gl.getProgramParameter(shader,this.gl.LINK_STATUS))this._logger.severe("Linking of a program failed. "+this.gl.getProgramInfoLog(shader))}else if(!this.gl.getShaderParameter(shader,this.gl.COMPILE_STATUS))this._logger.severe("Compilation of a shader failed. "+this.gl.getShaderInfoLog(shader))};goog.provide("lanyard.BasicDrawContext");goog.require("lanyard.util.Color");goog.require("goog.debug.Logger");goog.require("lanyard.util.PriorityQueue");goog.require("lanyard.OrderedRenderable");goog.require("lanyard.util.TextureCoords");goog.require("lanyard.render.SurfaceTileRenderer");goog.require("lanyard.render.GLSL");
lanyard.BasicDrawContext=function(canvasElement){this._logger=goog.debug.Logger.getLogger("lanyard.BasicDrawContext");this.view=null;this.model=null;this.globe=null;this.canvasElement=canvasElement;this.verticalExaggeration=1;this.visibleSector=null;this.surfaceGeometry=null;this.uniquePickNumber=0;this.clearColor=lanyard.util.Color.prototype.BLACK;this._isPickingMode=false;this.numTextureUnits=-1;this.orderedRenderables=new lanyard.util.PriorityQueue(function(orA,orB){var eA=orA.getDistanceFromEye();
var eB=orB.getDistanceFromEye();return eA>eB?-1:eA===eB?0:1});this.gl=this.canvasElement.getContext("experimental-webgl");if(!this.gl)this._logger.severe("The canvas specified does not seem to support WebGL.");else;this.surfaceTileRenderer=new lanyard.render.SurfaceTileRenderer(this.gl);this.glsl=null;this.vshaderId="shader-vs";this.fshaderId="shader-fs"};
lanyard.BasicDrawContext.prototype.initialize=function(){this.gl.viewport(0,0,this.canvasElement.width,this.canvasElement.height);this.visibleSector=null;if(this.surfaceGeometry)this.surfaceGeometry.clear();this.surfaceGeometry=null;this.orderedRenderables.clear();this.uniquePickNumber=0;if(this.numTextureUnits<1)this.numTextureUnits=this.queryMaxTextureUnits(this.gl)};
lanyard.BasicDrawContext.prototype.setupShaders=function(){if(!this.glsl&&this.vshaderId&&this.fshaderId){this.glsl=new lanyard.render.GLSL(this.gl);this.glsl.loadVertexShader(this.vshaderId);this.glsl.loadFragmentShader(this.fshaderId);this.glsl.useShaders();this.glsl.startShader()}else;};lanyard.BasicDrawContext.prototype.loadShaders=function(vshaderId,fshaderId){this.vshaderId=vshaderId;this.fshaderId=fshaderId;this.glsl=null};lanyard.BasicDrawContext.prototype.getGL=function(){return this.gl};
lanyard.BasicDrawContext.prototype.getGLSL=function(){return this.glsl};lanyard.BasicDrawContext.prototype.getWebGLCanvas=function(){return this.canvasElement};lanyard.BasicDrawContext.prototype.setWebGLCanvas=function(canvas){this.canvasElement=canvas};lanyard.BasicDrawContext.prototype.getDrawableHeight=function(){return this.canvasElement.height};lanyard.BasicDrawContext.prototype.getDrawableWidth=function(){return this.canvasElement.width};
lanyard.BasicDrawContext.prototype.queryMaxTextureUnits=function(gl){return this.gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS)};lanyard.BasicDrawContext.prototype.setModel=function(model){if(!model)return;this.model=model;var g=this.model.getGlobe();if(g)this.globe=g};lanyard.BasicDrawContext.prototype.getModel=function(){return this.model};lanyard.BasicDrawContext.prototype.getLayers=function(){return this.model.getLayers()};lanyard.BasicDrawContext.prototype.getVisibleSector=function(){return this.visibleSector};
lanyard.BasicDrawContext.prototype.setVisibleSector=function(s){this.visibleSector=s};lanyard.BasicDrawContext.prototype.setSurfaceGeometry=function(surfaceGeometry){this.surfaceGeometry=surfaceGeometry};lanyard.BasicDrawContext.prototype.getSurfaceGeometry=function(){return this.surfaceGeometry};lanyard.BasicDrawContext.prototype.getGlobe=function(){return this.globe!==null?this.globe:this.model.getGlobe()};lanyard.BasicDrawContext.prototype.setView=function(view){this.view=view};
lanyard.BasicDrawContext.prototype.getView=function(){return this.view};lanyard.BasicDrawContext.prototype.getVerticalExaggeration=function(){return this.verticalExaggeration};lanyard.BasicDrawContext.prototype.setVerticalExaggeration=function(verticalExaggeration){this.verticalExaggeration=verticalExaggeration};lanyard.BasicDrawContext.prototype.getUniquePickColor=function(){return lanyard.util.Color.prototype.GREEN};lanyard.BasicDrawContext.prototype.getClearColor=function(){return this.clearColor};
lanyard.BasicDrawContext.prototype.isPickingMode=function(){return this._isPickingMode};lanyard.BasicDrawContext.prototype.enablePickingMode=function(){this._isPickingMode=true};lanyard.BasicDrawContext.prototype.disablePickingMode=function(){this._isPickingMode=false};lanyard.BasicDrawContext.prototype.addOrderedRenderable=function(orderedRenderable){this.orderedRenderables.offer(orderedRenderable)};lanyard.BasicDrawContext.prototype.getOrderedRenderables=function(){return this.orderedRenderables};
lanyard.BasicDrawContext.prototype.drawUnitQuad=function(){this._logger.fine("Drawing a unit quad.");var gl=this.getGL();var quadBuf=gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER,quadBuf);var vertices=[0,0,0,1,0,0,1,1,0,0,1,0];gl.bufferData(gl.ARRAY_BUFFER,vertices,gl.STATIC_DRAW);gl.vertexAttribPointer(this.glsl.getAttribLocation("aVertexPosition"),3,gl.FLOAT,false,0,0);this._logger.fine("Calling draw arrays.");gl.drawArrays(gl.TRIANGLE_STRIP,0,4)};
lanyard.BasicDrawContext.prototype.drawUnitQuadWithTexCoords=function(texCoords){};lanyard.BasicDrawContext.prototype.getNumTextureUnits=function(){return this.numTextureUnits};lanyard.BasicDrawContext.prototype.setNumTextureUnits=function(numTextureUnits){this.numTextureUnits=numTextureUnits};
lanyard.BasicDrawContext.prototype.getPointOnGlobe=function(latitude,longitude){if(!this.getVisibleSector().contains(latitude,longitude))return null;var sectorGeometry=this.getSurfaceGeometry();if(sectorGeometry){var p=sectorGeometry.getSurfacePoint(latitude,longitude,0);if(p)return p}return null};lanyard.BasicDrawContext.prototype.getSurfaceTileRenderer=function(){return this.surfaceTileRenderer};
lanyard.BasicDrawContext.prototype.loadMatrix=function(name,matrix){this.gl.uniformMatrix4fv(this.glsl.getUniformLocation(name),false,new Float32Array(matrix.getEntries()))};lanyard.BasicDrawContext.prototype.loadIdentity=function(name){this.loadMatrix(name,new lanyard.geom.MatrixFour(null))};goog.provide("lanyard.util.Point");lanyard.util.Point=function(x,y){this._x=y;this._y=y};lanyard.util.Point.prototype.getLocation=function(){return new lanyard.util.Point(this._x,this._y)};lanyard.util.Point.prototype.getVec2=function(){return[this._x,this._y]};lanyard.util.Point.prototype.getX=function(){return this._x};lanyard.util.Point.prototype.getY=function(){return this._y};lanyard.util.Point.prototype.translate=function(dx,dy){this._x=this._x+dx;this._y=this._y+dy};
lanyard.util.Point.prototype.toString=function(){return"A string with coordinates of: x = "+this._x+", y = "+this._y+"."};goog.provide("lanyard.BasicFrameController");goog.require("goog.debug.Logger");goog.require("lanyard.util.Point");lanyard.BasicFrameController=function(){this._logger=goog.debug.Logger.getLogger("lanyard.BasicFrameController")};
lanyard.BasicFrameController.prototype.initializeFrame=function(dc){dc.loadShaders("shader-vs","shader-fs");dc.setupShaders();dc.getGL().clearDepth(1);dc.getGL().enable(dc.getGL().DEPTH_TEST);dc.getGL().enable(dc.getGL().CULL_FACE);dc.getGL().depthFunc(dc.getGL().LEQUAL);dc.loadIdentity("uMVMatrix");dc.loadIdentity("uPMatrix")};lanyard.BasicFrameController.prototype.finalizeFrame=function(dc){dc.getGLSL().endShader()};
lanyard.BasicFrameController.prototype.drawFrame=function(dc){this.clearFrame(dc);if(!dc.getView()){this._logger.severe("The view was null when attempting to draw.");return}if(!dc.getModel()){this._logger.severe("The model was null when attempting to draw.");return}if(!dc.getLayers()){this._logger.severe("The layers were null when attempting to draw.");return}dc.getView().apply(dc);if(dc.getModel().getTessellator()){var sgl=dc.getModel().getTessellator().tessellate(dc);dc.setSurfaceGeometry(sgl)}else this._logger.severe("No tessellator was available.");
var layers=dc.getLayers();for(var i=0;i<layers.length;i=i+1){var layer=layers[i];if(layer)layer.render(dc)}while(dc.getOrderedRenderables().peek())dc.getOrderedRenderables().poll().render(dc);if(dc.getSurfaceGeometry()&&dc.getModel().isShowWireframeExterior()||dc.getModel().isShowWireframeInterior()||dc.getModel().isShowTessellationBoundingVolumes()){this._logger.fine("Creating diagnostic displays.");var model=dc.getModel();var previousColor=[];var sgs=dc.getSurfaceGeometry();for(var j=0;j<sgs.geometryList.length;j=
j+1){if(model.isShowWireframeInterior()||model.isShowWireframeExterior())sgs.geometryList[j].renderWireframe(dc,model.isShowWireframeInterior(),model.isShowWireframeExterior());if(model.isShowTessellationBoundingVolumes())sgs.geometryList[j].renderBoundingVolume(dc)}}};lanyard.BasicFrameController.prototype.initializePicking=function(dc){this._logger.fine("Initializing picking.")};lanyard.BasicFrameController.prototype.pick=function(dc,pickPoint){this._logger.fine("Performing a pick operation.")};
lanyard.BasicFrameController.prototype.finalizePicking=function(dc){};lanyard.BasicFrameController.prototype.clearFrame=function(dc){var cc=lanyard.util.Color.prototype.CLEAR;var gl=dc.getGL();gl.clearColor(cc.getRed(),cc.getGreen(),cc.getBlue(),cc.getAlpha());gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT)};goog.provide("lanyard.BasicSceneController");goog.require("lanyard.BasicDrawContext");goog.require("lanyard.BasicFrameController");lanyard.BasicSceneController=function(canvasElement){this._model=null;this._view=null;this._frameController=new lanyard.BasicFrameController;this._verticalExaggeration=1;this._dc=new lanyard.BasicDrawContext(canvasElement);this._logger=goog.debug.Logger.getLogger("lanyard.BasicSceneController")};lanyard.BasicSceneController.prototype.getFrameController=function(){return this._frameController};
lanyard.BasicSceneController.prototype.getModel=function(){return this._model};lanyard.BasicSceneController.prototype.getView=function(){return this._view};lanyard.BasicSceneController.prototype.setFrameController=function(frameController){this._frameController=frameController};lanyard.BasicSceneController.prototype.setModel=function(model){this._model=model};lanyard.BasicSceneController.prototype.setView=function(view){this._view=view};
lanyard.BasicSceneController.prototype.setVerticalExaggeration=function(verticalExaggeration){this._verticalExaggeration=verticalExaggeration};lanyard.BasicSceneController.prototype.getVerticalExaggeration=function(){return this._verticalExaggeration};
lanyard.BasicSceneController.prototype.repaint=function(){this._dc.initialize();this._dc.setModel(this._model);this._dc.setView(this._view);this._dc.setVerticalExaggeration(this._verticalExaggeration);this._dc.setupShaders();if(!this._dc.getWebGLCanvas())this._logger.fine("The scene controller has a null gl canvas context.");var fc=this.getFrameController();if(!fc)this._logger.fine("The frame controller did not exist when the scene controller tried to use it.");fc.initializeFrame(this._dc);this._view.apply(this._dc);
fc.drawFrame(this._dc);fc.finalizeFrame(this._dc);this.frame=this.frame+1};lanyard.BasicSceneController.prototype.getFramesPerSecond=function(){return 0};goog.provide("lanyard.Model");lanyard.Model=function(){};lanyard.Model.prototype.getExtent=function(){};lanyard.Model.prototype.getGlobe=function(){};lanyard.Model.prototype.getLayers=function(){};lanyard.Model.prototype.setGlobe=function(globe){};lanyard.Model.prototype.setLayers=function(layers){};lanyard.Model.prototype.getTessellator=function(){};lanyard.Model.prototype.setTessellator=function(tessellator){};lanyard.Model.prototype.setShowWireframeInterior=function(show){};
lanyard.Model.prototype.setShowWireframeExterior=function(show){};lanyard.Model.prototype.isShowWireframeInterior=function(){};lanyard.Model.prototype.isShowWireframeExterior=function(){};lanyard.Model.prototype.isShowTessellationBoundingVolumes=function(){};lanyard.Model.prototype.setShowTessellationBoundingVolumes=function(showTileBoundingVolumes){};goog.provide("lanyard.FrameController");lanyard.FrameController=function(){};lanyard.FrameController.prototype.initializeFrame=function(dc){};lanyard.FrameController.prototype.drawFrame=function(dc){};lanyard.FrameController.prototype.finalizeFrame=function(dc){};goog.provide("lanyard.SceneController");goog.require("lanyard.Model");goog.require("lanyard.View");goog.require("lanyard.FrameController");lanyard.SceneController=function(){};lanyard.SceneController.prototype.getModel=function(){};lanyard.SceneController.prototype.setModel=function(model){};lanyard.SceneController.prototype.getView=function(){};lanyard.SceneController.prototype.setView=function(view){};lanyard.SceneController.prototype.getFrameController=function(){};
lanyard.SceneController.prototype.setFrameController=function(frameController){};lanyard.SceneController.prototype.repaint=function(){};lanyard.SceneController.prototype.setVerticalExaggeration=function(verticalExaggeration){};lanyard.SceneController.prototype.getVerticalExaggeration=function(){};lanyard.SceneController.prototype.getFramesPerSecond=function(){};goog.provide("lanyard.LanyardCanvas");goog.require("goog.debug.Logger");goog.require("lanyard.BasicSceneController");goog.require("lanyard.SceneController");lanyard.LanyardCanvas=function(canvasElement){this._sceneController=new lanyard.BasicSceneController(canvasElement);this._canvasElement=canvasElement;this._inputHandler=null;this._logger=goog.debug.Logger.getLogger("lanyard.LanyardCanvas")};
lanyard.LanyardCanvas.prototype.setModel=function(model){if(this._sceneController)this._sceneController.setModel(model);else this._logger.severe("Attempted to set a model without a valid scene controller.")};lanyard.LanyardCanvas.prototype.getModel=function(){var ret=this._sceneController?this._sceneController.getModel():null;return ret};
lanyard.LanyardCanvas.prototype.setView=function(view){if(!this._canvasElement)this._logger.severe("Attempted to set the view without a valid canvas element.");if(!view)this._logger.severe("Attempted to set an invalid view.");view.setViewportFromCanvas(this._canvasElement);if(this._sceneController)this._sceneController.setView(view);else this._logger.severe("Tried to set a view without a scene controller existing.")};
lanyard.LanyardCanvas.prototype.getView=function(){if(!this._sceneController)this._logger.severe("Attempted to get the view from an invalid scene controller.");return this._sceneController.getView()};lanyard.LanyardCanvas.prototype.setModelAndView=function(model,view){this.setModel(model);this.setView(view)};lanyard.LanyardCanvas.prototype.getSceneController=function(){return this._sceneController};lanyard.LanyardCanvas.prototype.getCanvas=function(){return this._canvasElement};
lanyard.LanyardCanvas.prototype.display=function(){var sc=this.getSceneController();if(!sc)this._logger.fine("The scene controller was null when a repaint was attempted.");sc.repaint()};lanyard.LanyardCanvas.prototype.createDefaultInputHandler=function(){this.inputHandler=new lanyard.dom.InputHandler;this.inputHandler.setEventSource(this)};lanyard.LanyardCanvas.prototype.getInputHandler=function(){return this.inputHandler};
lanyard.LanyardCanvas.prototype.setInputHandler=function(eventSource){if(this.inputHandler!==null)this.inputHandler.setEventSource(null);this.inputHandler=eventSource;if(this.inputHandler!==null)this.inputHandler.setEventSource(this)};goog.provide("lanyard.demo.BasicDemo2");goog.require("goog.debug.DivConsole");goog.require("goog.debug.LogManager");goog.require("goog.debug.Logger");goog.require("goog.events.Event");goog.require("lanyard.BasicModel");goog.require("lanyard.BasicOrbitView");goog.require("lanyard.BasicDrawContext");goog.require("lanyard.LanyardCanvas");goog.require("lanyard.demo.StatusBar");goog.require("lanyard.dom.InputHandler");
lanyard.demo.BasicDemo2=function(webGLCanvas,eventLogDiv){this._webGLCanvas=webGLCanvas;this._eventLogDiv=eventLogDiv;this._logger=goog.debug.Logger.getLogger("lanyard.demo.BasicDemo2");this.lanyardCanvas=null};goog.exportSymbol("lanyard.demo.BasicDemo2",lanyard.demo.BasicDemo2);
lanyard.demo.BasicDemo2.prototype.run=function(){this.setupEventLog();var model=new lanyard.BasicModel;var view=new lanyard.BasicOrbitView;view.setViewportFromCanvas(this._webGLCanvas);var dc=new lanyard.BasicDrawContext(this._webGLCanvas);dc.setModel(model);dc.setView(view);this.lanyardCanvas=new lanyard.LanyardCanvas(this._webGLCanvas);this.lanyardCanvas.setModel(model);this.lanyardCanvas.setView(view);this.lanyardCanvas.createDefaultInputHandler();dc.loadShaders("shader-vs","shader-fs");dc.setupShaders();
dc.getGL().clearColor(0,0,0,1);dc.getGL().clearDepth(1);dc.getGL().enable(dc.getGL().DEPTH_TEST);dc.getGL().enable(dc.getGL().CULL_FACE);dc.getGL().depthFunc(dc.getGL().LEQUAL);view.doApply(dc);var sgl=dc.getModel().getTessellator().tessellate(dc);var self=this;setInterval(function(){dc.getGL().viewport(0,0,500,500);dc.getGL().clear(dc.getGL().COLOR_BUFFER_BIT|dc.getGL().DEPTH_BUFFER_BIT);view.doApply(dc);for(var i=0;i<sgl.length();i=i+1)sgl.at(i).renderWireframe(dc,true,false)},15)};
goog.exportSymbol("lanyard.demo.BasicDemo2.prototype.run",lanyard.demo.BasicDemo2.prototype.run);lanyard.demo.BasicDemo2.prototype.setupEventLog=function(){goog.debug.LogManager.getRoot().setLevel(goog.debug.Logger.Level.ALL);var logconsole=new goog.debug.DivConsole(this._eventLogDiv);logconsole.setCapturing(true)};goog.exportSymbol("lanyard.demo.BasicDemo2.prototype.setupEventLog",lanyard.demo.BasicDemo2.prototype.setupEventLog);
lanyard.demo.BasicDemo2.prototype.addStatusBar=function(statusBar){if(!this.lanyardCanvas)this._logger.severe("A LanyardCanvas must exist before a status bar is added.");if(!statusBar)this._logger.severe("Attempted to attach an invalid status bar.");statusBar.setEventSource(this.lanyardCanvas)};goog.exportSymbol("lanyard.demo.BasicDemo2.prototype.addStatusBar",lanyard.demo.BasicDemo2.prototype.addStatusBar);
